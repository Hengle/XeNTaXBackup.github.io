## Post #1
- Username: NixorED
- Rank: ultra-n00b
- Number of posts: 3
- Joined date: Sat Oct 16, 2010 2:06 am
- Post datetime: 2010-10-15T18:56:05+00:00
- Post Title: [Request] Some help on *.xp files (9Dragons MMORPG)

Hi,

My first post on this forum, which looks very nice so far! (mature rules, pointing towards helping ppl out etc. etc.)
I found this forum by reading (the very well written) guide/tut/info "Definitive guide to exploring file formats ZW 2009". I came till page 32 of it (and am not lost yet   ) but I realized that what I intended to find out, goes beyond my current capability's. So I hope some of you can help me out here. 

What I'd like find out:
I've played Maplestory for a while (discussed here too). Its always crowded with skilled crackers there, who at some point released a '*.wz editor' (*.wz is the archive name of the files maple uses). One could alter the files - and get a huge benefit from it, so Im wondering whether that would be possible too for 9Dragons. It's a material art based MMORPG made by Indy21, hosted by Acclaim till late summer this year and now in hands of GamersFirst.
It's Asian - thus what I found out so far with HexWorkshop 6 was, that when put into 'unicode' Chineze characters appeared. And I can't tell, but I think it's a rather simple file..

The question I got is:
Would it be possible to view the game files like one could with HaRepacker/deMSwz (decrypt-thing's, who showd you the actual names/files and would let you edit them) in maple - and make changes? And how to do so/what programs to use.

The game comes in the DATA\TEXTURE folder with two types of files: one is *.XRS a smaller one and a bigger one *.XP  (I think comparable with the .cue and .bin files of Dvd's)

I have no clue how complex it is to make such a thing like HaRepacker, or deMSwz for a certain file, so just tell me if it's not gonna happen!

Sadly filecutter doesn't work for me (giving error 339 - and coming in 2 versions: one from forum-rules with 2 files total size 51kB and one from tool's with 4 files, total size 23X kB) but i've included an sample of the two file types (18mb doable at 30kbps/up).

Direct game - Download link:
The game itself can be downloaded with the 'Gamersfirst Live!' app (some sort of p2p I guess- pando media booster is involved) but its freely available [here](http://setup.gamersfirst.com/live/current/GamersFirst_LIVE!_Setup_EN.exe)

Samples: 
[The TR_INTERFACE.XP file (18mb)](http://www.zshare.net/download/815845400ee6fdfa/)
[The INTERFACE.XRS file](http://www.zshare.net/download/815846331723b85c/)

PS:
I hope this is as complete & after the rules as possible!
Also - on a side note, there are [more people who would love something like this](http://www.elitepvpers.de/forum/9dragons/)
Edit*: Lay-out
## Post #2
- Username: NixorED
- Rank: ultra-n00b
- Number of posts: 3
- Joined date: Sat Oct 16, 2010 2:06 am
- Post datetime: 2010-10-19T19:14:59+00:00
- Post Title: [Request] Some help on *.xp files (9Dragons MMORPG)

I've accomplished to decompile the game.exe (thanks to a certain person ^^).
As for the data files listed above, still appreciated if someone has the time to look at it, but for now my priority's are to crack the encryption of their packets..

Thanksanyhow for having me
~
## Post #3
- Username: NixorED
- Rank: ultra-n00b
- Number of posts: 3
- Joined date: Sat Oct 16, 2010 2:06 am
- Post datetime: 2010-10-24T23:21:32+00:00
- Post Title: [Request] Some help on *.xp files (9Dragons MMORPG)

for those who are on a similar journey:
NINEDRAGONS.EXE is packet with yC/yoda (2nd packer) and with ASProtect (1st packer). These can be repacked; if done rite u end up with a file 19.8mb (starting size was 1.6mb).

Some helpful forum is tuts4you, where one goes more specific into reverse engineering. 
Okay thats for now.
## Post #4
- Username: Ekey
- Rank: M-M-M-Monster veteran
- Number of posts: 1823
- Joined date: Wed Mar 31, 2010 1:54 pm
- Post datetime: 2012-02-14T20:14:41+00:00
- Post Title: [Request] Some help on *.xp files (9Dragons MMORPG)

Sorry for necropost ^_^ XP tool [here](http://www.progamercity.net/game-files/3088-tool-9dragons-online-xp-packer-extractor.html)
## Post #5
- Username: finale00
- Rank: M-M-M-Monster veteran
- Number of posts: 2382
- Joined date: Sat Apr 09, 2011 8:22 am
- Post datetime: 2012-02-15T03:09:33+00:00
- Post Title: [Request] Some help on *.xp files (9Dragons MMORPG)

It doesn't load any of the XP files I have.
What's the format? Maybe it's easier to just get a bms script out.
## Post #6
- Username: Ekey
- Rank: M-M-M-Monster veteran
- Number of posts: 1823
- Joined date: Wed Mar 31, 2010 1:54 pm
- Post datetime: 2012-02-15T07:05:14+00:00
- Post Title: [Request] Some help on *.xp files (9Dragons MMORPG)

> Reply from finale00
>
> It doesn't load any of the XP files I have.
What's the format? Maybe it's easier to just get a bms script out.
Only pack XP, DAT.
## Post #7
- Username: finale00
- Rank: M-M-M-Monster veteran
- Number of posts: 2382
- Joined date: Sat Apr 09, 2011 8:22 am
- Post datetime: 2012-02-15T07:15:24+00:00
- Post Title: [Request] Some help on *.xp files (9Dragons MMORPG)

Interesting, so it can pack xp files...but can't unpack them? o.O
## Post #8
- Username: Ekey
- Rank: M-M-M-Monster veteran
- Number of posts: 1823
- Joined date: Wed Mar 31, 2010 1:54 pm
- Post datetime: 2012-02-15T07:16:41+00:00
- Post Title: [Request] Some help on *.xp files (9Dragons MMORPG)

> Reply from finale00
>
> Interesting, so it can pack xp files...but can't unpack them? o.O
Dunno
## Post #9
- Username: finale00
- Rank: M-M-M-Monster veteran
- Number of posts: 2382
- Joined date: Sat Apr 09, 2011 8:22 am
- Post datetime: 2012-02-15T07:26:09+00:00
- Post Title: [Request] Some help on *.xp files (9Dragons MMORPG)

I think it's just the file table that's encrypted. One of the sound archives, you can easily see the RIFF headers.
Think you could figure out the key? lol
## Post #10
- Username: Ekey
- Rank: M-M-M-Monster veteran
- Number of posts: 1823
- Joined date: Wed Mar 31, 2010 1:54 pm
- Post datetime: 2012-02-15T07:33:38+00:00
- Post Title: [Request] Some help on *.xp files (9Dragons MMORPG)

```
#define ID_XPACKSTRUCTFILE_VERSION        0xECEF

#define _HEADERINDICATOR_PACKAGEFILE            0xFEFA
#define _HEADERINDICATOR_PACKAGEFILEVERSION		0xA001

typedef struct 
{

	WORD HeaderIndicator;
	WORD FileVersion;	
	int  PackedFileCount;

} _PACKAGEFILE_HEADER;


#define _ENCODEKEY		0xEF

void _EncodeData( LPSTR string, BYTE key )
{
	if( !string ) return;
	ASSERT( string );

	int length = strlen( string );

	LPSTR tptr = string;

	for( int i = 0; i < length; i++ )
	{
		*tptr ^= key;
		tptr++;
	}
}
```
