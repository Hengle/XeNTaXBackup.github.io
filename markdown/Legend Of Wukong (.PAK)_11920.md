## Post #1
- Username: Ekey
- Rank: M-M-M-Monster veteran
- Number of posts: 1823
- Joined date: Wed Mar 31, 2010 1:54 pm
- Post datetime: 2014-09-08T13:08:41+00:00
- Post Title: Legend Of Wukong (*.PAK)

Offsite: [here](http://wk.lbwgame.com/main)
Download: [here](http://wkdl.lbwgame.com/client/wkz_client_1.2.4.26.exe)
Old Topic: [here](http://forum.xentax.com/viewtopic.php?f=10&t=7359)

Script for unpack new PAK files

```
# 
# Original script by chrrox, modified by Ekey (h4x0r)
# 
# script for QuickBMS http://quickbms.aluigi.org

idstring "PAK\x00"
goto 0x19
get size long
get zsize long
get offset long
get baseoff long
get datasize long
get arcsize long
clog MEMORY_FILE offset zsize size
get unk01 long MEMORY_FILE
get unk02 long MEMORY_FILE
get files short MEMORY_FILE
goto 0x12 MEMORY_FILE
get folder3 string MEMORY_FILE

For tmp = tmp != size
    get offset long MEMORY_FILE
    get size2 long MEMORY_FILE
    math offset + baseoff
    
    if size2 == 0
       get folder string MEMORY_FILE
    else if size2 == 1
       get folder2 string MEMORY_FILE
       string folder + \
       string folder + folder2
    else
       get name2 string MEMORY_FILE
       set name folder
       string name + \
       string name + name2
       filexor "0x0D 0xD9 0x1E 0x3E 0x89 0x7A 0x4C 0x2A 0x2A 0x81 0xF4 0x50 0x32 0xDB 0xD4 0x23 0x8B 0x5A 0x54 0x56 0x53 0x64 0x34 0x82 0x20 0xE6 0x04 0xF0 0x51 0xC0 0x11 0xBC 0x8D 0xFF 0xE8 0x4D 0x6E 0x45 0x72 0x4D 0x85 0xE5 0xBD 0x32 0x19 0xFB 0xE9 0x60 0x82 0x10 0x59 0xFB 0xEE 0x02 0x2F 0x9A 0x47 0x39 0x2C 0xE0 0xB1 0x33 0x1E 0x08 0x79 0xC9 0xDD 0xE0 0xA2 0x69 0x4F 0xDD 0x75 0xF7 0xD3 0x8C 0x98 0xDA 0x76 0x2E 0x3E 0x0A 0xE8 0x3C 0x5A 0x21 0x6B 0xE3 0xD8 0xCE 0x46 0x51 0x90 0xD9 0x06 0x3F 0xFE 0x1A 0x45 0xA4 0x6C 0xA0 0xAA 0x75 0x80 0x9A 0x64 0xDC 0xDB 0xF5 0xF9 0xFE 0xC1 0x10 0x7A 0xA8 0xD3 0x61 0xC7 0xB1 0xCD 0x12 0x83 0xEF 0x69 0xC1 0xB8 0xDC 0x95 0xB9 0x71 0x48 0x1F 0x52 0x67 0x1A 0x91 0x73 0x58 0x7E 0x65 0xC3 0x07 0xAF 0x28 0xBE 0x8F 0xC0 0x69 0xC4 0xC4 0x5A 0x24 0xA2 0x06 0x0F 0x07 0x7B 0x58 0x57 0xFC 0xCA 0x62 0x44 0x3B 0x2F 0xFB 0xEF 0x90 0xA0 0x41 0x3B 0x40 0x08 0xDF 0x71 0x6A 0x42 0x44 0xE6 0x8A 0x35 0x34 0x6E 0x3D 0x96 0x22 0x19 0xB7 0x91 0xB3 0x47 0x31 0x3A 0x72 0xE6 0xC9 0xA1 0x95 0xEA 0x8C 0x9D 0x15 0x45 0x6F 0x0B 0x5D 0x1B 0xD9 0x10 0xC8 0x6E 0x6B 0x5D 0xE9 0xC9 0xB9 0x23 0x4C 0x6B 0xA1 0xBC 0xC7 0x25 0xD2 0x14 0x2A 0x49 0x9D 0x41 0x9D 0x9E 0xD5 0xFE 0x30 0x20 0x75 0x82 0x2D 0x8D 0xF4 0x51 0x80 0xE5 0xD8 0x30 0xF4 0x68 0xCA 0xF5 0x0D 0xD9 0x1E 0x3E 0x89 0x7A" offset
       log name offset size2
       filexor ""
endif
    savepos tmp MEMORY_FILE
next
```
## Post #2
- Username: lolwatt
- Rank: veteran
- Number of posts: 143
- Joined date: Mon Sep 22, 2014 8:23 am
- Post datetime: 2014-09-23T22:58:46+00:00
- Post Title: Legend Of Wukong (*.PAK)

Thanks Ekey, this indeed works.

However, the .C3M importer is broken ([viewtopic.php?f=16&t=7385](http://forum.xentax.com/viewtopic.php?f=16&t=7385))

Any idea how we can get past that?
