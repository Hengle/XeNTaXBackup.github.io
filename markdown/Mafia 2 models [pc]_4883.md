## Post #1
- Username: Tosyk
- Rank: double-veteran
- Number of posts: 1027
- Joined date: Thu Oct 22, 2009 5:24 pm
- Post datetime: 2010-08-14T02:59:42+00:00
- Post Title: Mafia 2 models [pc]

Requesting for Mafia 2 models converter.

I tnink we have same 3d engine as for Mafia 1, but heavenly modified.

I attached file with [Vito in Coat](http://www.sendspace.com/file/aonton). Can anyone convert it in dae/smd/fbx with bones and weight data?
Also i attached [file with car](http://www.sendspace.com/file/46cy69) called in game Houston.

3d ripped:
[](http://s001.radikal.ru/i195/1008/43/09c455d5b7b9.jpg)


p.s.: I believe than we need not just converting car to 3d app, but also converting models back to game.
## Post #2
- Username: huckleberrypie
- Rank: ultra-veteran
- Number of posts: 351
- Joined date: Mon Apr 26, 2010 1:51 pm
- Post datetime: 2010-08-14T12:07:26+00:00
- Post Title: Mafia 2 models [pc]

Nice ripping, dude. Mind if you share us the model format and maxscript? Or did you just use the Mafia 1 importer?
## Post #3
- Username: Tosyk
- Rank: double-veteran
- Number of posts: 1027
- Joined date: Thu Oct 22, 2009 5:24 pm
- Post datetime: 2010-08-14T12:48:15+00:00
- Post Title: Mafia 2 models [pc]

> Reply from huckleberrypie
>
> Nice ripping, dude. Mind if you share us the model format and maxscript? Or did you just use the Mafia 1 importer?
No, I'm just use [3d ripper DX](http://www.deep-shadows.com/hax/3DRipperDX.htm), and then use directX shaders in max to do that picture.

Anyway we need good converter for import/export models from/into game.
## Post #4
- Username: jackpack
- Rank: advanced
- Number of posts: 47
- Joined date: Wed Sep 09, 2009 2:28 am
- Post datetime: 2010-08-17T22:18:47+00:00
- Post Title: Mafia 2 models [pc]

dont know what i can do but im modding fallout3 & mafia models would fit into f3 like a dream .

i ask you this, if you pass me some mafia models, cars or whatnot, i can give you ANY model of ANYTHING you could want.
## Post #5
- Username: huckleberrypie
- Rank: ultra-veteran
- Number of posts: 351
- Joined date: Mon Apr 26, 2010 1:51 pm
- Post datetime: 2010-08-28T08:28:52+00:00
- Post Title: Mafia 2 models [pc]

Can you rip some more cars from the game? Apparently, my Mafia II doesn't like being with 3D Ripper.
## Post #6
- Username: Nobby
- Rank: veteran
- Number of posts: 109
- Joined date: Thu May 13, 2010 7:35 am
- Post datetime: 2010-08-28T11:32:02+00:00
- Post Title: Mafia 2 models [pc]

You guys are TOTALLY missing the point of this. Tosyk isnt interested in DXripping stuff, he wants to extract the models from the game archives, as they are much cleaner models and any characters will be in there neutral poses not  frozen in whatever position they were captured at. The only reason he used Dxripper was to show you what the models look like.

If your copy of dxripper cannot work in a game that someone else can get to work. then try running dx ripper in global mode. That gets around a lot of the problems regarding DXrippr crashing, or the game crashing.  

Just wait a little for someone to figure out the extraction process, then you can have proper correctly positioned and correctly textured models.

Nobby
## Post #7
- Username: Tosyk
- Rank: double-veteran
- Number of posts: 1027
- Joined date: Thu Oct 22, 2009 5:24 pm
- Post datetime: 2010-08-28T11:36:48+00:00
- Post Title: Mafia 2 models [pc]

2Nobby:
Thanks for pointing!  I modifying my first post.
## Post #8
- Username: huckleberrypie
- Rank: ultra-veteran
- Number of posts: 351
- Joined date: Mon Apr 26, 2010 1:51 pm
- Post datetime: 2010-09-03T11:27:53+00:00
- Post Title: Mafia 2 models [pc]

Any new progress on the model formats?
## Post #9
- Username: Tosyk
- Rank: double-veteran
- Number of posts: 1027
- Joined date: Thu Oct 22, 2009 5:24 pm
- Post datetime: 2010-09-03T11:47:43+00:00
- Post Title: Mafia 2 models [pc]

> Reply from huckleberrypie
>
> Any new progress on the model formats?Sorry, nothing new. The same happened with the first part. Very long unscrambled format.
## Post #10
- Username: RoadTrain
- Rank: advanced
- Number of posts: 54
- Joined date: Thu Dec 13, 2007 12:57 am
- Post datetime: 2010-09-05T03:38:37+00:00
- Post Title: Mafia 2 models [pc]

Oleg (Zanoza Modeler author) wrote 

> mesh files seems to be very messy on a first glance. Of cause, vertices and index pools are cleary-readable, but the rest is a complete mess...
[http://forum.zmodeler2.com/viewtopic.php?t=4778](http://forum.zmodeler2.com/viewtopic.php?t=4778) I check this topic frequently for updates.
I think that the Mafia II filter for ZModeler will be the first working importer/exporter as it was with GTA IV.
## Post #11
- Username: Brejlounek
- Rank: ultra-n00b
- Number of posts: 1
- Joined date: Mon Sep 06, 2010 8:33 pm
- Post datetime: 2010-09-06T13:00:49+00:00
- Post Title: Mafia 2 models [pc]

> Of cause, vertices and index pools are cleary-readable, but the rest is a complete mess...

What? Vertices are clearly readable? We know the data types and their offsets? O_o

And, there is something other than vertex and indices pool we need?
## Post #12
- Username: RoadTrain
- Rank: advanced
- Number of posts: 54
- Joined date: Thu Dec 13, 2007 12:57 am
- Post datetime: 2010-09-06T16:37:40+00:00
- Post Title: Mafia 2 models [pc]

> Reply from Brejlounek
>
> Of cause, vertices and index pools are cleary-readable, but the rest is a complete mess...

What? Vertices are clearly readable? We know the data types and their offsets? O_o

And, there is something other than vertex and indices pool we need?
Yeah, UV mapping, collision etc. I think we should know everything about the data inside the model files if we want to create mods, not only to grab models from the game.
## Post #13
- Username: Tosyk
- Rank: double-veteran
- Number of posts: 1027
- Joined date: Thu Oct 22, 2009 5:24 pm
- Post datetime: 2010-09-11T17:33:43+00:00
- Post Title: Mafia 2 models [pc]

Zmodeler 2 progress:
[ZM2_M2car_temp.jpg](https://xentaxbackup.github.io/file/3428_ZM2_M2car_temp.jpg)
## Post #14
- Username: RoadTrain
- Rank: advanced
- Number of posts: 54
- Joined date: Thu Dec 13, 2007 12:57 am
- Post datetime: 2010-09-12T00:05:48+00:00
- Post Title: Mafia 2 models [pc]

> Reply from Tosyk
>
> Zmodeler 2 progress:
Where have you gotten this picture from?
## Post #15
- Username: Tosyk
- Rank: double-veteran
- Number of posts: 1027
- Joined date: Thu Oct 22, 2009 5:24 pm
- Post datetime: 2010-09-12T02:53:08+00:00
- Post Title: Mafia 2 models [pc]

> Reply from RoadTrain
>
> Tosyk wrote:Zmodeler 2 progress:
Where have you gotten this picture from?
From russian [site](http://forum.mafia-game.ru/showthread.php?p=100645#post100645).
## Post #16
- Username: Szkaradek123
- Rank: mega-veteran
- Number of posts: 292
- Joined date: Thu May 06, 2010 3:21 am
- Post datetime: 2010-09-12T06:34:59+00:00
- Post Title: Re: Mafia 2 models [pc]

The contents of this post was deleted because of possible forum rules violation.
[houston.jpg](https://xentaxbackup.github.io/file/3433_houston.jpg)
## Post #17
- Username: Tosyk
- Rank: double-veteran
- Number of posts: 1027
- Joined date: Thu Oct 22, 2009 5:24 pm
- Post datetime: 2010-09-12T13:36:57+00:00
- Post Title: Re: Mafia 2 models [pc]

The contents of this post was deleted because of possible forum rules violation.
## Post #18
- Username: huckleberrypie
- Rank: ultra-veteran
- Number of posts: 351
- Joined date: Mon Apr 26, 2010 1:51 pm
- Post datetime: 2010-09-12T23:56:55+00:00
- Post Title: Re: Mafia 2 models [pc]

Nice... Other than some apparent UV issues, I guess it's about time that I convert these models to San Andreas. Does this also work for ped models, too?
## Post #19
- Username: Tosyk
- Rank: double-veteran
- Number of posts: 1027
- Joined date: Thu Oct 22, 2009 5:24 pm
- Post datetime: 2010-09-13T00:37:38+00:00
- Post Title: Re: Mafia 2 models [pc]

> Reply from huckleberrypie
>
> Nice... Other than some apparent UV issues, I guess it's about time that I convert these models to San Andreas. Does this also work for ped models, too?
yes  
[](http://s58.radikal.ru/i160/1009/37/2bdcd91113fd.jpg)
## Post #20
- Username: badmedia
- Rank: ultra-n00b
- Number of posts: 5
- Joined date: Tue Sep 14, 2010 1:16 am
- Post datetime: 2010-09-13T17:22:01+00:00
- Post Title: Re: Mafia 2 models [pc]

The contents of this post was deleted because of possible forum rules violation.
## Post #21
- Username: Tosyk
- Rank: double-veteran
- Number of posts: 1027
- Joined date: Thu Oct 22, 2009 5:24 pm
- Post datetime: 2010-09-13T17:25:39+00:00
- Post Title: Re: Mafia 2 models [pc]

The contents of this post was deleted because of possible forum rules violation.
## Post #22
- Username: Szkaradek123
- Rank: mega-veteran
- Number of posts: 292
- Joined date: Thu May 06, 2010 3:21 am
- Post datetime: 2010-09-13T17:30:57+00:00
- Post Title: Re: Mafia 2 models [pc]

SDS Extractor:
Link:
[http://mafiascene.com/forum/viewtopic.php?p=282049](http://mafiascene.com/forum/viewtopic.php?p=282049)

Blender version 249b:
Link:
[http://www.blender.org/download/get-blender/](http://www.blender.org/download/get-blender/)
## Post #23
- Username: badmedia
- Rank: ultra-n00b
- Number of posts: 5
- Joined date: Tue Sep 14, 2010 1:16 am
- Post datetime: 2010-09-13T17:54:58+00:00
- Post Title: Re: Mafia 2 models [pc]

> Reply from Tosyk
>
> 
to get ' .IndexBufferPool ' and ' .VertexBufferPool ' files you must extract sds file
When I click execute code nothing happens?

how or what do I import once I load it up with the file provided above?
## Post #24
- Username: badmedia
- Rank: ultra-n00b
- Number of posts: 5
- Joined date: Tue Sep 14, 2010 1:16 am
- Post datetime: 2010-09-14T17:57:18+00:00
- Post Title: Re: Mafia 2 models [pc]

what the?
L]
Is this an error, or this is how it is?
(it's vitpra by the way)
## Post #25
- Username: Tosyk
- Rank: double-veteran
- Number of posts: 1027
- Joined date: Thu Oct 22, 2009 5:24 pm
- Post datetime: 2010-09-14T18:20:12+00:00
- Post Title: Re: Mafia 2 models [pc]

> Reply from badmedia
>
> what the?
Is this an error, or this is how it is?
(it's vitpra by the way)
Don't double-posting here, please.
My vitpra:
[](http://s43.radikal.ru/i099/1009/bb/796840cb7eed.jpg)

what are you exactly doing to get your model?
## Post #26
- Username: badmedia
- Rank: ultra-n00b
- Number of posts: 5
- Joined date: Tue Sep 14, 2010 1:16 am
- Post datetime: 2010-09-14T20:59:09+00:00
- Post Title: Re: Mafia 2 models [pc]

> Reply from Tosyk
>
> badmedia wrote:what the?
Is this an error, or this is how it is?
(it's vitpra by the way)
Don't double-posting here, please.
My vitpra:


what are you exactly doing to get your model?
sorry, on other forums double post is allowed, force of habbit 

I extracted all the files in vitpra, put them in a folder, put the import mafia2.blend file in with them.
Ran the import.blend file, Blender stats up and I right click and press execute script on the text on the left.

How did you get yours to work?
## Post #27
- Username: jackpack
- Rank: advanced
- Number of posts: 47
- Joined date: Wed Sep 09, 2009 2:28 am
- Post datetime: 2010-09-16T16:59:31+00:00
- Post Title: Re: Mafia 2 models [pc]

> Reply from badmedia
>
> Tosyk wrote:badmedia wrote:what the?
Is this an error, or this is how it is?
(it's vitpra by the way)

I extracted all the files in vitpra, put them in a folder, put the import mafia2.blend file in with them.
Ran the import.blend file, Blender stats up and I right click and press execute script on the text on the left.

thats how i done it & i got a good result.

problen lies when you get it in the textures are feked up.

i exported it as an nif file & loaded it in nifscope & the model is feked up too.
## Post #28
- Username: badmedia
- Rank: ultra-n00b
- Number of posts: 5
- Joined date: Tue Sep 14, 2010 1:16 am
- Post datetime: 2010-09-16T22:00:36+00:00
- Post Title: Re: Mafia 2 models [pc]

The contents of this post was deleted because of possible forum rules violation.
## Post #29
- Username: huckleberrypie
- Rank: ultra-veteran
- Number of posts: 351
- Joined date: Mon Apr 26, 2010 1:51 pm
- Post datetime: 2010-09-19T08:26:35+00:00
- Post Title: Re: Mafia 2 models [pc]

> Reply from badmedia
>
> 
How long till we can save em?

Probably after a few weeks or months, depending on how the format is made up. Oh, and here's a WIP shot of the Series 75 in San Andreas; I still have to add some more materials, obviously:
## Post #30
- Username: MaxMaron
- Rank: ultra-n00b
- Number of posts: 1
- Joined date: Wed Sep 22, 2010 3:10 am
- Post datetime: 2010-09-21T19:47:47+00:00
- Post Title: Re: Mafia 2 models [pc]

i cant import, i do all right but nothing happens if i run the script, only the gizmo appears.
i put the .-blernd file into the same folder like the pool files are...

can anyone extract a car for me?
## Post #31
- Username: Dean
- Rank: n00b
- Number of posts: 10
- Joined date: Fri Jul 09, 2010 6:09 am
- Post datetime: 2010-10-02T02:40:50+00:00
- Post Title: Re: Mafia 2 models [pc]

I'm having the same problem as the other people who aren't getting anything when they import it. Blender 2.49b, extracted the VertexBufferPool and IndexBufferPool, placed the .blend in the same folder, ran it and executed the script. Sometimes it acts like it's loading a model, but then when I check back a minute later nothing has actually loaded.
## Post #32
- Username: Szkaradek123
- Rank: mega-veteran
- Number of posts: 292
- Joined date: Thu May 06, 2010 3:21 am
- Post datetime: 2010-10-02T11:56:04+00:00
- Post Title: Re: Mafia 2 models [pc]

The contents of this post was deleted because of possible forum rules violation.
## Post #33
- Username: shakotay
- Rank: ultra-n00b
- Number of posts: 8
- Joined date: Fri Oct 29, 2010 5:43 am
- Post datetime: 2010-10-29T23:20:11+00:00
- Post Title: Re: Mafia 2 models [pc]

For all those of you who "did not get anything in blender":

I suppose it's an extractor version problem (which tool did you use for extracting the VertexBufferPool?).

(I used ExSDS v0.3 by CJay.)

I have the mafia2 demo only but I tested it with Lassiter_69.sds and it works:

[http://www.pic-upload.de/view-7568802/m ... h.jpg.html](http://www.pic-upload.de/view-7568802/mafia2_car_mesh.jpg.html)

You'll have to right click on the block at the left and delete the selection several times. 
At the end you'll see the car.

(Might occcur that nothing is left - then you'll have to repeat the procedure;-)

PS: Thank you so much, Szkaradek123, for your python script!
## Post #34
- Username: DerPlaya
- Rank: n00b
- Number of posts: 13
- Joined date: Mon Mar 22, 2010 5:41 am
- Post datetime: 2010-11-11T22:02:00+00:00
- Post Title: Re: Mafia 2 models [pc]

here's my try to write an exporter:

Mafia2ModelDumper:

- works on sds files (not just vertexbuffer/indexbuffer files, the real info is in the FrameResource data...)
- exports Models with Skeleton (if one exists) to Collada DAE format.

see Readme.txt
perhaps somebody can make a more useful tool with the source (I won't make any updates...)

source is c# (vc#2010, .net 4)

uses Gibbed's tools for sds access (thanks Rick!)

edit: updated the tool (fixed matrix stuff, cause softimage to mess up joint transforms)
[mafia2modeldumper.7z](https://xentaxbackup.github.io/file/3601_mafia2modeldumper.7z)
## Post #35
- Username: Tosyk
- Rank: double-veteran
- Number of posts: 1027
- Joined date: Thu Oct 22, 2009 5:24 pm
- Post datetime: 2010-11-12T00:58:34+00:00
- Post Title: Re: Mafia 2 models [pc]

The contents of this post was deleted because of possible forum rules violation.
[albert_prev_001.jpg](https://xentaxbackup.github.io/file/3593_albert_prev_001.jpg)
## Post #36
- Username: CityPoke912
- Rank: beginner
- Number of posts: 30
- Joined date: Sun Sep 19, 2010 3:20 am
- Post datetime: 2010-11-13T18:35:27+00:00
- Post Title: Re: Mafia 2 models [pc]

Can anyone say how use it? I completly don't know how.
## Post #37
- Username: DerPlaya
- Rank: n00b
- Number of posts: 13
- Joined date: Mon Mar 22, 2010 5:41 am
- Post datetime: 2010-11-13T21:59:11+00:00
- Post Title: Re: Mafia 2 models [pc]

bin\Release\Mafia2ModelDumper <sdsfile>

where sdsfile is the path to a sdsfile (preferably one which contains models...)

...should be already be mentioned in the readme.txt
## Post #38
- Username: shakotay
- Rank: ultra-n00b
- Number of posts: 8
- Joined date: Fri Oct 29, 2010 5:43 am
- Post datetime: 2010-11-13T22:08:50+00:00
- Post Title: Re: Mafia 2 models [pc]

Copy sds file to release\bin\Release where Mafia2ModelDumper.exe resides.
In a DOS command window type Mafia2ModelDumper lassiter_69.sds for example.
3 dae files should be created (one is lassiter_69.Lassiter_69.Root.L0.dae).

I used 'Collada 1.4.1 Importer (.dae)' (author: teraapi) with blender 2.49 for dae import.

@DerPlaya: very impressive work! Thanks a lot.  

@all: from city\distillery.sds (Mafia2 demo) you'll get 3000 dae files.
Here are two of them:

[http://www.pic-upload.de/view-7751484/d ... e.jpg.html](http://www.pic-upload.de/view-7751484/distillery.2D_TROSKY1_EXon.L0.dae.jpg.html)
[http://www.pic-upload.de/view-7751499/d ... e.jpg.html](http://www.pic-upload.de/view-7751499/distillery.3patro_SCHODY_PLECH01.L0.dae.jpg.html)

edit: upps, DerPlaya was schnella, ehm faster

greenfield villa:
[http://www.pic-upload.de/view-7756712/g ... e.jpg.html](http://www.pic-upload.de/view-7756712/greenfield.03_tommyinst01.L0.dae.jpg.html)
## Post #39
- Username: CityPoke912
- Rank: beginner
- Number of posts: 30
- Joined date: Sun Sep 19, 2010 3:20 am
- Post datetime: 2010-11-14T10:02:59+00:00
- Post Title: Re: Mafia 2 models [pc]

My DOS window after a moment close and I can't do anything.
## Post #40
- Username: shakotay
- Rank: ultra-n00b
- Number of posts: 8
- Joined date: Fri Oct 29, 2010 5:43 am
- Post datetime: 2010-11-14T12:36:01+00:00
- Post Title: Re: Mafia 2 models [pc]

> Reply from CityPoke912
>
> My DOS window after a moment close and I can't do anything.Which OS?

You'll have to open a DOS-Window:

for Win7: [http://www.sevenforums.com/tutorials/94 ... rompt.html](http://www.sevenforums.com/tutorials/947-command-prompt.html)

Should be similar for Vista.

Then the window stays open after execution of Mafia2ModelDumper and you can read the output
(whatever it may be).
## Post #41
- Username: DerPlaya
- Rank: n00b
- Number of posts: 13
- Joined date: Mon Mar 22, 2010 5:41 am
- Post datetime: 2010-11-14T13:44:46+00:00
- Post Title: Re: Mafia 2 models [pc]

...drag & drop should also work (the exe just tries to read the first command line argument as an sds file...)

i could have made it more user friendly but it's just a proof of concept thing... i encourage everyone who has c# knowledge (and can understand the poorly commented mess which is my code  ) to do something useful with it.

i originally started to write a model viewer but i don't have enough enough time and lack knowledge of mdx, xna, etc. + it would be neccessary to use the games shaders for optimal results (the game does some strange stuff like building dynamic normal maps for damaged cars, dirt, snow etc.). there is some code for reading *.mtl files and shadercache files in the source but it's incomplete and probably all wrong...

@shakotay: question: do the character models work with blender? i thought the collada import plugin for blender can't cope with vertex weights (for skeletal animation).
I'm still searching for a modelling tool to test stuff (i use softimage mod tool at the moment but it likes to crash a lot; gmax doesn't read dae files and all other stuff like maya, 3dsmax cost money...)

@CityPoke912: ...make sure you've got .net framework 4.0.
## Post #42
- Username: shakotay
- Rank: ultra-n00b
- Number of posts: 8
- Joined date: Fri Oct 29, 2010 5:43 am
- Post datetime: 2010-11-14T17:52:44+00:00
- Post Title: Re: Mafia 2 models [pc]

> Reply from DerPlaya
>
> 
@shakotay: question: do the character models work with blender? i thought the collada import plugin for blender can't cope with vertex weights (for skeletal animation).
Vito looks like this:
[http://www.pic-upload.de/view-7761219/v ... e.jpg.html](http://www.pic-upload.de/view-7761219/vitod1.VITOD1.Hips.L0.dae-Armature.jpg.html)

(There are warnings in the blender console:
Warning: The DOM was unable to create an element named float at line 46. Probably a schema violation.
Warning: The DOM was unable to create an element named color at line 64. Probably a schema violation.

Probably from Dom4Blender.pyd (COLLADA DOM API?) used by the blender dae-import script.)
## Post #43
- Username: CityPoke912
- Rank: beginner
- Number of posts: 30
- Joined date: Sun Sep 19, 2010 3:20 am
- Post datetime: 2010-11-14T19:06:03+00:00
- Post Title: Re: Mafia 2 models [pc]

I've got Framework 4.0, but it doesn't help. After a parts of second, window disappear and I can't do anything with extracting models. I'm use Win 7.
## Post #44
- Username: DerPlaya
- Rank: n00b
- Number of posts: 13
- Joined date: Mon Mar 22, 2010 5:41 am
- Post datetime: 2010-11-15T00:42:44+00:00
- Post Title: Re: Mafia 2 models [pc]

@shakotay: the warnings should be ok... those lines should be in the material/effects declaration which are dummy anyway. 

...tested it myself (in blender). i thought those lines where offset vertices but it seems blender displays the bones like this (haven't used blender before) and it seems to be ok...

@CityPoke912: maybe you should read some of the hints about opening a command window (if you did that it would stay open and not close automatically)
here's a little trick: 
- copy the Mafia2ModelDumper.exe to a folder containing sds files. 
- in an explorer window hold shift -> right click the folder (containing the exe) -> choose 'command prompt here' from the context menu -> type "Mafia2ModelDumper <sdsfile>" where sdsfile is an existing file and press enter...
## Post #45
- Username: CityPoke912
- Rank: beginner
- Number of posts: 30
- Joined date: Sun Sep 19, 2010 3:20 am
- Post datetime: 2010-11-15T19:58:39+00:00
- Post Title: Re: Mafia 2 models [pc]

OK, it work, but now I can't import that. They are few errors in the Blender's console.
## Post #46
- Username: huckleberrypie
- Rank: ultra-veteran
- Number of posts: 351
- Joined date: Mon Apr 26, 2010 1:51 pm
- Post datetime: 2010-11-16T09:59:21+00:00
- Post Title: Re: Mafia 2 models [pc]

Nice, I've been waiting for some time for this to happen. Any plans for an export plugin or a Max script for the game?
## Post #47
- Username: DerPlaya
- Rank: n00b
- Number of posts: 13
- Joined date: Mon Mar 22, 2010 5:41 am
- Post datetime: 2010-11-16T14:07:48+00:00
- Post Title: Re: Mafia 2 models [pc]

@CityPoke912: be sure to use the latest version (i edited the post some time ago). post the errors...

@huckleberrypie: i don't have max... and there's too much unknown stuff (collision models, LOD related structures, lights, ...)
the fileformat is pretty complicated (almost as bad as GTA4's). maybe oleg(zmodeler) takes a look at it some time...
## Post #48
- Username: huckleberrypie
- Rank: ultra-veteran
- Number of posts: 351
- Joined date: Mon Apr 26, 2010 1:51 pm
- Post datetime: 2010-11-17T01:12:59+00:00
- Post Title: Re: Mafia 2 models [pc]

> I don't have max... and there's too much unknown stuff (collision models, LOD related structures, lights, ...)
>
> the fileformat is pretty complicated (almost as bad as GTA4's). maybe oleg(zmodeler) takes a look at it some time...

Yeah, pretty much so. Which explains why it took a very long time for IV's model formats to be cracked, and as of today it still isn't fully documented.
## Post #49
- Username: Tosyk
- Rank: double-veteran
- Number of posts: 1027
- Joined date: Thu Oct 22, 2009 5:24 pm
- Post datetime: 2010-11-27T19:38:18+00:00
- Post Title: Re: Mafia 2 models [pc]

[Here](http://cg.forexperts.ru/2010/11/converting-3d-model-from-mafia-2/) you can find info about converting models, but no english yet, sorry.
## Post #50
- Username: lUIGUIPIETRO
- Rank: veteran
- Number of posts: 87
- Joined date: Sat Mar 13, 2010 10:59 pm
- Post datetime: 2010-12-07T19:49:31+00:00
- Post Title: Re: Mafia 2 models [pc]

Tosik I can not add textures
## Post #51
- Username: Tosyk
- Rank: double-veteran
- Number of posts: 1027
- Joined date: Thu Oct 22, 2009 5:24 pm
- Post datetime: 2010-12-08T01:39:36+00:00
- Post Title: Re: Mafia 2 models [pc]

> Reply from lUIGUIPIETRO
>
> Tosik I can not add textures
What do you mean "can not add textures"?

1 - you can't add textures to model?
     just drag to mesh from material editor

2 - you can't add textures to 3ds max\maya\xsi\blender?
     just add to material editor
## Post #52
- Username: lUIGUIPIETRO
- Rank: veteran
- Number of posts: 87
- Joined date: Sat Mar 13, 2010 10:59 pm
- Post datetime: 2010-12-08T16:09:14+00:00
- Post Title: Re: Mafia 2 models [pc]

> Reply from Tosyk
>
> lUIGUIPIETRO wrote:Tosik I can not add textures
What do you mean "can not add textures"?

1 - you can't add textures to model?
     just drag to mesh from material editor

2 - you can't add textures to 3ds max\maya\xsi\blender?
     just add to material editor

I had a problem with 3DS Max. I can now add textures.
Thanks and great job on his blog.

Now you just need to add vehicles to Mafia II.

(Translation from Russian to Spanish is horrendous in google ,...)
## Post #53
- Username: ReeceMix
- Rank: advanced
- Number of posts: 64
- Joined date: Sat Nov 10, 2007 10:01 pm
- Post datetime: 2011-01-27T21:42:09+00:00
- Post Title: Re: Mafia 2 models [pc]

The english translation has been added
[http://cg.forexperts.ru/en/2011/01/410/](http://cg.forexperts.ru/en/2011/01/410/)

Ive been extracting parts of the landscape. SDS 2 DAE (M2ObjMC v2.2)


(this is made up of 16 individual DAEs)

The Material IDs are intact, and If I found the textures and reconstructed the Multimaterial slots It would render correctly but that would take forever.

Can this program be updated to either show which DDS textures are used for each DAE model extracted (in a text file) or export the DAE's with the Material/DDS names intact?


-----------------------------------------


> Reply from Tosyk
>
> January 29th, 2011 - 09:32

Right now i’m analyzed structure of arpatro.Object05.L0.dae (converted by M2ObjMC) and arpatro.Object05.L0.dae (converted by Mafia2ModelDumper) from arpatro.sds. And I must admit that there is no logical connection between all material/object/texture files inside arpatro.sds, or maybe this information encrypted.

Mafia2ModelDumper converting in *.dae only one object (with Multimaterial, like you said).
M2ObjMC separating by material and converting in *.dae separated objects.

But not in the first case and not in the second there is no information on which object which texture you should apply to.

So for now you must looking for object’s texture by object’s UV.
## Post #54
- Username: RoadTrain
- Rank: advanced
- Number of posts: 54
- Joined date: Thu Dec 13, 2007 12:57 am
- Post datetime: 2011-03-09T08:16:00+00:00
- Post Title: Re: Mafia 2 models [pc]

Can anyone provide a link to M2ObjMC since one I've found contains a virus?
[http://www.virustotal.com/file-scan/rep ... 1299658108](http://www.virustotal.com/file-scan/report.html?id=1900b0b34db15312a778071292456cc04c2ee5a524cfe391987a27a85f09e927-1299658108)
## Post #55
- Username: ReeceMix
- Rank: advanced
- Number of posts: 64
- Joined date: Sat Nov 10, 2007 10:01 pm
- Post datetime: 2011-03-09T10:04:16+00:00
- Post Title: Re: Mafia 2 models [pc]

> Reply from RoadTrain
>
> Can anyone provide a link to M2ObjMC since one I've found contains a virus?
http://www.virustotal.com/file-scan/rep ... 1299658108

the link above in my last post is from the offical author of the program it has no virus
## Post #56
- Username: RoadTrain
- Rank: advanced
- Number of posts: 54
- Joined date: Thu Dec 13, 2007 12:57 am
- Post datetime: 2011-03-09T20:47:25+00:00
- Post Title: Re: Mafia 2 models [pc]

> Reply from ReeceMix
>
> RoadTrain wrote:Can anyone provide a link to M2ObjMC since one I've found contains a virus?
http://www.virustotal.com/file-scan/rep ... 1299658108

the link above in my last post is from the offical author of the program it has no virus
Oh my antivir Avast! detects a virus there.
[http://virusscan.jotti.org/ru/scanresul ... 8564937f6d](http://virusscan.jotti.org/ru/scanresult/e2c4cf006a82589a9287810528f8e58564937f6d)
[http://www.virustotal.com/file-scan/rep ... 1299702356](http://www.virustotal.com/file-scan/report.html?id=1900b0b34db15312a778071292456cc04c2ee5a524cfe391987a27a85f09e927-1299702356)
## Post #57
- Username: ReeceMix
- Rank: advanced
- Number of posts: 64
- Joined date: Sat Nov 10, 2007 10:01 pm
- Post datetime: 2011-03-09T22:09:11+00:00
- Post Title: Re: Mafia 2 models [pc]

False Positive
## Post #58
- Username: AceVentura
- Rank: n00b
- Number of posts: 14
- Joined date: Sun Jul 15, 2012 11:22 am
- Post datetime: 2012-07-15T12:45:57+00:00
- Post Title: Re: Mafia 2 models [pc]

Hi DerPlaya!

im using your programm to export dae files from sds, and it works very well, but it is very hard to identify which mesh to which texure belongs.

Over Tosyks' [page](http://cgig.ru/en/2011/01/converting-3d-model-from-mafia-2-en/comment-page-3/) WinOSi pointed out that there is some kinda connection between meshes and textures.

> OK, “mafia ii\edit\materials\default.mtl” is the materials library containing all the texture-names.
>
> “mafia2modeldumper\release\Mafia2Tool\FileFormats\MaterialLibrary.cs” is the source code to load this material library.
>
> In “MaterialInfoEntry.cs” there is imported a 64-bit “MaterialHash” for each group of triangles. With this Hash-Key you can query the materials library to find the textures.
>
> In file “BaseComponent.cs”, there is a “TransformMatrix” for each objects, that tells exactly where to place and orient that object. In my tests, I had to scale the dae’s by before applying the matrix.
>
> 
>
> er… the missing scale factor from above is (-0.01, -0.01, 0.01).
>
> The only thing missing for the complete city are the shared objects like trees etc.
>
> They are stored in city_crash.sds, but the exported dae’s of the foliage seems to be corrupt. Maybe you can help here…

Can u please somehow modify ur programm to export which dae belongs to which dds?

Thank you
## Post #59
- Username: ReeceMix
- Rank: advanced
- Number of posts: 64
- Joined date: Sat Nov 10, 2007 10:01 pm
- Post datetime: 2013-08-01T10:21:39+00:00
- Post Title: Re: Mafia 2 models [pc]

Taken From Tosyk's website

> OK, “mafia ii\edit\materials\default.mtl” is the materials library containing all the texture-names.
>
> “mafia2modeldumper\release\Mafia2Tool\FileFormats\MaterialLibrary.cs” is the source code to load this material library.
>
> In “MaterialInfoEntry.cs” there is imported a 64-bit “MaterialHash” for each group of triangles. With this Hash-Key you can query the materials library to find the textures.
>
> In file “BaseComponent.cs”, there is a “TransformMatrix” for each objects, that tells exactly where to place and orient that object. In my tests, I had to scale the dae’s by before applying the matrix.

Has there been any progress in assigning the correct dds UVs to the dae models?
## Post #60
- Username: Henchman800
- Rank: mega-veteran
- Number of posts: 308
- Joined date: Sat Nov 17, 2018 12:00 am
- Post datetime: 2020-02-06T16:01:50+00:00
- Post Title: Re: Mafia 2 models [pc]

> Reply from Tosyk ↑Sat Aug 14, 2010 10:59 am at Sat Aug 14, 2010 10:59 am
>
> 
Requesting for Mafia 2 models converter.

Hey there!
Many years later, I'm on ripping a few mafia assets myself! ^^

I used your extractors to get the .dae files out of the .sds archives.
I wanna import the carshowroom into blender. The problem is that some objects seem to have incorrect positions:


So far so good....
The problem is that the showrooms interior is misplaced. Is there a way to fix that? Or do I have to do it manually?
Thx for the great tools by the way 

PEACE
