## Post #1
- Username: Metalraptor
- Rank: ultra-n00b
- Number of posts: 2
- Joined date: Mon Feb 11, 2008 1:34 pm
- Post datetime: 2008-02-11T08:10:39+00:00
- Post Title: Ar tonelico, Atelier Iris - 1, 2 & 3 graphics extraction?

I'm not sure if this should go under the graphics forum or requests, but I decided to ask it here.
Sorry if it's the wrong thread.

I've been trying to extract picture graphics from the following games for some time now:
[Ar tonelico: Melody of Elemia (PS2)](http://www.answers.com/topic/ar-tonelico-melody-of-elemia), [Atelier Iris: Eternal Mana (PS2)](http://www.answers.com/topic/atelier-iris-eternal-mana-1?cat=entertainment),
[Atelier Iris 2: The Azoth of Destiny (PS2)](http://www.answers.com/topic/atelier-iris-2-the-azoth-of-destiny?cat=entertainment), [Atelier Iris 3: Grand Phantasm (PS2)](http://www.answers.com/topic/atelier-iris-3-grand-phantasm).

All four games were created by Gust and were published by NIS America, and all four games run on the Playstation 2.
So far I've managed to extract both audio and video without any trouble.
My only problem is with the picture graphics such as sprites and character portraits.
What I'm primarily trying to do is extract the character pictures from Ar tonelico.

Here is a layout of Ar tonelico's folders:

[Main Folder: 
Folder: MODULES
Folder: MOVIE
Folder: SOUND
Folder: VPACK
Folder: VPACKJ
File: RPK.BIN
File: SLUS_214.45
File: SYSTEM.CNF
]

[MODULES:
File: IOPRP300.IMG
]

[MOVIES:
Folder: BLST
Folder: CS
Folder: CSL
Folder: ED
Folder: EFF
Folder: EVENT
Folder: MBG
Folder: OP
Folder: STEREO
File: AT_OP0D.SFD
File: AT_OP01.SFD
File: AT_OP02.SFD
File: OP0A.SFD
File: OP0B.SFD
]

[BLST:
File: BLST.SFD
]

[CS:
File: MSV1.SFD
File: MSV2.SFD
File: MSV3.SFD
File: MSV4.SFD
File: MSV5.SFD
File: MSV6.SFD
File: MSV7.SFD
File: MSV8.SFD
File: MSV9.SFD
File: OSV1.SFD
File: OSV2.SFD
File: OSV3.SFD
File: OSV4.SFD
File: OSV5.SFD
File: OSV6.SFD
File: OSV7.SFD
File: OSV8.SFD
File: OSV9.SFD
]

[CSL:
File: MLV1.SFD
File: MLV2.SFD
File: MLV3.SFD
File: MLV4.SFD
File: MLV5.SFD
File: MLV6.SFD
File: MLV7.SFD
File: MLV8.SFD
File: MLV9.SFD
File: MLVE.SFD
File: MLVM.SFD
File: OLV1.SFD
File: OLV2.SFD
File: OLV3.SFD
File: OLV4.SFD
File: OLV5.SFD
File: OLV6.SFD
File: OLV7.SFD
File: OLV8.SFD
File: OLV9.SFD
File: OLVE.SFD
]

[ED:
File: ENDING20.SFD
File: ENDING31.SFD
File: ENDING34.SFD
]

[EFF:
File: EFF02.SFD
File: EFF02LOP.SFD
File: EFF03.SFD
File: EFF06.SFD
File: EFF06LOP.SFD
File: EFF16.SFD
File: EFF17.SFD
File: EFF22.SFD
File: EFF_HORN.SFD
File: EFF_TOU.SFD
File: HANA_LV4.SFD
File: MIKO_R1.SFD
File: MIKO_R1.SFD
File: NAMI30.SFD
File: NAMI160.SFD
File: OYAJI_4.SFD
File: THUNDER0.SFD
File: THUNDER1.SFD
]

[EVENT:
File: ELIE_LOP.SFD
File: ELIE_STR.SFD
File: EV000_1.SFD
File: EYE1.SFD
File: EYE2.SFD
File: H_INIT.SFD
File: H_PRESEN.SFD
File: I_INIT.SFD
File: K_INIT.SFD
File: M010_157.SFD
File: M031_XXX.SFD
File: M032_440.SFD
File: MBG_CSCS.SFD
File: N_INIT.SFD
File: OCS7_100.SFD
File: P_INIT.SFD
File: SYU_ED.SFD
File: SYU_OP.SFD
File: SYU_OP2.SFD
]

[MBG:
File: BLUE.SFD
File: BLUE3D.SFD
File: BLUE3D_R.SFD
File: CENTER.SFD
File: MOV.SFD
File: RED.SFD
File: RED3D.SFD
File: RED3D_R.SFD
]

[OP:
File: AVAN_AT.SFD
File: M000_010.SFD
File: OP_ROLL1.SFD
File: OP_ROLL2.SFD
File: OP_ROLL3.SFD
File: OP_ROLL4.SFD
File: OP_ROLL5.SFD
File: OP_ROLL6.SFD
File: OP_ROLL7.SFD
]

[STEREO:
(No Files)
]

[SOUND:
Folder: SSE
Folder: STREAM
]

[SSE:
File: SSE.AFS
]

[STREAM:
File: STREAM.AFS
]

[VPACK:
File: V0000.AFS
File: V1000.AFS
File: V2000.AFS
File: V3000.AFS
File: V4000.AFS
File: V5000.AFS
File: V6000.AFS
File: V7000.AFS
File: V8000.AFS
File: V9000.AFS
]

[VPACKJ:
File: V0000.AFS
File: V1000.AFS
File: V2000.AFS
File: V3000.AFS
File: V4000.AFS
File: V5000.AFS
File: V6000.AFS
File: V7000.AFS
File: V8000.AFS
File: V9000.AFS
]

Thats everything, I know which files contain audio and video, but when it comes to picture graphics, I'm at a total loss.
I hope someone might be able to provide some insight on the matter.
I'm very sorry if this is to much trouble.
## Post #2
- Username: Squash Monster
- Rank: ultra-n00b
- Number of posts: 1
- Joined date: Thu May 15, 2008 3:56 am
- Post datetime: 2008-05-19T20:47:09+00:00
- Post Title: Ar tonelico, Atelier Iris - 1, 2 & 3 graphics extraction?

I'm trying to extract the graphics from Mana Khemia, another game from the same company.  The files are pretty much the same as the ones you listed.

Looking through the files I've figured out that the graphics are most likely in RPK.bin.  However, I have no idea what the format is, since up until now I've done SNES hacking.

Anybody got any ideas?
## Post #3
- Username: wizzardx
- Rank: n00b
- Number of posts: 15
- Joined date: Sun Jun 14, 2009 8:34 pm
- Post datetime: 2009-06-15T07:57:54+00:00
- Post Title: Ar tonelico, Atelier Iris - 1, 2 & 3 graphics extraction?

I found this topic by chance while doing a random Google search, so I signed up to answer this question.

If you're still interested, there are ways of extracting data from GUSTs PS2 games (Atelier Iris, Ar tonelico, Mana Khemia, etc).

Specifically for Ar tonelico 2, you can try the tools listed here:

[http://at2.limitedwish.railsplayground.net/](http://at2.limitedwish.railsplayground.net/)

Some of those tools work for the other GUST games (AFS explorer, cube player, etc).

If you want the images from the other games, you can use a Japanese tool called Lilie (also listed on the same page) to get the images, although it's pretty hard to find.

There is also a topic on another forum (Ar tonelico fan site) you may be interested in, [here](http://artonelico.isisview.org/viewtopic.php?f=15&t=238).

Various hackers have managed to reverse-engineered those formats, so it might be interesting to add support for them to MultiEx Commander. I'm a coder myself, but my game file reverse engineering abilities = FAIL. I just found this forum's wiki the other day... looks very informative... need to study it more.
## Post #4
- Username: Darkfox
- Rank: VVIP member
- Number of posts: 688
- Joined date: Sat Jul 05, 2003 1:11 am
- Post datetime: 2009-06-20T23:27:13+00:00
- Post Title: Ar tonelico, Atelier Iris - 1, 2 & 3 graphics extraction?

Oh! This is highly related to my topics! Have they managed to reverse engineer the compression used on the images? I'd be very grateful if you found this. Or does this rare tool do just that? I'm very interested!

There is an UNLZR utility! I am going to test this right away!
## Post #5
- Username: wizzardx
- Rank: n00b
- Number of posts: 15
- Joined date: Sun Jun 14, 2009 8:34 pm
- Post datetime: 2009-06-21T07:48:36+00:00
- Post Title: Ar tonelico, Atelier Iris - 1, 2 & 3 graphics extraction?

There are 2 types of compression, per se on the game images:

1. lzr
2. Weird ps2 graphics-specific format (tim, and tim2).

The Lilie tool can crack them both and export to BMP (you just tell it to extract all images from RPK.BIN), but if you want to do it manually (at least for Ar tonelico 2, other games will take some more work, since the custom tools on the wiki were designed for At2's file layout):

1. Use the custom tools to extract the lzr-compressed images:

exar2rpk_en.exe SLUS_217.88 rpk.bin
fp_Unpack_EN.exe SLUS_217.88 -dumptbl

The above will get you a huge directory structure, with lots of unpacked files from the game.

2. Remove all the files that aren't *.tim.lzr or *.tm2.lzr

3. Run unlzr.exe on each of the  remaining files, to decompress them

(I usually generate a batch file to do this for all the images):

eg, for each of the files:

unlzr.exe file.tim.lzr file.tim

4. Convert the *.tim and *.tm2 files to png:

4.1 Acquire a copy of OPTRIX iMageStudio 3
4.2 Macro -> Macro Processing...
4.3 Choose function "Format conversion"
4.4 Input folder: <Directory that you extracted the tim & tm2 files to>
4.5  Check "Process files in sub folders"
4.6 Output folder: <Some output edirectory>
4.7 Output file type: PNG File (*.png)
4.8 Click OK

This will convert all the tim and tm2 files to PNG.

Warning though, some of the PNG files will look kind of weird with the above. eg, the portraits will be saved in a highly compressed PNG format, which many image viewers have issues with (you can correct by converting from png to png with eg, ImageMagic command-line tools). And even after that, many pics will still have weird alpha (you can generally fix manually, by opening the pics in gimp, then copying into the clipboard, and pasting multiple times onto itself).

However, you can ignore the above instructions most of the time, and just run Lilie. It's faaar simpler, and works on other GUST games besides At2 (you'll need to hack the extractor programs to work on other titles, probably). The above is mainly if:

1. You later want to hack the images back into the game (that's what the At2 retranslation project is going to do)
2. There are quality problems with some of the files extracted by Lilie (it seems to convert images to 8bb, leaving some dirty bits on pics originally in higher bpp, ie, some of the portraits).

I hope that info is useful ^^.

PS: Could you point me at your related topics? I'm interested in this specific subject, since I work a lot with GUSTs image data these days.
## Post #6
- Username: Darkfox
- Rank: VVIP member
- Number of posts: 688
- Joined date: Sat Jul 05, 2003 1:11 am
- Post datetime: 2009-06-21T09:05:36+00:00
- Post Title: Ar tonelico, Atelier Iris - 1, 2 & 3 graphics extraction?

[viewtopic.php?f=18&t=3151](http://forum.xentax.com/viewtopic.php?f=18&t=3151)

This resulted from, however, dumping the VRAM. The unpacker for RPK does not work for Atelier Iris, but I can manually extract the LZR'd TIM2 files and UNLZR them. This has proven to be very successful.
## Post #7
- Username: wizzardx
- Rank: n00b
- Number of posts: 15
- Joined date: Sun Jun 14, 2009 8:34 pm
- Post datetime: 2009-06-21T11:42:20+00:00
- Post Title: Ar tonelico, Atelier Iris - 1, 2 & 3 graphics extraction?

I'm very interested in learning how to dump VRAM, and manually extracting the LZR files. Also, what kind of tools you use to work with TIM2

(this post is a dupe, since I asked the same thing in your other topic ^^).
## Post #8
- Username: Darkfox
- Rank: VVIP member
- Number of posts: 688
- Joined date: Sat Jul 05, 2003 1:11 am
- Post datetime: 2009-07-20T06:01:41+00:00
- Post Title: Ar tonelico, Atelier Iris - 1, 2 & 3 graphics extraction?

I use a variety, but mostly TIMTool. I manually extract with UltraEdit.

Also, what kind of editing would have to take place for the exar2rpk file to work on other titles? Does it have to do with the index within the SLUS file? If so, perhaps I should ask a few of the coders here.

Edit: Actually, I might be able to edit the source files myself and release a series of extraction programs for each GUST game, it is only the RPK.bin extractor that is the problem. I'll just have to edit these lines:

static const unsigned long OFFSET_TABLE_OFFSET = 2591376;
static const unsigned long NAME_TABLE_OFFSET   = 7399024;

to fit the other games.

Edit: Oooh... contains a nasty!

#include "as-util.h"

Now this I don't think exists on the net.

NOPE!

Hacking the tools is impossible currently.
## Post #9
- Username: wizzardx
- Rank: n00b
- Number of posts: 15
- Joined date: Sun Jun 14, 2009 8:34 pm
- Post datetime: 2009-08-21T13:46:55+00:00
- Post Title: Ar tonelico, Atelier Iris - 1, 2 & 3 graphics extraction?

Saw this post a lot later ^^; 

I think a command line argument would be better than separate programs.

About your questions, you can find more info at those URLs I PM'd you a bit earlier:

[http://artonelico.isisview.org/viewtopi ... 722#p23620](http://artonelico.isisview.org/viewtopic.php?f=16&t=132&p=63722#p23620)
[http://artonelico.isisview.org/viewtopi ... 722#p24330](http://artonelico.isisview.org/viewtopic.php?f=16&t=132&p=63722#p24330)

And you seem to have found the Ruby version of the tool by yourself 

So you can actually use TimTool? iirc, it is next to unusable for me and various others and documentation is nonexistant :-/... perhaps you could write a basic guide sometime for how to use it  

So... how do you dump the emulator's VRAM? I didn't notice an option like that in PCSX2...
## Post #10
- Username: Okogawa
- Rank: ultra-n00b
- Number of posts: 8
- Joined date: Sun Nov 15, 2009 7:16 am
- Post datetime: 2010-02-12T12:57:09+00:00
- Post Title: Ar tonelico, Atelier Iris - 1, 2 & 3 graphics extraction?

Hello, I don't know where to begin or end on this one, but suffice to say I have a minor brain overload with the instructions on Ar Tonelico extraction and wonder if anyone of you kind souls could extract/convert all graphical data (sprites, tile-sprites, faces, et cetera) from Ar Tonelico 1 and 2 and upload them as compressed ~150mb files to MediaFire? (as png if possible)

The graphics are to be used by me in a game project and to be heavily modified. The Ar Tonelico tiles and character sprites will serve as a solid base for my own graphical modifications. Rather than re-inventing the wheel I cannot find a better source than Ar Tonelico graphics to work with.

The GFX will be so heavily modified and size-changed so it won't be identifiable as "ripped" from Ar Tonelico...


Regarding credits:

Naturally I cannot credit you as the "provider" of Ar Tonelico gfx which I modified (*if* I get access to the gfx - think of the legal ramifications), but I would gladly put you in the credits (accessible from the main menu and at the end of the game) as external resources coder or something flashy you might want to be referenced as. Alias or full name, it's your call.
## Post #11
- Username: wizzardx
- Rank: n00b
- Number of posts: 15
- Joined date: Sun Jun 14, 2009 8:34 pm
- Post datetime: 2010-02-13T14:49:24+00:00
- Post Title: Ar tonelico, Atelier Iris - 1, 2 & 3 graphics extraction?

I've sent you some details over PM.
Don't worry about provider/etc, since it's simple to rip data from Gust's PS2 games using the (admittedly hard to find) lilie tool. You can find out more on [this thread](http://artonelico.isisview.org/viewtopic.php?f=15&t=238&start=0).
## Post #12
- Username: stephanehl
- Rank: beginner
- Number of posts: 23
- Joined date: Sat Dec 20, 2008 2:25 am
- Post datetime: 2010-03-13T19:25:22+00:00
- Post Title: Ar tonelico, Atelier Iris - 1, 2 & 3 graphics extraction?

Please i want to know how to extract all files from RPK.bin from all gust games such as atelier iris , ar tonelico and mana khemia series?

Please any help.
## Post #13
- Username: wizzardx
- Rank: n00b
- Number of posts: 15
- Joined date: Sun Jun 14, 2009 8:34 pm
- Post datetime: 2010-03-14T13:29:51+00:00
- Post Title: Ar tonelico, Atelier Iris - 1, 2 & 3 graphics extraction?

You can find a list of the tools for ripping etc, on the wiki I linked to earlier in the topic:

[http://at2.limitedwish.railsplayground. ... Main/Tools](http://at2.limitedwish.railsplayground.net/pmwiki.php/Main/Tools)

Although as mentioned before, the hardest tool to find is lilie, for easily ripping the images. I sent you a bit more information about that over PM.
## Post #14
- Username: Blyss
- Rank: n00b
- Number of posts: 17
- Joined date: Fri May 07, 2010 8:18 am
- Post datetime: 2010-08-03T02:06:23+00:00
- Post Title: Ar tonelico, Atelier Iris - 1, 2 & 3 graphics extraction?

Found this while doing a search, I was working on this shortly after Ar tonelico 2 came out and I still have every single character portrait from the game saved to my Desktop PC. I used the exar2fpk, unlzr and the like and to view, and to convert the TIM2 I used a program called Susie which you can find:
[http://www.digitalpad.co.jp/~takechin/](http://www.digitalpad.co.jp/~takechin/)

It's complicated to use, entirely in Japanese using a button style interface, and also the program itself does not include the plugin to read TIM2. I forget where I got that plugin but I know it was free to use and have it if anyone wants it. Also don't ask me how to use the application, its been more than a year and I've forgotten lol.

Lastly, XNVIEW [http://www.xnview.com/](http://www.xnview.com/) can open TIM2 as I recall, but the output was not very good when I tried it a year ago.

Just thought I would add this, since Ar tonelico series is one of my favorites. I like Mana Khemia a lot too and have been considering ripping some images out of that, I was unaware it used the same format.

Lastly, since I really do like Ar tonelico a lot, I have been considering adding TIM/TIM2 support to my TMX Explorer application [viewtopic.php?f=32&t=4830](http://forum.xentax.com/viewtopic.php?f=32&t=4830) except I'm not really good at reversing file formats. If anyone can provide some insight into the format I might consider doing that.

~Blyss
## Post #15
- Username: wizzardx
- Rank: n00b
- Number of posts: 15
- Joined date: Sun Jun 14, 2009 8:34 pm
- Post datetime: 2010-12-22T11:03:42+00:00
- Post Title: Ar tonelico, Atelier Iris - 1, 2 & 3 graphics extraction?

I made a recent discovery: Gust's PS3 titles (Ar tonelico 3, Atelier Rorona and Totori) seem to have their files in a very simple to access format.

eg: In Ar tonelico 3, all the portraits are under this directory, in the game files:

PS3_GAME/USRDIR/Res/at3_buc

And all the CGs, items, and other 2D images are in their own folders on the disk.

They're all in DDS format, for which a number of tools exist, for instance:

[http://cs.elderscrolls.com/constwiki/in ... /DDS_Tools](http://cs.elderscrolls.com/constwiki/index.php/DDS_Tools)

Personally I've used Gimp and the Gimp-DDS plugin to access individual images, while ImageMagick has builtin support for the DDS format, for easy mass conversion to PNG

I also see a similar format in the other GUST PS3 titles that I've checked so far.

The other graphics (CGs, items, etc) are also in DDS format on the disk.

Overall, It looks like Gust has started using some better-known formats for their PS3 titles (eg: .gz for compressed files, .png for some images, and .dds for the other images), which makes accessing their game data a lot easier.
