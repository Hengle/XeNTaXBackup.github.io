## Post #1
- Username: Vindis
- Rank: advanced
- Number of posts: 44
- Joined date: Sat Apr 09, 2011 4:31 am
- Post datetime: 2012-10-02T07:35:42+00:00
- Post Title: Star Wars The Old Republic gr2 Noesis plugin alpha release

Hi folks, 

My gr2 plugin for swtor seems to work, so i decided to release it's alpha version.

Things you should know:

-it's far from perfect
-only available to display meshes, no bones, no animation
-still got some issues with some dynamic mesh (those meshes have like 15 texture usage in hex o.O)
-the plugin search for textures in the same folder as the model in it, if there's missing texture the model will be white
-it displays mesh and collision mesh too, so if it looks weird try to turn off collision mesh in the data viewer
-it does the job (view meshes) so no further updates from me probably (thanks to the fact i sweat blood to make this basic thing work)
-feel free to update it or optimize as you wish (if you can understand my code ) but at least please upload here it'll great help for me, or if you use it to other projects, like torhead please give me a small credit (i don't mean money, but, ehh english :/ )
(-i knew sith about python and noesis programming, so i learned it while i code, that's why it looks messy)

That's all i can remember early in the morning 
Cheers

Ps.: And the Copyright blah-blah. Using the plugin to gain income is prohibited, all Star Wars character, assets and everything belongs to Lucasart, Bioware, EA, using them without permission is prohibited, etc (i'm not a lawyer )
[Swtor.zip](https://xentaxbackup.github.io/file/5869_Swtor.zip)
## Post #2
- Username: Vindis
- Rank: advanced
- Number of posts: 44
- Joined date: Sat Apr 09, 2011 4:31 am
- Post datetime: 2012-10-02T07:38:29+00:00
- Post Title: Star Wars The Old Republic gr2 Noesis plugin alpha release

oops, wrong section, should an admin move it to the correct topic.

Sorry my bad
## Post #3
- Username: Privateer
- Rank: veteran
- Number of posts: 104
- Joined date: Fri Oct 21, 2011 8:33 pm
- Post datetime: 2012-10-02T20:49:43+00:00
- Post Title: Star Wars The Old Republic gr2 Noesis plugin alpha release

I'll take a look at your work Mate.

I don't think I'll be able to assist in fixing things however.
NDA agreements and such.

Who'd have imagined?
## Post #4
- Username: dragbody
- Rank: veteran
- Number of posts: 126
- Joined date: Tue Sep 20, 2011 11:33 am
- Post datetime: 2012-10-03T01:15:48+00:00
- Post Title: Star Wars The Old Republic gr2 Noesis plugin alpha release

I found this game for sale at Gamestop for $14.99. Before I spend the money on it, can I ask about the quality of the models and textures? So many star wars games have low poly models with low res textures.
## Post #5
- Username: Vindis
- Rank: advanced
- Number of posts: 44
- Joined date: Sat Apr 09, 2011 4:31 am
- Post datetime: 2012-10-03T08:21:48+00:00
- Post Title: Star Wars The Old Republic gr2 Noesis plugin alpha release

> Reply from dragbody
>
> I found this game for sale at Gamestop for $14.99. Before I spend the money on it, can I ask about the quality of the models and textures? So many star wars games have low poly models with low res textures.

I don't say i understand why you ask it... If you want to buy it only for the models, then i say, you can download a trial for free, and look those models. If you want to play it, maybe you should wait until game goes f2p.

About the models, well this is an mmo, which means not too high polygon count, most detail are in the color/normal map.
(swtor uses the "green" normal map, so you can't import straigth to 3d application, you have to edit the channels, to represent correct height/light. You can google it ho to do it)
## Post #6
- Username: JakeGreen
- Rank: mega-veteran
- Number of posts: 164
- Joined date: Mon Aug 23, 2010 5:14 am
- Post datetime: 2012-10-08T07:04:59+00:00
- Post Title: Star Wars The Old Republic gr2 Noesis plugin alpha release

awesome job, but is there an updated tool to open the .tor files to even get the models i tried easymyp v3.2 on the .tor files but it just gives me an error
## Post #7
- Username: Vindis
- Rank: advanced
- Number of posts: 44
- Joined date: Sat Apr 09, 2011 4:31 am
- Post datetime: 2012-10-09T11:36:15+00:00
- Post Title: Star Wars The Old Republic gr2 Noesis plugin alpha release

Just google "tormyp" and hopefully you can download from the first result. I can't give you direct link, since i don't know whos job is it.
## Post #8
- Username: SWTOR fan
- Rank: veteran
- Number of posts: 112
- Joined date: Fri Nov 18, 2011 12:33 am
- Post datetime: 2012-10-10T14:33:17+00:00
- Post Title: Star Wars The Old Republic gr2 Noesis plugin alpha release

It's great to see that my specification has finally seen some use! Thank you for taking the time writing a plugin, Vindis. Just when I thought nobody cared about SWTOR anymore, you stepped in. I tested it on a few .gr2 files I had lying around and it worked perfectly. Great job! 

I did get a few error messages for armor models, like boot_dancer01_bfa_light_ge_a21_shin.lod.gr2 (Error on line 156, list index out of range) but I have not yet figured out myself to get textures for models like these, so don't worry about that too much.

> Reply from Privateer
>
> I'll take a look at your work Mate.

I don't think I'll be able to assist in fixing things however.
NDA agreements and such.

Who'd have imagined?Am I correct in thinking what I am thinking?  If yes, congrats on getting involved in that! (Or is it just for a datamining website?)

> Reply from JakeGreen
>
> awesome job, but is there an updated tool to open the .tor files to even get the models i tried easymyp v3.2 on the .tor files but it just gives me an errorI have not changed my program to extract .tor archives for ages and it still works, so I'm not sure what the error could be. Are you sure that you supplied a valid filename list to go along with it?
Not sure if I have time to take a look at EasyMYP since I am no longer using that program.
## Post #9
- Username: Gregthegen
- Rank: ultra-n00b
- Number of posts: 2
- Joined date: Fri Oct 12, 2012 5:26 am
- Post datetime: 2012-10-11T21:49:50+00:00
- Post Title: Star Wars The Old Republic gr2 Noesis plugin alpha release

Must say, the tool worked like a charm! Yes there are still a few errors on some of the models, but overall it is wonderful progress!
## Post #10
- Username: Privateer
- Rank: veteran
- Number of posts: 104
- Joined date: Fri Oct 21, 2011 8:33 pm
- Post datetime: 2012-10-12T21:02:24+00:00
- Post Title: Star Wars The Old Republic gr2 Noesis plugin alpha release

> Reply from SWTOR fan
>
> Am I correct in thinking what I am thinking?  If yes, congrats on getting involved in that! (Or is it just for a datamining website?)

Let's just say I have a contract with a new Game nearing an open Beta phase. Nothing to do with SWTOR.
The NDA could be a problem with reversing other formats and posting about them at this point in time due to what I'm working on.
## Post #11
- Username: jangoclone
- Rank: n00b
- Number of posts: 15
- Joined date: Wed Dec 08, 2010 8:52 am
- Post datetime: 2012-10-23T23:19:56+00:00
- Post Title: Star Wars The Old Republic gr2 Noesis plugin alpha release

Can anyone tell me where can I get EasyMYP 3.6? I have the 3.2 version and give me problems when I open the TOR files, it doesn't load the names of the HASH list, I hop someone can help me...
## Post #12
- Username: Vindis
- Rank: advanced
- Number of posts: 44
- Joined date: Sat Apr 09, 2011 4:31 am
- Post datetime: 2013-02-24T11:01:57+00:00
- Post Title: Star Wars The Old Republic gr2 Noesis plugin alpha release

Hi, 

i was here long time ago because i completely gave up swtor (oh my, what EA did with it  ), but it's good to see that some of you found a good use of my tool.

Plus i have a great debt, and it's for you Swtor_fan: i'm sorry, i forgot to credit you in the first place, and i want to take up now.

So most of the thanks goes to Swtor_fan, who took the biggest part from the job, with his specification. Thank You
## Post #13
- Username: Vindis
- Rank: advanced
- Number of posts: 44
- Joined date: Sat Apr 09, 2011 4:31 am
- Post datetime: 2013-02-26T14:27:19+00:00
- Post Title: Star Wars The Old Republic gr2 Noesis plugin alpha release

(I don't know if you read this thread Senor Casaroja  ) But I have a question for you. Is it possible to create dialogs in Noesis? I mean, if i don't want to write a standalone program to view the models, can i create pop-up window, where the user can select which material he/she want to load? Or can noesis open file on their own? I read the matfile name from the xml, open the mat file, and read the texture names from them.

I thought (i researched the file structure now and then, and starts to understand the whole thing now) i'll rewrite the whole code, parse the xml, read the mat and list the results it in a window. You just have to choose the mat and Noesis load it with the mesh (i still can't figure out where the "item names" are stored, maybe it's only server sided, and the client contains only IDs).
## Post #14
- Username: Vindis
- Rank: advanced
- Number of posts: 44
- Joined date: Sat Apr 09, 2011 4:31 am
- Post datetime: 2013-02-27T18:41:54+00:00
- Post Title: Star Wars The Old Republic gr2 Noesis plugin alpha release

I updated the plugin, nothing fancy, more like a "make it comfortable" changes.

The plugin now just simply skip the 12byte vertex section, this way the collision mesh didn't load, so you don't have to turn off every time in the data viewer. The other update just simly turn off the default material blending (some mesh looked transparent, and this was the solution)

There's still minor issues with the dynamic meshes, but that thing should require a standalone model viewer, which can parse the xml, and the mat files...   


Ps.: yes, yes i resubbed to the game, and want to up-to-date with the changes (new armors, vehicles)  
[Swtor.zip](https://xentaxbackup.github.io/file/6227_Swtor.zip)
## Post #15
- Username: Acewell
- Rank: VIP member
- Number of posts: 1330
- Joined date: Wed Nov 05, 2008 7:16 pm
- Post datetime: 2013-05-15T11:31:08+00:00
- Post Title: Star Wars The Old Republic gr2 Noesis plugin alpha release

> Reply from SWTOR fan
>
> I did get a few error messages for armor models ... (Error on line 156, list index out of range ...
Most of the armor items will throw that error and will not load, but if you comment out line 156 you can bypass the error and view geometry and UVs.



jace.PNG (72.07 KiB) Viewed 1467 times
## Post #16
- Username: The Chief
- Rank: veteran
- Number of posts: 101
- Joined date: Fri Oct 09, 2009 10:44 am
- Post datetime: 2013-05-18T18:00:16+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

Ok guys this will sound odd but ¿Did any one know on wich .tor file are the models from Satele Shan and Darth Malgus? or they are also 
separated on pieces ?

Many of the models are separated on tor files but iam curius if those models are in a single piece.
## Post #17
- Username: MrAdults
- Rank: Moderator
- Number of posts: 1007
- Joined date: Mon Mar 23, 2009 9:57 am
- Post datetime: 2013-05-18T20:52:00+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

> Reply from Vindis
>
> (I don't know if you read this thread Senor Casaroja  ) But I have a question for you. Is it possible to create dialogs in Noesis? I mean, if i don't want to write a standalone program to view the models, can i create pop-up window, where the user can select which material he/she want to load? Or can noesis open file on their own? I read the matfile name from the xml, open the mat file, and read the texture names from them.

I thought (i researched the file structure now and then, and starts to understand the whole thing now) i'll rewrite the whole code, parse the xml, read the mat and list the results it in a window. You just have to choose the mat and Noesis load it with the mesh (i still can't figure out where the "item names" are stored, maybe it's only server sided, and the client contains only IDs).
I guess I missed that. Yes, you can do user prompts, which allow you to prompt for a variety of inputs, as well as file and folder paths. There's lots of examples of those in the tools scripts on the Noesis plugins/scripts Google code repo.

BeautifulSoup is also included in Noesis now, if you prefer that for XML parsing.
## Post #18
- Username: Acewell
- Rank: VIP member
- Number of posts: 1330
- Joined date: Wed Nov 05, 2008 7:16 pm
- Post datetime: 2013-05-18T23:08:01+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

> Reply from The Chief
>
> Did any one know on wich .tor file are the models from Satele Shan and Darth Malgus?

swtor_main_art_creature_a_1.tor

Darth Malgus model
resources\art\dynamic\creature\model\bms_malgus_a01.gr2(hood down) OR bms_malgus_a02.gr2(hood up)

Satele Shan model
resources\art\dynamic\creature\model\bfn_satele_a01.gr2

textures for both characters
resources\art\dynamic\npc\unique_characters\texture\___psd
## Post #19
- Username: The Chief
- Rank: veteran
- Number of posts: 101
- Joined date: Fri Oct 09, 2009 10:44 am
- Post datetime: 2013-05-19T03:45:39+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

Men really thank you for point me out the location of those models really.  

By the way iam wonder ¿There will be in the future support for the bones and animations?
## Post #20
- Username: luke9511
- Rank: beginner
- Number of posts: 29
- Joined date: Sun Jul 01, 2012 6:48 am
- Post datetime: 2013-05-31T16:01:46+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

where can i download the program that can open the .tor files to extract the models? and thank you very much for the plugin!

EDIT never mind anyone else wondering you can find it here  [viewtopic.php?f=10&t=7186&start=180](http://forum.xentax.com/viewtopic.php?f=10&t=7186&start=180) on the last page
## Post #21
- Username: luke9511
- Rank: beginner
- Number of posts: 29
- Joined date: Sun Jul 01, 2012 6:48 am
- Post datetime: 2013-06-20T12:33:39+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

the noesis plugin works great, however i noticed when exporting a model if it has multiple meshes, it will say there are meshes with duplicate names and seems to mess up the texture coordinates, but other than that it works great
## Post #22
- Username: luke9511
- Rank: beginner
- Number of posts: 29
- Joined date: Sun Jul 01, 2012 6:48 am
- Post datetime: 2013-08-17T23:06:48+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

any updates?
## Post #23
- Username: swtor miner
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Sep 10, 2013 7:05 am
- Post datetime: 2013-09-11T08:48:55+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

Small update, originally posted to the Tor archive thread, reposted here. You can find my other updates here: [viewtopic.php?f=10&t=7186&p=88029#p88029](http://forum.xentax.com/viewtopic.php?f=10&t=7186&p=88029#p88029)

And, I know you guys will like this. Here's an updated version of Vindis's Noesis Plugin that now loads multiple meshes into one model: [http://www.sendspace.com/file/u4ms5z](http://www.sendspace.com/file/u4ms5z) - * fixed // instead of # *
1. Put it in the Noesis/plugins/python directory, and it will allow you to view .gr2 files.
2. Now put all the .gr2 files you want to view, and their associated textures (just the files ending in _d.dds) into a folder.
3. Create a file in that directory called model_list.txt, and put all but one of the names of those .gr2 files in that file. (Just the file name, one per line, no /'s)
4. Load up the one .gr2 you left off the list, and it will reassemble it for you.

I've left in/fixed support for the Specular Maps(_s.dds) and Normal Maps(_n.dds), and you can set Noesis to load these by enabling the loading non-diffuse textures in the Data Viewer. Unfortunately the Normal Maps seem to require tweaked lighting data to function properly, and loading of that data is not implemented yet.
## Post #24
- Username: vertalius
- Rank: n00b
- Number of posts: 12
- Joined date: Wed Mar 05, 2014 3:08 am
- Post datetime: 2014-03-18T13:12:36+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

Hi there!

Is anyone know, why i'm getting an error, when i try to open some swtor .gr2 models with Noesis:

> Traceback (most recent call last):
>
>   File "d:\noesis\plugins\python\Swtor_debug.py", line 342,
>
> in noeplyLoadModel
>
>    rapi.rpgSetMaterial(matName[offsetMaterialUsageTexture[j][2]])
>
> IndexError: list index out of range

If i comment this line with "#", Noesis loads model, but without mats/textures, but that's not a solution...

BTW, I know nothing about programming...
## Post #25
- Username: dynath
- Rank: ultra-n00b
- Number of posts: 2
- Joined date: Sat Sep 17, 2011 12:53 pm
- Post datetime: 2014-05-01T05:02:41+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

Any idea what causes this error?

```
mdl=rapi.rpgConstructModel() Runtime Error: failed to construct model from rpgeo context
```

It seems to happen with a decent handful of models for me at least.
## Post #26
- Username: swtor miner
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Sep 10, 2013 7:05 am
- Post datetime: 2014-05-21T23:46:02+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

Attached is an updated Noesis GR2 plugin.

It'll now attempt to load textures from the material files directly, rather than searching for them in nearby folders. This means you'll likely have to extract all the swtor_main_art*.tor archives to a folder to ensure that the materials/textures are available for loading. And change the swtor-config.xml file to point to where the "resources" folder is.

To use it:

Extract the zip file to your "Noesis/plugins/python" directory
Extract the art asset tor archives to a folder
Edit the swtor-config.xml in your "Noesis/plugins/python" directory to point to where you extracted the art assets.

Update Notes:

Materials are parsed and textures loaded from them.
Two-sided models now work.
Opacity textures now work, and the alpha test value/type is parsed from the material file.
Known Issues:

Reflections/Gloss textures don't work properly, and are turned off.
Opacity doesn't work with materials that have rotation maps that are a different size from their diffuse maps. There is no way to properly combine them currently.
The old texture search functionality has been removed. You will need the proper materials and textures in the proper location for the model you are viewing.
The vast majority of dynamic models will not be textured properly. Many rely on having their default material overridden by the game engine to display properly. I added a function to attempt to guess the material names from the model name. This allowed some of the dynamic models to load.
Most dynamic creature model's eyes are broken. This bug is linked to my hack to get some of the dynamic models to load properly by guessing their material names.
Skeletal models will throw an error.
Models with different sized diffuse and rotation maps may have opacity problems.
Animated Textures do not work.
Model Attachments are parsed, but not loaded.
Bones/Animations are not loaded.
Probably a few more that have slipped my mind right now.
[swtor.zip](https://xentaxbackup.github.io/file/7362_swtor.zip)
## Post #27
- Username: MrAdults
- Rank: Moderator
- Number of posts: 1007
- Joined date: Mon Mar 23, 2009 9:57 am
- Post datetime: 2014-05-23T00:51:25+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

I don't actually have any SWTOR data to test it, but it sounds like you're making a respectable effort here. You might be interested to know that you can add a "rapi.setPreviewOption("autoLoadNonDiffuse", "1")" call to your script (it will only affect the rapi instance the model is being applied to) instead of relying on the user to set the option in the data viewer.

If there's anything else you find yourself needing that Noesis doesn't seem to offer, feel free to let me know. Always happy to help people who are actually trying to accomplish things within the framework.

Edit: Oh, and you may have luck with lighting by unifying binormals, but since I haven't seen what's going on I can only speculate about what the problem is. There's example usage of the unify binormals functionality in the Gamebryo NIF script.
## Post #28
- Username: swtor miner
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Sep 10, 2013 7:05 am
- Post datetime: 2014-05-23T05:25:48+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

> Reply from MrAdults
>
> I don't actually have any SWTOR data to test it, but it sounds like you're making a respectable effort here. You might be interested to know that you can add a "rapi.setPreviewOption("autoLoadNonDiffuse", "1")" call to your script (it will only affect the rapi instance the model is being applied to) instead of relying on the user to set the option in the data viewer.

Added that. Thanks!

My problem with reflections/specular is a little complicated, and I'm not sure how to proceed. A good starting reference is SWTOR fan's [post here.](http://forum.xentax.com/viewtopic.php?p=88047#p88047) I'm not sure I implemented his normals/tangents properly.

There's only two things I'd like to add to it. First, is that the alpha channel of the DiffuseMap is a reflection map. But, only if the .mat file has reflections enabled, otherwise it's completely opaque and should be ignored. Second, all 3 textures can be different sizes on the same model (e.g. 1024x1024 diffuse, 512x512 rotation, 256x256 gloss). Which causes it's own issues into how to combine them.

Here's what a speeder model looks like in Noesis with Specular turned on, reflections are not implemented. (whoops had the wrong one at first)


And the same model in-game with reflections. (Note: the lighting is intensely orange in this area.)


edit: Nevermind, figured it out myself:

I just created a next pass material that uses the DiffuseMap with it's alpha channel enabled the diffuse texture, kept the normal/specular maps, and added an environment map I threw together. Essentially texturing the reflections over top the non-reflective material.
## Post #29
- Username: MrAdults
- Rank: Moderator
- Number of posts: 1007
- Joined date: Mon Mar 23, 2009 9:57 am
- Post datetime: 2014-05-23T13:18:14+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

That's not a bad approach. I think it has to be additive instead of alpha blended to give you the results you want, though. I can just add a 2D env map mask in Noesis if that's what you need, more über shader permutations is always fun. It sounds like then you'd just want to duplicate that diffuse alpha into the RGB for a new texture and use as both the spec texture and env mask texture.

Unless all you need to do already is just dup that alpha into a spec mask. Do they do real env map reflections? In that screenshot it really just looks like specular. You should give the diffuse alpha to spec texture RGB thing a shot, then you also don't need a nextpass.
## Post #30
- Username: swtor miner
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Sep 10, 2013 7:05 am
- Post datetime: 2014-05-23T13:42:57+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

They definitely have both a specular mask, for specular highlights, and a reflection mask for reflection intensity (with a flag to turn it on/off). Then they load an environment cubemap to determine what's reflected. In addition to these textures I have values for: Reflection Intensity, Reflection Blur Intensity, Reflection Spec Influence, and Reflection Contrast.

Also I've been wondering how Opacity Textures work in Noesis. Do, I fill the RGB values with the alpha, and use that as the opacity texture? I've tried that and it didn't work. The only success I've had with applying opacity is copying the opacity map to the alpha channel of the diffuse texture. This isn't always very feasible though, as sometimes the opacity texture is a different size than the diffuse one. Also, running loops over the pixel data in python can be very slow.
## Post #31
- Username: MrAdults
- Rank: Moderator
- Number of posts: 1007
- Joined date: Mon Mar 23, 2009 9:57 am
- Post datetime: 2014-05-24T00:51:38+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

Yeah, you have to put the opacity in the diffuse alpha. You can do it pretty quickly by using rapi.imageResample to resize to the target dimensions, then you just have to copy the channel. You may find that for that purpose using rapi.imageKernelProcess with a Python kernel that simply does the copy into the alpha channel is significantly faster than looping through pixels in Python.

It's long been on the Noesis todo list to make a Noesis Shading Language that allows shaders to be written in a renderer/API-agnostic way and interpreted to the target platform (which would solve all of these pipeline limitations), but doing such a thing nicely and future-proofing it requires more effort than I've had lying around.
## Post #32
- Username: swtor miner
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Sep 10, 2013 7:05 am
- Post datetime: 2014-05-24T08:34:47+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

While I waited for your response on reflections I looked into how the Scrolling UVs were implemented. I discovered that when the meshname is "multiUvExtraction" it changes how you read the last twelve bytes of vertex data. Normally a 32-byte vertex, the last twelve bytes are formatted in the following way:

```
byte[3]: Three Bytes containing the (x,y,z) normal data
byte: always +1 or -1, unknown function
byte[3]: Three Bytes containing the (x,y,z) tangent data
byte: always +1 or -1, unknown function
float16: specifying the u coordinate for the texture
float16: specifying the v coordinate for the texture
```

What's different about a multiUvExtraction mesh is that there are 3 sets of UV coordinates for every vertex:

```
float16: specifying the u coordinate for the first texture
float16: specifying the v coordinate for the first texture
float16: specifying the u coordinate for the second texture
float16: specifying the v coordinate for the second texture
float16: specifying the u coordinate for the third texture
float16: specifying the v coordinate for the third texture
```

The first UV coordinate is for the diffuse texture, the second for animatedTexture1, and the third for animatedTexture2. I dug deeper, and I believe the 16-bit value before the vertexSize in the meshHeader appears to be a bit flag, but I haven't figured it all out yet. 

```
Bit 2 - Has normals/tangent values?
Bit 3 - ??? Only set on non-animated meshes without SUVs
Bit 4 - ??? Only set on SUV meshes

Bit 5 - ??? Only set on SUV meshes
Bit 6 - ??? Only set on SUV meshes
Bit 7 - ???Only set on non-animated meshes without SUVs
Bit 8 - ???

Bit 9 - Dynamic?
Bit 10 - ??? Set on Dynamic and SUV meshes
Bit 11 - ???
Bit 12 - ???

Bit 13 - Placeholder?
Bit 14 - Placeholder?
Bit 15 - Placeholder?
Bit 16 - Placeholder?

303 - Dynamic mesh, bone data, no scrolling UV - 32byte vertex
0000 0011 0000 0011
239 - Scrolling UV mesh no normals or tangents - 32byte vertex
0000 0010 0011 1001
47 - Static mesh w/UV, normals, and tangents no bones - 24byte vertex
0000 0000 0100 0111
1 - collision mesh - 12byte vertex
0000 0000 0000 0001

```

[Here's a low quality video of working Scrolling UVs.](https://vidd.me/zSl)
Right now I'm only displaying/animating two out of the three textures, as Noesis only allows 2 UV coordinates to be stored per vertex (regular and lightmap UVs). Can I get a third UV binding per mesh, and a flag to set a material to use it? I'm also having issues getting some of the SUVs to work as they rely on bloom to cover up their texture color it seems. Though the ones that do work, look gorgeous!



[Swtor.zip](https://xentaxbackup.github.io/file/7369_Swtor.zip)
## Post #33
- Username: MrAdults
- Rank: Moderator
- Number of posts: 1007
- Joined date: Mon Mar 23, 2009 9:57 am
- Post datetime: 2014-05-24T19:26:48+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

You can certainly bind the things as user streams, but Noesis won't actually do anything with them other than pass them through to the exporter in case it wants to do something with them. If/when Noesis gets its own shading language, user stream names will act as potential binding semantics so you can do whatever you want with them regarding vertex/pixel shader effects. Until then, all you get is fixed UV sets and crappy expression evaluators.
## Post #34
- Username: swtor miner
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Sep 10, 2013 7:05 am
- Post datetime: 2014-05-25T23:41:10+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

I confirmed that the second animated UV texture is a Scrolling UV Mask for the first two textures, and does use the third set of UV coordinates for the Vertex.

Changes:
Fixed Normals and Tangents (I think)
Scrolling UVs are 2/3rds working, only UV masking doesn't work.
SUV's 3rd set of UV coordinates passed through when exporting.
[Swtor.zip](https://xentaxbackup.github.io/file/7380_Swtor.zip)
## Post #35
- Username: TRDaz
- Rank: mega-veteran
- Number of posts: 215
- Joined date: Sun Sep 25, 2011 2:06 am
- Post datetime: 2014-10-19T10:02:38+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

Thanks for the plugin, very helpful, but I was trying to get the textures to load on the models in Noesis, but for some reason it won't. The file path in the xml is correct, ive tried different variants for the file path but still nothing. Any help? :/
## Post #36
- Username: swtor miner
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Sep 10, 2013 7:05 am
- Post datetime: 2014-10-19T13:23:09+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

> Reply from TRDaz
>
> Thanks for the plugin, very helpful, but I was trying to get the textures to load on the models in Noesis, but for some reason it won't. The file path in the xml is correct, ive tried different variants for the file path but still nothing. Any help? :/

There's not enough information in the extracted output from EasyMyp to properly reassemble all models. I put in a few hacks that allowed loading of a large portion of the models, but it's never going to work anywhere near 100%.

For this reason, I've also stopped updating this plugin. Work is ongoing on my new modelviewer, but it's not ready for release.
## Post #37
- Username: TRDaz
- Rank: mega-veteran
- Number of posts: 215
- Joined date: Sun Sep 25, 2011 2:06 am
- Post datetime: 2014-10-19T16:14:37+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

Ah ok I see, that's fine then  Thanks for replying.
## Post #38
- Username: CriticalError
- Rank: double-veteran
- Number of posts: 678
- Joined date: Sun Jul 05, 2009 9:03 am
- Post datetime: 2015-05-08T23:43:38+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

ummm very interesting, any chance to support Metin2 GR2 files? really would be awesome, many thanks buddy.
## Post #39
- Username: vertalius
- Rank: n00b
- Number of posts: 12
- Joined date: Wed Mar 05, 2014 3:08 am
- Post datetime: 2015-10-03T14:50:44+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

Hi there swtor miner!

Any news with your new modelviewer? Or is it dead? I'm waiting for it since you've announced it ))
## Post #40
- Username: byerotica
- Rank: ultra-n00b
- Number of posts: 2
- Joined date: Mon Sep 23, 2019 4:50 pm
- Post datetime: 2020-05-01T19:59:36+00:00
- Post Title: Re: Star Wars The Old Republic gr2 Noesis plugin alpha relea

thanks
