## Post #1
- Username: Protocol X27
- Rank: ultra-veteran
- Number of posts: 341
- Joined date: Thu Dec 15, 2011 12:46 am
- Post datetime: 2012-10-29T17:54:46+00:00
- Post Title: MechAssault 2: Lone Wolf / .mgf format

I've had an interest in extracting models from MechAssault 2 on the original Xbox.  I have next to zero skill in extraction at present, but want to learn so I can contribute more.  I also know this is likely obscure as far as interest goes, so I assume I'd be doing most of the leg work myself anyway.  If anyone is willing to help me gain a better understanding of the process it would be greatly appreciated.  

I have the files on a modded Xbox (presently having ftp issues), but from what I can tell most stuff is in the .mgf format.  I see files for cinema, levels, templates etc.  

Anyone have any suggestions or know of anything already available that will open .mgf container files? 

Thanks in Advance
## Post #2
- Username: zaykho
- Rank: mega-veteran
- Number of posts: 217
- Joined date: Fri Dec 03, 2010 8:20 pm
- Post datetime: 2012-10-29T22:04:16+00:00
- Post Title: MechAssault 2: Lone Wolf / .mgf format

I didn't worked yet on Mechassault 2, but I second your request too.

I love this game so much (Mad Cat and Nova Cat FTW !   ).
## Post #3
- Username: Protocol X27
- Rank: ultra-veteran
- Number of posts: 341
- Joined date: Thu Dec 15, 2011 12:46 am
- Post datetime: 2012-10-29T22:59:24+00:00
- Post Title: MechAssault 2: Lone Wolf / .mgf format

> Reply from zaykho
>
> I didn't worked yet on Mechassault 2, but I second your request too.

I love this game so much (Mad Cat and Nova Cat FTW !   ).

Yeah there's some great stuff in there.  I'm starting dig my way through some of the resources, it'll probably be slow, but hopefully educational.
## Post #4
- Username: zaykho
- Rank: mega-veteran
- Number of posts: 217
- Joined date: Fri Dec 03, 2010 8:20 pm
- Post datetime: 2012-10-29T23:35:47+00:00
- Post Title: MechAssault 2: Lone Wolf / .mgf format

Well upload some sample here, maybe someone will help us to convert this format.
## Post #5
- Username: Protocol X27
- Rank: ultra-veteran
- Number of posts: 341
- Joined date: Thu Dec 15, 2011 12:46 am
- Post datetime: 2012-10-30T13:13:28+00:00
- Post Title: MechAssault 2: Lone Wolf / .mgf format

> Reply from zaykho
>
> Well upload some sample here, maybe someone will help us to convert this format.

Good idea.  

I did get ftp working last night, so I have the files.  However, I don't want to get in trouble for posting code I shouldn't, so what would be the best way to go about sharing / 'cropping' an actual game file.  I know its an 8 year old game that is unlikely to resurface, but still just playin' it safe.  I have the '3dlobby.mgf' which 'hopefully' should be an easier place to start.
## Post #6
- Username: zaykho
- Rank: mega-veteran
- Number of posts: 217
- Joined date: Fri Dec 03, 2010 8:20 pm
- Post datetime: 2012-10-30T15:19:10+00:00
- Post Title: MechAssault 2: Lone Wolf / .mgf format

> Reply from Protocol X27
>
> zaykho wrote:Well upload some sample here, maybe someone will help us to convert this format.

Good idea.  

I did get ftp working last night, so I have the files.  However, I don't want to get in trouble for posting code I shouldn't, so what would be the best way to go about sharing / 'cropping' an actual game file.  I know its an 8 year old game that is unlikely to resurface, but still just playin' it safe.  I have the '3dlobby.mgf' which 'hopefully' should be an easier place to start.

Send me some sample files by PM, and then I will upload them here.
## Post #7
- Username: Protocol X27
- Rank: ultra-veteran
- Number of posts: 341
- Joined date: Thu Dec 15, 2011 12:46 am
- Post datetime: 2012-10-31T01:16:34+00:00
- Post Title: MechAssault 2: Lone Wolf / .mgf format

Roger that, PM away 

If there's something more optimal I should do let me know.  Hopefully I can get some more study work done soon.  So far I haven't gotten past opening it in the Hex Editor.  XD
## Post #8
- Username: finale00
- Rank: M-M-M-Monster veteran
- Number of posts: 2382
- Joined date: Sat Apr 09, 2011 8:22 am
- Post datetime: 2012-10-31T03:12:01+00:00
- Post Title: MechAssault 2: Lone Wolf / .mgf format

That is a pretty strange place to be stuck at.
## Post #9
- Username: Protocol X27
- Rank: ultra-veteran
- Number of posts: 341
- Joined date: Thu Dec 15, 2011 12:46 am
- Post datetime: 2012-10-31T12:43:48+00:00
- Post Title: MechAssault 2: Lone Wolf / .mgf format

> Reply from finale00
>
> That is a pretty strange place to be stuck at.

Strange because I should be doing something else, or because I have no idea what I'm doing?  XD   I'm all ears if I should be following another approach.
## Post #10
- Username: zaykho
- Rank: mega-veteran
- Number of posts: 217
- Joined date: Fri Dec 03, 2010 8:20 pm
- Post datetime: 2012-10-31T14:17:15+00:00
- Post Title: MechAssault 2: Lone Wolf / .mgf format

> Reply from Protocol X27
>
> Roger that, PM away 

If there's something more optimal I should do let me know.  Hopefully I can get some more study work done soon.  So far I haven't gotten past opening it in the Hex Editor.  XD

Thanks, here the sample for those who want to help us.

[http://www.mediafire.com/?yath6tyzr6fphzo](http://www.mediafire.com/?yath6tyzr6fphzo)

BTW @Protocol X27, we will need more samples for being able to compare the result.
## Post #11
- Username: Protocol X27
- Rank: ultra-veteran
- Number of posts: 341
- Joined date: Thu Dec 15, 2011 12:46 am
- Post datetime: 2012-10-31T22:42:37+00:00
- Post Title: MechAssault 2: Lone Wolf / .mgf format

> Reply from zaykho
>
> 
BTW @Protocol X27, we will need more samples for being able to compare the result.

Cool,

Here's a few more files, not anymore glaringly useful to me, but not saying much since I don't know jack.  XD

[http://www.mediafire.com/?9192x0s111qwoed](http://www.mediafire.com/?9192x0s111qwoed)

I included a cinema file, mission file, template, common and text.mgf.   The only one I could even see anything in was the text.mgf which looks like it includes the fonts and credits.  Might at least yield some utility as to structure.  

I don't know if any of this helps or not, I forgot to mention that the container is a Material & Geometry format.  Looks like it is a standard format although not widely accepted one.  There seemed to be a couple of dlls that control accessing it.  Does it seem practical to hunt a library down that would interact with these formats?  I also saw a large writeup on the actual structure of the file format, but it was rather academic in what it does.  If that sounds helpful I track down the link, but again, I know very little as to what is useful or not at this point.  

If anyone has any particular sleuthing methods in approaching this, I wouldn't mind hearing suggestions so I have a better understanding of what occurs in this process.  I've been going through the file format exploration write up that was on the wiki, but I'm still foggy on a few things.  Is there a better thread to ask general questions about that stuff?

Thanks
## Post #12
- Username: Protocol X27
- Rank: Moderator
- Number of posts: 2602
- Joined date: Sun May 18, 2008 10:01 pm
- Post datetime: 2012-10-31T23:12:33+00:00
- Post Title: MechAssault 2: Lone Wolf / .mgf format

its just an zlib compressed file
offzip.exe -1 -a c:\file.dat c:\output 0
that will extract the file
here is a quickbms the follows the structure but offzip is most likely faster.

```
get unk01 long
get files long
get tsize long
get unk01 long
get size long
get unk01 long
get unk01 long
get name basename
string name + .ext
append
for i = 0 < files
get offset long
get zsize long
get crc long
if tsize >= size
clog MEMORY_FILE offset zsize size
else
clog MEMORY_FILE offset zsize tsize
endif
math tsize -= size
next i
append
get nsize asize MEMORY_FILE
log name 0 nsize MEMORY_FILE

```
## Post #13
- Username: Protocol X27
- Rank: ultra-veteran
- Number of posts: 341
- Joined date: Thu Dec 15, 2011 12:46 am
- Post datetime: 2012-11-01T00:09:56+00:00
- Post Title: MechAssault 2: Lone Wolf / .mgf format

> Reply from chrrox
>
> its just an zlib compressed file
offzip.exe -1 -a c:\file.dat c:\output 0
that will extract the file
here is a quickbms the follows the structure but offzip is most likely faster.

Dang, chrrox, that was quick.   

Of the files I zipped it looks like only the text.mgf was not compressed, not expecting it to be useful anyway.  XD    I started digging through them, and how about that much easier to read now.  Not sure where I'm going to start just yet, but there is discernable stuff in the cinematic and template files for sure.   I'm seeing model references for Foster, Natalia, Power Armor, etc.   Some textures are in .tif, also see some MGMODEL file extensions.  Does that mean anything?
## Post #14
- Username: Protocol X27
- Rank: ultra-veteran
- Number of posts: 341
- Joined date: Thu Dec 15, 2011 12:46 am
- Post datetime: 2012-11-01T20:13:50+00:00
- Post Title: MechAssault 2: Lone Wolf / .mgf format

I have no idea if any of this is helpful.  Just been spending time finding consistencies...  I am struggling understanding what I'm looking for in terms of file offsets.  I see file names grouped together, but not no link to where they're accessed.  

I punted on the cinema / mission files for a while and focused on the common.mgf.  

Anyway, here's what I've run across

Initial GRAIS / Bytes, common to .mgf container files
HEX: 6D 67 66 20 04 01 5A 5A:  
ASCII: mgf ..ZZ 


File formats
.ltf		
.mtb		
.tif
.MGMODEL {xx verts}, {xx indices}
.NODE
.ANM
.mgparticle
.mat

File Length: Variable

Consistent Values found by file type: 4 Bytes, unknown purpose (to me at least)

common.mgf
----------
.ANM: 17 36 6F 35

.MGModel: 81 CF C8 B6

.mtb: 3C 34 CA 59

.ltf: C5 59 A5 F4

.mgparticle: 56 BC 45 F5

.NODE: 81 CF C8 B6

.mat: 47 EC 98 39

.tif: ?? Variable

File Format
--
4 Bytes: Header (Static by File Type (except .tifs)) (??)
4 Bytes: Filename Length
X Bytes: Filename + Null Byte
4 Bytes: 02 2F 02 FF - Consistent
4 Bytes: __ 00 00 00 - First Byte Varies
X Bytes: Remainder of File
## Post #15
- Username: Protocol X27
- Rank: ultra-veteran
- Number of posts: 341
- Joined date: Thu Dec 15, 2011 12:46 am
- Post datetime: 2013-01-25T00:25:58+00:00
- Post Title: MechAssault 2: Lone Wolf / .mgf format

Any pro's have any suggestions, or some good tutorials I could start checking into?
## Post #16
- Username: howfie
- Rank: double-veteran
- Number of posts: 929
- Joined date: Fri Jul 08, 2011 7:06 pm
- Post datetime: 2013-01-25T05:23:52+00:00
- Post Title: Re: MechAssault 2: Lone Wolf / .mgf format

Vertex and index buffers are clearly visible, texture format looks simple, skeletons use a markup language lol. It's too messy and there are no tits (metal tits don't count); therefore, sad to say i doubt you'll find anyone who'd be interested in doing this game he he he. Too much work for very little tits . hahahahahahaha

What is up with markup languages in games anyways? MLs are good for interchange and document formats, but I wouldn't touch an ML with a 10-foot pole. Is this an old game made back in the days when programmers were using and misusing MLs for everything?
## Post #17
- Username: Protocol X27
- Rank: ultra-veteran
- Number of posts: 341
- Joined date: Thu Dec 15, 2011 12:46 am
- Post datetime: 2013-01-25T20:43:36+00:00
- Post Title: Re: MechAssault 2: Lone Wolf / .mgf format

Well there ain't, 0.   I figured the metal ones would be a positive side effect/result for those not interested in the actual ones in there. 



Your assessment is way past my present know-how.  It did release back in 2004, so I don't know what old qualifies for in technology I'm not savvy in, XD .  

$o does $ome form of bribery work?
## Post #18
- Username: howfie
- Rank: double-veteran
- Number of posts: 929
- Joined date: Fri Jul 08, 2011 7:06 pm
- Post datetime: 2013-01-25T22:33:12+00:00
- Post Title: Re: MechAssault 2: Lone Wolf / .mgf format

Proto, what did you specialize in when you got your CS degree?

Hmmm bribes... I want lots of horny 18 year old women dribbling at my feet lol.
## Post #19
- Username: howfie
- Rank: double-veteran
- Number of posts: 929
- Joined date: Fri Jul 08, 2011 7:06 pm
- Post datetime: 2013-01-25T22:56:18+00:00
- Post Title: Re: MechAssault 2: Lone Wolf / .mgf format

Lol j/k about the 18 year olds hahaha. Just pm me some more files on that other forum and I'll see if the data is easy to get to after using chrrox's script.
## Post #20
- Username: Protocol X27
- Rank: ultra-veteran
- Number of posts: 341
- Joined date: Thu Dec 15, 2011 12:46 am
- Post datetime: 2013-01-29T00:24:50+00:00
- Post Title: Re: MechAssault 2: Lone Wolf / .mgf format

> Reply from howfie
>
> Lol j/k about the 18 year olds hahaha. Just pm me some more files on that other forum and I'll see if the data is easy to get to after using chrrox's script.

Hmmm, as long as u don't specify the quality, // evil laugh  

 

My school wasn't high end, so I don't think I have anything qualifies as a specialization, their program was probably a bit softer than some of the others' :X  Bulk of 'my' focus was programming though...

Thanks, will do...
