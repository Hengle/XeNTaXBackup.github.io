## Post #1
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-07-27T19:34:36+00:00
- Post Title: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Hello at All...
I'm sure that you know the khkh_xldMii compiled by kkdf2.... unfortunately, he don't share his sources.... so pnobodies can read an "example of" "how to read MSET animations file"....
After all.... I AM AN Ha**** so..... I'd to share the sources write in C# this is a list of dependencies:

***************
Dependencies
***************
ef1Declib
mscorlib
SlimDX
System
System.Drawing
System.Windows.Forms
System.Xml
*******************
End of Dependencies
*******************


COPY OF THE README FILES:

```
This Pack was made by Xemnass, ( Matteo Esposito ).

This pack contain the program made by kkdf2

Contains even the Sources written in C# ( C Sharp ) of
all library which the program need and the program it
self.

I add some MDLX and their relativ MSET  for testing
purpose only.

Added even MSET reserarches and informations DOC.
In (*).Docx and (*).Doc.

******************************************************

*****************
*               *
*Included Files:*
*               *
*****************
******************
*Program:        *
*                *
*khkh_xldMii     *
*                *
******************
******************
*Libraries:      *
*                *
*7zip443         *
*Custeera        *
*ef1Declib       *
*SlimDX          *
*                *
******************
******************
*Sources:        *
*                *
*khkh_xldMii     *
*7zip443         *
*Custeera        *
*ef1Declib       *
*SlimDX          *
*                *
******************
******************
*Documents:      *
*                *
*MSET+MDLX       *
*SEARCH          *
*RESULT          *
*                *
******************
*******************
*MDLX-MSET EXAMPLE*
*******************
```





I make this and let it in your hands and I answer help to everybody, anyone who want to join in this project is Welcome =D

Please after all, after we understan perfectly this code we can export MSET as psa and whit my tutorial reasign all animations to the respective Character =D this will help everybody to make their own game =D


This is the link to my Pack:
[http://www.mediafire.com/?fr7yk3r7skakjad](http://www.mediafire.com/?fr7yk3r7skakjad)
## Post #2
- Username: mono24
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2011-07-27T21:18:55+00:00
- Post Title: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Interesting share!
## Post #3
- Username: SirLoon
- Rank: advanced
- Number of posts: 45
- Joined date: Sat Dec 19, 2009 12:26 am
- Post datetime: 2011-07-28T00:15:52+00:00
- Post Title: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Nice one  But i would like to see sources from KH ripper too  I still dont get how Yaz0r found model files in iso
## Post #4
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-07-28T12:44:27+00:00
- Post Title: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

The contents of this post was deleted because of possible forum rules violation.
## Post #5
- Username: mono24
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2011-07-28T20:45:20+00:00
- Post Title: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Okay, but that is assembly code. I think SirLoon meant the C code, or whatever that was written in. To understand the concept.
## Post #6
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-07-28T21:45:56+00:00
- Post Title: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

o yhea.. XD You have reason XD =D
Now, in my nation is the 23:45 so is too late and I am so tired XD
Tomorrow I will Open His code whit my "instruments" and i will looking for the code if it was written whitout a special algorythmin protections, things that i don't think XD
However I hope that some people will join in this propject and together wil foun a way for make an MDLX+MSET plugin for Noesis =D

However XD,

GoooooooodNiiiiiiiiiiiiiiiiiiiight =D
## Post #7
- Username: mono24
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2011-07-28T21:51:12+00:00
- Post Title: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

In my nation it is 23:45 too, so I know what you mean  What is your nation then? I will await your findings! I know MrAdults has seen your post, so perhaps he can implement it into Noesis!
## Post #8
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-07-28T21:52:16+00:00
- Post Title: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

I am Italian, and you?
## Post #9
- Username: mono24
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2011-07-28T21:52:48+00:00
- Post Title: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Dutch
## Post #10
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-07-28T21:58:50+00:00
- Post Title: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Somethings say to me that you are Dutch XD =D I guess =D

Dutchland is a beutifull nation maybe a day i will go to your nation XD Unfortunately I go sometimes out of europe the only nation  which i Visitated in Europe was Franch XD =D

However GoodNight i go XD =D =D =D =D =D
## Post #11
- Username: mono24
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2011-07-28T21:59:27+00:00
- Post Title: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

I really need to move to Europe, I think... =D
## Post #12
- Username: mono24
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2011-07-28T22:01:34+00:00
- Post Title: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Hehe. Yes. Dutchland, or "The Netherlands" as I tend to call it, is of course a beautiful country.  ..
## Post #13
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2011-07-28T23:26:44+00:00
- Post Title: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Sorry to be a bit of a downer, but the MSET format structure is actually rather easy.  Unfortunately it is the processing of the data that is the difficult part.

KH2 computes its Inverse Kinematics code through a series of EE and COP2 (VU0) instructions, which can make it a bit of a pain to statically reverse.  Unfortunately pcsx2's debugger functionality is no longer operational, and even in older builds was only so useful.  As such, even i don't think you will find an easily understandable form of the MSET IK processing.  But hey, we can use all the help we can get.

i already have preliminary KH2 animation support in my Noesis plugin, but current only 'raw' animations work correctly, as they are simply sampled matrix key frames.  Unfortunately most animations of interest do not use 'raw' animations, and the other format sadly is not in a form that can be directly sampled to get correct results without proper IK handling.  Really wish the animations would have at least be in a default state when IK processing was not applied, but this is unfortunately not the case (similar to the reason i have not finished SF4 animations either).

i am currently investigating better ways to debug the emulated ps2 instructions (as well as code for other emulated platforms), so that i can get a better picture of the results of the COP2 instructions.  Will have to see how far i get once i can make time for everything.  If i don't head in a different direction first i might try letting pcsx2 sit for a while until it hopefully hits the function address i need, heh.

Oh, and you probably could have simply asked kkdf2 for more information and/or source if you really had an interest in investigating the way the programs work (seems to check these forums quite regularly i believe).  But i guess .NET is very nice in the regard it is easily disassembled/decompiled from IL into native code.
## Post #14
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-07-29T12:55:41+00:00
- Post Title: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

If you realy want to know I used .Net Reflector and .Net.Reflector.File.Disassembler
The things which is good is that whit this program you can easily convert from a language to another (ex. C#, C++, etc...)
I even, don't know kkdf2 i know only which is the programmer of this program =D

However... if you have for ex. MSN,Skype, or other..... we can speak about how to debug  PS2 instruction =D
Maybe i can be of any help =D

Hello Wooooorld =D

P.S.=

> Reply from revelation
>
> 
Oh, and you probably could have simply asked kkdf2 for more information and/or source if you really had an interest in investigating the way the programs work (seems to check these forums quite regularly i believe).

Why I had to say a lie??? if i could ask this directly to him i could say:

"KKDF2 relased to me the sources"
instead to say that I've extracted no?
## Post #15
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-07-29T17:08:10+00:00
- Post Title: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

You know, ANBs are also valid Kingdom Hearts 2 Animations, and kkdf2 made an ANB2MSET converter. Of course, the only program that gets all of those ANBs, or at least more than Falo and Yazor ever have, is Xeeynamo's KH2Dumper, located on his blog, at the same place he posted his KH2FM full translation. Of course, Falo's is still the best dumper for KH1.

By the way, what did Revelation mean when he said raw KH2 animations worked with his Noesis plugin? I assume that means ANB files, but I have no idea how to make Noesis animate something with them.
## Post #16
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-07-29T17:22:10+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Interesant, can you give me a link?

Maybe I can disassemble it =D
## Post #17
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-07-30T13:19:27+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

I've attached the KH2DumperX disassembled in ASM =D
[KH2DumperX.zip](https://xentaxbackup.github.io/file/4557_KH2DumperX.zip)
## Post #18
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-07-31T16:07:00+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

That looks great, but there a few unresolvable compiling errors when trying to put that back into an exe. Do you have any idea what I'm doing wrong?
## Post #19
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-01T12:59:34+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Can you post a log?
Maybe do you miss some dependencies?
Or simply, when you reapcj the exe, I thinmk that the program have to "execute" so, maybe have to saty even all the necessary to do the "unpack" even if the compilations wont unpack nothing, i think...

Did you have the Redistributable C++ pack for you enviroment as say in the blog?:
[http://xeeynamo.blogspot.com/2011/07/ki ... l-mix.html](http://xeeynamo.blogspot.com/2011/07/kingdom-hearts-ii-final-mix.html)
## Post #20
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-08-01T23:51:42+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

I tried to disassemble it too, but reassembly gave me another string of errors, so it may just be my compiler, Masm32, and not your code that is giving me a problem. This is its disassembly: [http://www.majhost.com/gallery/mirrorma ... disasm.txt](http://www.majhost.com/gallery/mirrorman95/Other/disasm.txt)
## Post #21
- Username: Shapyi
- Rank: ultra-n00b
- Number of posts: 5
- Joined date: Tue Aug 02, 2011 7:45 am
- Post datetime: 2011-08-02T00:04:57+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

I was wondering, have any of you been able to get any KH2 animations exported? Because if you're looking for a quick solution you can just get them from kkdf2's viewer. You don't even need the source code to do it (although it makes it easier). Inserting a little code into his viewer using .NET Reflector does the trick. 

Here is a video of Sora is the DirectX *.x format running around in my XNA game engine:

[http://www.youtube.com/watch?v=Lh0tUgORu34](http://www.youtube.com/watch?v=Lh0tUgORu34)

Let me know if you guys have a better method.
## Post #22
- Username: ultimaespio
- Rank: mega-veteran
- Number of posts: 267
- Joined date: Thu Apr 15, 2010 2:55 am
- Post datetime: 2011-08-02T01:06:19+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Pretty impressive. Just out of curiosity, what did you use to export the model? If they match with the Noesis exports, we have a winner.
## Post #23
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-08-02T05:14:27+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from Shapyi
>
> I was wondering, have any of you been able to get any KH2 animations exported? Because if you're looking for a quick solution you can just get them from kkdf2's viewer. You don't even need the source code to do it (although it makes it easier). Inserting a little code into his viewer using .NET Reflector does the trick. 

Here is a video of Sora is the DirectX *.x format running around in my XNA game engine:

http://www.youtube.com/watch?v=Lh0tUgORu34

Let me know if you guys have a better method.

Sweet freaking jebus. You did it! By the way, what code did you insert?

If this really works, we either need to import this to Noesis or polish it off with Yaz0r's program if we can, because yaz0r's runs imperfectly when it comes to ANB facial animations, while kkdf2's does not. (I used anb2mset to convert those ANBs.)
## Post #24
- Username: SirLoon
- Rank: advanced
- Number of posts: 45
- Joined date: Sat Dec 19, 2009 12:26 am
- Post datetime: 2011-08-02T06:42:56+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from Mirrorman95
>
> I tried to disassemble it too, but reassembly gave me another string of errors, so it may just be my compiler, Masm32, and not your code that is giving me a problem. This is its disassembly: http://www.majhost.com/gallery/mirrorma ... disasm.txt
reassembly means you recompile whole code with bunch of garbade from c linker and you dont recognize what is user code itself and whats inserted by compiler
## Post #25
- Username: Shapyi
- Rank: ultra-n00b
- Number of posts: 5
- Joined date: Tue Aug 02, 2011 7:45 am
- Post datetime: 2011-08-02T07:35:55+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

I wrote my own kh2 model viewer/exporter a few years ago with kkdf2's help. I'm not going to release it because its a mess. But I will go over the procedure I used to get animations exported and hopefully you guys can get it working. It's a bit of a process but its a lot easier than reverse engineering the animation system. If you're familiar with mdlx models this shouldn't be too bad.

NOTE: All my code is done in Visual C# Express Edition 2008.

First step is to modify kkdf2's viewer to export matrix transforms for each frame. This can be done by adding some code to his program either using his source code or .NET Reflector (I've done both methods). Here is a the latest version I modified with .NET Reflector: 

[http://www.mediafire.com/?ck31xco38hdk6ti](http://www.mediafire.com/?ck31xco38hdk6ti)

When you push "Bind Controller" AND an animation is selected it will dump the transforms into a data file (*.dat). Otherwise it will crash.  Here is the code I used to make that data file:

```
{
	// Generate the file name
	string filename = listView1.SelectedItems[0].Text;
	string name = listView1.SelectedItems[0].Text;
	string index = listView1.SelectedIndices[0].ToString();

	filename = filename.Replace('#', '_');
	
	filename = filename + "_" + index + ".dat";

	if (filename.Length < 5)
	{
		filename = "mat-dump.dat";
	}

	// Create a new memory stream
	MemoryStream mat_data = new MemoryStream();
	BinaryWriter mat_writer = new BinaryWriter(mat_data);
	FileStream outfile = File.OpenWrite(filename);
	int max_ticks = 1;

	// Get the frame count (ticks)
	foreach (ListViewItem lvi in listView1.SelectedItems)
	{
		decimal temp = (decimal)((MotInf)lvi.Tag).maxtick + numericUpDownStep.Value;
		max_ticks = (int)temp;
		break;
	}

	mat_writer.Write((int)_Sora[0].Ma.Length); // bone count (4 bytes)
	mat_writer.Write((int)max_ticks); // frame (tick) count (4 bytes)

	// output all the matrix transforms for each frame
	for (int i = 0; i < max_ticks; i++)
	{
		tick = i;
		recalc(); // this tell his viewer to calculate the animation for the frame

		// output each matrix for each bone (matrix4x4 * 4 bytes)

		foreach (Matrix mat in _Sora[0].Ma)
		{
			/* Matrix Format
				[M11][M12][M13][M14]
				[M21][M22][M23][M24]
				[M31][M32][M33][M34]
				[M41][M42][M43][M44]
			*/
			mat_writer.Write((float)mat.M11); mat_writer.Write((float)mat.M12); mat_writer.Write((float)mat.M13);
			mat_writer.Write((float)mat.M14);

			mat_writer.Write((float)mat.M21); mat_writer.Write((float)mat.M22); mat_writer.Write((float)mat.M23);
			mat_writer.Write((float)mat.M24);

			mat_writer.Write((float)mat.M31); mat_writer.Write((float)mat.M32); mat_writer.Write((float)mat.M33);
			mat_writer.Write((float)mat.M34);

			mat_writer.Write((float)mat.M41); mat_writer.Write((float)mat.M42); mat_writer.Write((float)mat.M43);
			mat_writer.Write((float)mat.M44);
		}
	}
	
	// Output all the bytes to a file
	byte[] b_data = mat_data.ToArray();
	
	foreach (byte b in b_data)
	{
		outfile.WriteByte(b);
	}

	outfile.Close();

	MessageBox.Show("Animation transforms dumped.", this.Text, MessageBoxButtons.OK, MessageBoxIcon.Information);
}
```


This outputs the number of bones (4 bytes), then the amount of frames (4 bytes), and finally it outputs all the 4x4 matrix transforms. I'm providing the source code so you can see how I created the file, it will make it easier to parse later. On to the fun part   

kkdf2 took a chunk of code from pcsx2 and emulated it in his viewer to get animations working. In order to get the models into the DirectX format I needed to give it the data, when calculated, arrived at the same result as if PS2 calculated it. In other words, work backwards. For each frame, each bone has a local matrix transform that gets calculated to an absolute transform through the bone hierarchy. Here is the formula, this is how meshes are animated with the format I'm using:

```
bone.absoluteMatrix = bone.localMatrix * parentBone.absoluteMatrix
```


PS2 gives us essentially the same result but using a far more complex formula (IK solvers, etc). All we need is some basic linear algebra to solve for the local matrix. C# has Managed DirectX which provides matrix and vector functions. I came up with the formula below:

```
bone.localMatrix = bone.absoluteMatrix * Invert(parentBone.absoluteMatrix)
```


Now when the animation system in DirectX calculates the transforms for each frame it will arrive at roughly the same result as PS2. For those familiar with mdlx, each bone as a few pieces of data but we really just need the parent index, absolute transform (from frame data) and local transform (calculated). For each frame, fill the absolute transform matrix with that value then calculate the local transform. Spit the locals into the model format of your choice. I treated the list of bones as a tree and did a level-order traversal to calculate the local transform for each. Here is the code:

```
private void calc_local_mats(int index)
{
	AxBone ax_bone = boneList[index];

	// parent bone
	if (ax_bone.parent == -1)
	{
		ax_bone.local = ax_bone.absolute;
	}
	else
	{
		// localMatrix = absoluteMatrix * parent.absoluteMatrix.Invert()
		Matrix B = boneList[ax_bone.parent].absolute;
		Matrix C = ax_bone.absolute;

		B.Invert();

		boneList[index] = C * B;
	}

	// if the current bone is not a leaf
	if (!mesh.bones[index].leaf)
	{
		List<int> indices = new List<int>();

		// build a list of all its children
		for (int i = 0; i < mesh.bones.Count; i++)
		{
			if (index == mesh.bones[i].parent)
			{
				indices.Add(i);
			}
		}

		// calculate the locals for each child
		foreach (int i in indices)
		{
			calc_local_mats(i);
		}
	}
}

// this the function i used to determine if a bone is a leaf.
private bool joint_is_leaf(int index)
{
	for (int i = 0; i < mesh.bones.Count; i++)
	{
		if (mesh.bones[i].parent == index)
			return false;
	}

	return true;
}
```


That's basically it. To recap: 

1. Dump the animation transforms.
2. Load that data file and parse it. 
3. Fill a bone list with transforms, one frame at a time. Make sure there is parent index data
4. Perform a level order traversal, treating the list as a tree and calculate the local transform
5. Output the local transforms to the model format as a frame (preserving the hierarchy) 
6. Repeat

I'm sure I'm missing some details so ask questions if you aren't clear on what I did. Essentially you are working backwards from the data PS2 calculates. This is not as "pure" as writing an IK solver similar to PS2 so its a quick and dirty solution that produces pretty nice results. You'll want to clean up these animations in Max or whatever package you use. There won't be "keyframes", there will be a frame for each frame of the animation   

Again credit for kkdf2 for his viewer and help. I never shared this code with anyone but I'm glad I found this board. I hope you guys get some ideas from this and share any code you come up with. I'd be really happy to see it.
## Post #26
- Username: SirLoon
- Rank: advanced
- Number of posts: 45
- Joined date: Sat Dec 19, 2009 12:26 am
- Post datetime: 2011-08-02T07:57:30+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from Shapyi
>
> 
Respect ...
## Post #27
- Username: Darkfox
- Rank: VVIP member
- Number of posts: 688
- Joined date: Sat Jul 05, 2003 1:11 am
- Post datetime: 2011-08-02T09:09:19+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Excellent work there, Shapyi!   Very happy to see animation support coming into play here. At current yours would seem to be the best for getting animations until direct MSET support happens in Rev's Noesis plugin.

> Reply from revelation
>
> Unfortunately pcsx2's debugger functionality is no longer operational, and even in older builds was only so useful.  As such, even i don't think you will find an easily understandable form of the MSET IK processing.  But hey, we can use all the help we can get.

I share your sentiments here, PCSX2 was my one-stop for general PS2 hacking which, without a debugging feature, is no longer possible. I wish they would release a version with better debugging features but that may not be for quite a while...
## Post #28
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2011-08-02T09:51:32+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

PCSX2 is [open source](http://code.google.com/p/pcsx2/source/list); if you have the time, you could always contribute towards better debugging support in it.
## Post #29
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-02T12:53:56+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

@Shapyi
Very, very, very, Impressive =D
You have my respect. XD
Howevr, you did a god job, now the still work, is to "pack" an MSET+MDLX plugin =D and the jobs is done =D
Very, very a god job, but i have a question I know that the MSET file of KH2 is a bit different from the MSET file of KH1, if I not go wrong right?  Maybe we can find a solution to "pack" a MDLS+MSET plugin =D for do a "complete job" XD
Howver very nice and interessant post =D and Code =D

Respect =D

P.S.=
@Mirrorman95
I used IDA free  think you can simply load my ask and recompile itself =D
## Post #30
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-02T13:40:18+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Sorry for the double post, but now i was looking for my DUIumped KH models, and.....

I dindn't find  any ANB files instead I find a.fm files???? why???
## Post #31
- Username: ultimaespio
- Rank: mega-veteran
- Number of posts: 267
- Joined date: Thu Apr 15, 2010 2:55 am
- Post datetime: 2011-08-02T13:46:24+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Yaz0r's dumper is the way to go. When it's got everything, the anb files are in the folder called anm, then they are split by worlds, so like al is aladdin and bb beauty and the beast.
## Post #32
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-02T13:56:43+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Oh.... My God XD Sorry, I don't search in this folder I searched only in the obj folder Using the KHDumperX thankyou verymuch =D
## Post #33
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-08-02T15:22:12+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Xeeynamo's dumper dumps more ANBs than Yaz0r's. When yaz0r's dumper came out, I bruteforced several filenames referenced in the ARD files and came up with several ANBs yaz0r didn't even have. When I used Xeeynamo's dumper, it found all the other ANB files I was looking for. Among those files include animations for Riku's Guardian, so I'd suggest using Xeeynamo's dumper, KH2DumperX, instead of yaz0r's.
## Post #34
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-02T20:33:00+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

yhea XD in fact I've used indeed the KHDumperX
=D
but... I had  a question... XD

From the DAT files how can i convert it into a readable animations into 3DSMAX, like ( *. )PSA??? =D =D =D =D =D
## Post #35
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-08-02T21:19:57+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from revelation
>
> Sorry to be a bit of a downer, but the MSET format structure is actually rather easy.  Unfortunately it is the processing of the data that is the difficult part.

KH2 computes its Inverse Kinematics code through a series of EE and COP2 (VU0) instructions, which can make it a bit of a pain to statically reverse.  Unfortunately pcsx2's debugger functionality is no longer operational, and even in older builds was only so useful.  As such, even i don't think you will find an easily understandable form of the MSET IK processing.  But hey, we can use all the help we can get.

i already have preliminary KH2 animation support in my Noesis plugin, but current only 'raw' animations work correctly, as they are simply sampled matrix key frames.  Unfortunately most animations of interest do not use 'raw' animations, and the other format sadly is not in a form that can be directly sampled to get correct results without proper IK handling.  Really wish the animations would have at least be in a default state when IK processing was not applied, but this is unfortunately not the case (similar to the reason i have not finished SF4 animations either).

i am currently investigating better ways to debug the emulated ps2 instructions (as well as code for other emulated platforms), so that i can get a better picture of the results of the COP2 instructions.  Will have to see how far i get once i can make time for everything.  If i don't head in a different direction first i might try letting pcsx2 sit for a while until it hopefully hits the function address i need, heh.

Oh, and you probably could have simply asked kkdf2 for more information and/or source if you really had an interest in investigating the way the programs work (seems to check these forums quite regularly i believe).  But i guess .NET is very nice in the regard it is easily disassembled/decompiled from IL into native code.

How do you load those animations in Noesis?
## Post #36
- Username: Shapyi
- Rank: ultra-n00b
- Number of posts: 5
- Joined date: Tue Aug 02, 2011 7:45 am
- Post datetime: 2011-08-03T00:21:11+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from Xemnass
>
> yhea XD in fact I've used indeed the KHDumperX
=D
but... I had  a question... XD

From the DAT files how can i convert it into a readable animations into 3DSMAX, like ( *. )PSA??? =D =D =D =D =D

Unfortunately I do not have the time to write a converter. Also, I don't know enough about the PSA format to create one. Just remember the *.dat file is just the final transform matrices for each frame of the animation. You're probably going to have to recalculate the local transform for each bone using the method I posted. Good luck.
## Post #37
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-03T10:26:28+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from Shapyi
>
> Xemnass wrote:yhea XD in fact I've used indeed the KHDumperX
=D
but... I had  a question... XD

From the DAT files how can i convert it into a readable animations into 3DSMAX, like ( *. )PSA??? =D =D =D =D =D

Unfortunately I do not have the time to write a converter. Also, I don't know enough about the PSA format to create one. Just remember the *.dat file is just the final transform matrices for each frame of the animation. You're probably going to have to recalculate the local transform for each bone using the method I posted. Good luck.
mhm.... You are right so I have to recaculate the trasform(Translations,rotations, etc...) for all bones in a nuthshell XD

Allright now i will fugure t out but I hope if revelations or anybody want to helop me i will be so happy=D
Regarding the PSA conversion, i mean the Export Processo of Noesis =D Indeed, if we make a new plugin we can export it as PSK, fro the mesh, and PSA for the animations, and importing it whit the Actor X script in 3ds Max or else =D
## Post #38
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-07T08:58:49+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

I had a question, how I can "see" into the file???

I mean, see the math proces, the peretions, and the entire Matrix?

Anyone which could help can ask me to PM =D

We need help for finish and check out the Marix, and let Noesis read and export it =D
## Post #39
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-07T11:41:25+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Ladies and Gentleman I show you other stuff which  I found in the KKdf2 Archieve I decrypt the password of the Pack and I've repacked all of the 5 pack in one only  pack whcihi I Hosted on Mediafire:

[http://www.mediafire.com/?7yzffjcqcrknlxr](http://www.mediafire.com/?7yzffjcqcrknlxr)


Let me know if this stuff can be usefull.

This Pack Contain:

MDLX, ANIM, TIM, PNG AND DECRYPTING PROJECT =D =D =D =D =D
## Post #40
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-10T13:10:25+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Some News:

Unfortunately, if nobody can help me.. Can't read nothing fro the dat.. even because is full of incompresible character ( @#[òèùòèù1òòwàqùeòàùeqòrq#]@#ùr[òw€]r@èàwròwèwer€]@]@<òdès+dòr+ròwe+èrwò+r+4ò76è+86ò-6.++ )

At the same  time... playing around some debugging, log and even the usefull kkdf2 documentations I've understood
some things:

All file named as:|-------------------------|Are:                

B_.....                --------------------------|Battle Model     
F_.....                --------------------------|Misc. Some model + Object
H_....                 --------------------------|Speakable Character ( which contains month, eyes.... and their relativ bones )
M_....                 --------------------------|Enemies Model ( Heartless - Nobodies )
N_....                 --------------------------|NPC Model ( Non Playable Character )
P_....                 --------------------------|Portrait Model ( Same as up )
W_....                --------------------------|Weapon Model ( Sora, Goofy and Donald )
WM_....              --------------------------|World Map Model ( World Model, World Map, Gummyship(only the gumiship which is in the world Map not else) )


During my test I understood even that there isn't any MSET for F model or H model..... or.... this was  what I thougth..... but this, there isn't the true.....

My strange attentions towards the anb was unleashed by this things hihihi XD

Indee,  I found ANB only for this kind of model =D there was  realy a few  anb for model which had yet their own MSET..... but.... unfortunately.... some H anb.... messup the mounth and the eyes =D


Soon I will release a list of all Model and their relativ content =D
=D
=D
=D
=D

Let me know if you  find this usefull =D
## Post #41
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-11T08:55:56+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

As I said before I'm working on a List which Rcan show the Model Name and his relativ Content.
For Example:

```
P_EX130.mdlx - Roxas's Shadow -
P_EX200.mdlx - Mickey - Completely Dressed as Org. XIII -
P_EX210.mdlx - Mickey - Dressed as Org. XIII -
P_EX220.mdlx - Mickey -
P_EX230.mdlx - Mickey whit Nobile Chain -
P_EX330.mdlx - Peter Pan -
P_EX340.mdlx - Trilli ( Peter Pan Fairy ) -
P_EX350.mdlx - Chicken Little -
P_EX360.mdlx - Nothing -
P_HE000.mdlx - Auron -
P_LK000.mdlx - Simba -
P_LK020.mdlx - Donald - 
P_LK030.mdlx - Goofy - Turtle
P_LK100.mdlx - Sora - Lion -
P_LM100.mdlx - Sora - Atlantica -
P_MU000.mdlx - Mulan -
P_MU010.mdlx - Mulan - Ping -
P_NM000.mdlx - Jack Skeleton -
```


Now I will Post a Screenshots of my Hard Work.

This List I suppose to share whit you, Opening A new topic and Updating the first post of this topic =D

The list is:

+MDLX LIST
|--B Model
|-----------F Model
|--------------------H Model
|-----------------------------M Model
|--------------------------------------N Model
|-----------------------------------------------P Model
|--------------------------------------------------------W Model
|------------------------------------------------------------------WM Model

Dividing:

Sora Form
Sora Weapon
Donald Weapon
Goofy Weapon
"Guest Weapon"

Into a Special Secction for Each

Even, I add the Map List Thanks for Mirrorman for the short list which he Post in the KH2 Map Files Topic.... unfortunately His List is incomplete and still a lot of thing and even entire world... so I will Add the stil part by my self seeing the map and playing around the game =D


My list is Based on the Xeeniamos KHDumperX the most complete.

Obviusly some Model havefor example:
P_H534_TSURU.MDLX
or
P_H534_MASTU.MDLX
or
P_H534_RTN.MDLX
or
P_H534_MEMO.MDLX

I skip this because this model is used or in the Journal or in anotehr situations but is always the same model of the Beggining model ( in this example P_H534.MDLX ).
I Skip also the Mset file obviusly XD

Let me know if this list can be usefull =D

Comment please =D




ScreenShot:
## Post #42
- Username: kkdf2
- Rank: beginner
- Number of posts: 24
- Joined date: Sun Oct 24, 2010 4:26 pm
- Post datetime: 2011-08-12T13:15:57+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Hi.

I have received pm from Xemnass.

oh how can i help you?

the answer is almost here. Shapyi has done great job! it will be totally good idea to write down the matrix data.


i considered whether writing Noesis plugin is good idea or not.

hmhm. here is a report: how Noesis plugin can play animation.

Quake 2 -- [http://www.youtube.com/watch?v=5i9aQ05VEdo](http://www.youtube.com/watch?v=5i9aQ05VEdo) (md2)

Doom 3 -- [http://www.youtube.com/watch?v=LwJwQhw9GXc](http://www.youtube.com/watch?v=LwJwQhw9GXc) (md5anim/md5mesh)

EDIT: I assumed that the existing plugins displayed the visual about only selected file. KH2 is separating the model/anim files like md5mesh/(anb or mset?). Thus, ...

if we can write the plugin, it'll display only the bone set? it is serious problem!


it'll be useful to create a converter which can convert from mdlx/mset into XXX format. maybe it'll be good news if Noesis can display XXX in the future.


XXX?

[collada dae](http://en.wikipedia.org/wiki/COLLADA)?

blender [import/exporter](http://www.blender.org/download/python-scripts/import-export/)?

DirectX [X format](http://msdn.microsoft.com/en-us/library/bb172982%28v=vs.85%29.aspx)?


known issue:

hi poly model animation and roxas need a kind of skin weight feature. they use it.


good idea?

Thanks
## Post #43
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-12T18:11:13+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from kkdf2
>
> Hi.

I have received pm from Xemnass.

oh how can i help you?

the answer is almost here. Shapyi has done great job! it will be totally good idea to write down the matrix data.


i considered whether writing Noesis plugin is good idea or not.

hmhm. here is a report: how Noesis plugin can play animation.

Quake 2 -- http://www.youtube.com/watch?v=5i9aQ05VEdo (md2)

Doom 3 -- http://www.youtube.com/watch?v=LwJwQhw9GXc (md5anim/md5mesh)


if we can write the plugin, it'll display only the bone set? it is serious problem!


it'll be useful to create a converter which can convert from mdlx/mset into XXX format. maybe it'll be good news if Noesis can display XXX in the future.


XXX?

collada dae?

blender import/exporter?

DirectX X format?


known issue:

hi poly model animation and roxas need a kind of skin weight feature. they use it.


good idea?

Thanks



First, Thanks to you for joining to this project =D
And Sorry again fo the sources   


@However, for what regarding Noesis Plugin:

How Noesis interprets the animations and show them is different from a game to another game, for example, try to see how Noesis read the GMO from Final Fantasy Dissidia.

Inded, we have, in fact, two problem:
1)Solving the Matrix;
2) Write down a plugin which can interpret and the Mesh and his relativ Animations File, as do you viewer =D



@Converter:
Looking in your achieve, I found khviimap.... It is a beautifull viever =D
For the OCnverter... after all, is A GOOD IDEA even this, inded, I thought that:

The converter, may can do this things:
Convert MDLX+MSET to:
               PSK-PSA
                  DAE

Even:
View the MAP and Export the Collision as do khviimap, but unfortunately, the script make an error when is executed in Blender... =(

Maybe we can do a script for MAX ( more used ) =D


Sorry if i continue to say the export in PSK(MESH) PSA(ANIM) but is the easyest way, according my tutorial, for import: Bone, Mesh and Animation =D


For the converter I can do teh GUI and the localizzation in Italian And Spanish =D


But we are digressing.... XD


Our Primary purpose is Solve this Matrix !!! I suppose =D =D =D =D =D


Let me know =D =D =D =D =D

I added you to MSN =D


Yuo are right for the skin weight feature.
But we need to find even.... a weird things to understand and which the Square Enix use in a lot of his game and you know that is still Unknow:

The Patch Image Mechanism =D *da-da-da-dannnnn* XD
## Post #44
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2011-08-12T19:30:30+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Hmmm, i guess if i had wanted to i could have taken the route Shapyi did from the beginning and simply output the matrix information from kkdf2's application.  The first 2 parts of the KH2 MSET processing is just so simple it really didn't need the overhead of emulating the ps2 instructions for it, but at the same time the 3rd part (IK?) relies on the way other data is setup in memory by that code.  So with that, and other reasons, i decided it would be more beneficial to completely decipher the way the IK processing worked.  i will be continuing to so once i have more time.

But i suppose in the interest of others i could fairly easily add support for processing the matrix information output by Shapyi's method for now until that time comes.  Would require running all the MSET files through that conversion process first though, but in the end should work for the purposes of most.  i could also probably take the time to convert the emulation code to c++ in order to do the conversion directly, but it would not be entirely worth it in the end, so i may list that as a last resort.

i'll try and take a look at the matrix data being output, and see if i can make time for adapting it as a temporary option to allow support for the more complex animation files.  i still need to look into the ANB and other animation related data as well...


> Reply from Dinoguy1000
>
> PCSX2 is open source; if you have the time, you could always contribute towards better debugging support in it.

This is something i have also planned on looking into...

Will have to see how things go, heh.
## Post #45
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-13T09:20:06+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from revelation
>
> Hmmm, i guess if i had wanted to i could have taken the route Shapyi did from the beginning and simply output the matrix information from kkdf2's application.  The first 2 parts of the KH2 MSET processing is just so simple it really didn't need the overhead of emulating the ps2 instructions for it, but at the same time the 3rd part (IK?) relies on the way other data is setup in memory by that code.  So with that, and other reasons, i decided it would be more beneficial to completely decipher the way the IK processing worked.  i will be continuing to so once i have more time.

But i suppose in the interest of others i could fairly easily add support for processing the matrix information output by Shapyi's method for now until that time comes.  Would require running all the MSET files through that conversion process first though, but in the end should work for the purposes of most.  i could also probably take the time to convert the emulation code to c++ in order to do the conversion directly, but it would not be entirely worth it in the end, so i may list that as a last resort.

i'll try and take a look at the matrix data being output, and see if i can make time for adapting it as a temporary option to allow support for the more complex animation files.  i still need to look into the ANB and other animation related data as well...

Good =D However All kind of help that you need do not hesitate ask to us it is, after all, this is our finaly purpose.

However the converter is even a good idea so I think that we can carry out these two projects in parallel also even:
The Plugin and the converter , may can have the same function =D

However I want to help everybody please, tell me what I have to do =D whit each of two projects =D =D =D =D =D
## Post #46
- Username: kkdf2
- Rank: beginner
- Number of posts: 24
- Joined date: Sun Oct 24, 2010 4:26 pm
- Post datetime: 2011-08-14T00:15:36+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Hi.

khkh_xldMii 8 (hacked): the matrix file format was revealed by hack.

{
 uint32 cntFrame; // animation frame count
 uint32 cntMatrix; // model's joint(matrix) count.
 Matrix matrices[cntFrame][cntMatrix];
}

struct Matrix
{
 float M11, M12, M13, M14;
 float M21, M22, M23, M24;
 float M31, M32, M33, M34;
 float M41, M42, M43, M44;
}

matrix file viewing: [http://www.youtube.com/watch?v=-lzvr4HuUxY](http://www.youtube.com/watch?v=-lzvr4HuUxY)

EDIT: the video shows visualization sample of the matrix data.

you expected matchstick?

each matrix is represented as a point.

the bone's hierarchy is in mdlx.
anyway we need mdlx for more accurate rendering.

Thanks
## Post #47
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-08-14T06:19:01+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Shapyi, kkdf2, I have thoroughly enjoyed your work on the mset project. You have figured out how to crack the mset format. But why do you need to make all your youtube videos unlisted? What is the point of needing to have the link? Do you require a level of privacy in order to display the fruits of your labors? I mean, I certainly wouldn't come up with such developments, since I don't understand 3D formats, and I truly appreciate the achievements you've made on a deep level, but I can't understand why the videos need to be secret. And who is hack?

But seriously, great improvements; state-of-art accomplishments with the format.
## Post #48
- Username: Shapyi
- Rank: ultra-n00b
- Number of posts: 5
- Joined date: Tue Aug 02, 2011 7:45 am
- Post datetime: 2011-08-14T06:44:31+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from Mirrorman95
>
> Shapyi, kkdf2, I have thoroughly enjoyed your work on the mset project. You have figured out how to crack the mset format. But why do you need to make all your youtube videos unlisted? What is the point of needing to have the link? Do you require a level of privacy in order to display the fruits of your labors? I mean, I certainly wouldn't come up with such developments, since I don't understand 3D formats, and I truly appreciate the achievements you've made on a deep level, but I can't understand why the videos need to be secret. And who is hack?

But seriously, great improvements; state-of-art accomplishments with the format.

Thanks but what I did was very minimal, kkdf2's viewer did all the hard work
## Post #49
- Username: Devilot
- Rank: ultra-veteran
- Number of posts: 443
- Joined date: Tue Sep 07, 2010 5:12 pm
- Post datetime: 2011-08-14T07:03:17+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

subscribed to thread AND youtube channel. this is great work.
## Post #50
- Username: kkdf2
- Rank: beginner
- Number of posts: 24
- Joined date: Sun Oct 24, 2010 4:26 pm
- Post datetime: 2011-08-14T11:41:05+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Hi

Thanks for your indication.  

> Reply from Mirrorman95
>
> Shapyi, kkdf2, I have thoroughly enjoyed your work on the mset project. You have figured out how to crack the mset format. But why do you need to make all your youtube videos unlisted? What is the point of needing to have the link? Do you require a level of privacy in order to display the fruits of your labors? I mean, I certainly wouldn't come up with such developments, since I don't understand 3D formats, and I truly appreciate the achievements you've made on a deep level, but I can't understand why the videos need to be secret. And who is hack?
I changed youtube videos into public, and more understandable title/comment.

It is fault of my lazyness. about pasting videos carelessly.

I'll insert the intention into my posts which caused pasting video link. with EDIT: lead.

Thanks
## Post #51
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-14T15:59:43+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from kkdf2
>
> Hi

Thanks for your indication.  
Mirrorman95 wrote:Shapyi, kkdf2, I have thoroughly enjoyed your work on the mset project. You have figured out how to crack the mset format. But why do you need to make all your youtube videos unlisted? What is the point of needing to have the link? Do you require a level of privacy in order to display the fruits of your labors? I mean, I certainly wouldn't come up with such developments, since I don't understand 3D formats, and I truly appreciate the achievements you've made on a deep level, but I can't understand why the videos need to be secret. And who is hack?

I changed youtube videos into public, and more understandable title/comment.

It is fault of my lazyness. about pasting videos carelessly.

I'll insert the intention into my posts which caused pasting video link. with EDIT: lead.

Thanks

Perfect our first purpose was solved =D Thanks to the united work of Shapyi and kkdf2 =D
I've uploaded some MDLX + their own MSET fro a better rendering =D
owever a very good job =D

I almost finish the list I named and found almost all MDLX and figured it out what are they this is the sections which I finisched:

Monster ( Heartless and Nobodies, 100%  )
NPC ( 100% )
P( 100% )
Weapon (100%)
MAP( 65 % )
F(Object 58 % )
Battle Model ( 100% )
Sora's Form ( 100% )
Guest Weapon ( 100% )
Worlds Models ( 100% )
H( I'm working on it whit today is 100% )

As i finish i will share a PDF whit an improved graphic =D

Whit our work but especially the work done by Shapyi and kkdf2 we are offering an usefull content and tools to all KH2 Fans =D

THANKS TO ALL FROM THE KH2 FAN

but the work is not yet finished =)

Left some things but the hard work was done ( cracking and solving the matrix )


Good joob to all =D

As I finish i will share the PDF =D



This is some samples:

MDLX+MSET SAMPLES
[http://www.mediafire.com/?k0bexlyx3ubjm9s](http://www.mediafire.com/?k0bexlyx3ubjm9s)
## Post #52
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2011-08-15T04:14:51+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Well, i'll modify my plugin to load the format a little bit later, once i can fix whatever the heck it is i broke in the code that is keeping it from working the way it is supposed to when i recompile it.

i changed the format to support multiple animations per file so that it can be loaded in much the same way as the original MSET would have.  i simply changed the file extension to ASET instead.

```
uint32 dataTag; // 'ASET' tag
uint32 pad; // 0 - possibly useful as a version or something....
uint32 cntJoints; // joint count
uint32 cntAnims; // animation count
uint32 animOffsets[cntAnims]; // offsets to animation data (0 padded to next 16-byte boundary)
{
    uint32 animIndex; // animation index
    uint32 cntFrames; // animation frame count.
    uint32 pad;
    uint32 pad;
    char   animName[32]; // animation name padded to 32-bytes
    Matrix matrices[cntFrames][cntJoints];
}[cntAnims];
}

struct Matrix
{
float M11, M12, M13, M14;
float M21, M22, M23, M24;
float M31, M32, M33, M34;
float M41, M42, M43, M44;
}

```


i changed the dumping code from before like so:

```
        {
            // get main mesh
            Mesh m = this._Sora[0];

            if (m == null || m.mdlx == null || m.mset == null)
                return;

            T31 t = m.mdlx.alt31[0];

            // Generate the file name
            string filename = m.mset.motionId;

            // change file extension
            filename = filename.ToUpper().Replace("MSET", "ASET");

            // Create a new memory stream
            MemoryStream mat_data = new MemoryStream();
            BinaryWriter mat_writer = new BinaryWriter(mat_data);
            FileStream outfile = File.OpenWrite(filename);
            int max_ticks = 1;
            int bone_count = t.t21.alaxb.Count;
            int anim_count = listView1.Items.Count;

            long file_start = mat_writer.BaseStream.Position;

            mat_writer.Write(("ASET").ToCharArray(0, 4)); // bone count (4 bytes)
            mat_writer.Write((int)0); // padding (4 bytes)
            mat_writer.Write(bone_count); // bone count (4 bytes)
            mat_writer.Write(anim_count); // animation count (4 bytes)

            // get start of animation offset array
            long offsets_start = mat_writer.BaseStream.Position;

            // move past animation offset array
            mat_writer.BaseStream.Position += ((anim_count * 4) + (0x0F)) & (~0x0F);

            int anim_num = 0;
            // Get the frame count (ticks)
            foreach (ListViewItem lvi in listView1.Items)
            {
                string anim_name = lvi.Text;
                anim_name = anim_name.Replace('#', '_');

                // get motion info
                MotInf mi = ((MotInf)lvi.Tag);
                max_ticks = (int)mi.maxtick;

                // animation data position
                long anim_start = mat_writer.BaseStream.Position;

                // data offset array position
                mat_writer.BaseStream.Position = offsets_start + (anim_num * 4);

                // write animation data offset
                mat_writer.Write((int)anim_start); // bone count (4 bytes)

                // reset animation data position
                mat_writer.BaseStream.Position = anim_start;

                // write animation header
                mat_writer.Write((int)anim_num); // animation index (4 bytes)
                mat_writer.Write((int)max_ticks); // frame (tick) count (4 bytes)
                mat_writer.Write((int)0); // padding (4 bytes)
                mat_writer.Write((int)0); // padding (4 bytes)

                // write animation name
                mat_writer.Write(anim_name.ToCharArray(0, anim_name.Length));

                // move to matrix data start
                mat_writer.BaseStream.Position += (32 - anim_name.Length);

                // increment animation index
                ++anim_num;

                // output all the matrix transforms for each frame
                for (int i = 0; i < max_ticks; i++)
                {
                    // set current tick
                    tick = i;
                    // this tell his viewer to calculate the animation for the frame
                    this.calcbody(m.ctb, m, mi.mt1);

                    // output each matrix for each bone (matrix4x4 * 4 bytes)

                    for (int bn = 0; bn < bone_count; ++bn)
                    {
                        Matrix mat = m.Ma[bn];
                        /* Matrix Format
                           [M11][M12][M13][M14]
                           [M21][M22][M23][M24]
                           [M31][M32][M33][M34]
                           [M41][M42][M43][M44]
                        */
                        mat_writer.Write((float)mat.M11); mat_writer.Write((float)mat.M12); mat_writer.Write((float)mat.M13);
                        mat_writer.Write((float)mat.M14);

                        mat_writer.Write((float)mat.M21); mat_writer.Write((float)mat.M22); mat_writer.Write((float)mat.M23);
                        mat_writer.Write((float)mat.M24);

                        mat_writer.Write((float)mat.M31); mat_writer.Write((float)mat.M32); mat_writer.Write((float)mat.M33);
                        mat_writer.Write((float)mat.M34);

                        mat_writer.Write((float)mat.M41); mat_writer.Write((float)mat.M42); mat_writer.Write((float)mat.M43);
                        mat_writer.Write((float)mat.M44);
                    }
                }
            }

            // Output all the bytes to a file
            byte[] b_data = mat_data.ToArray();

            outfile.Write(b_data, 0, b_data.Length);

            outfile.Close();

            MessageBox.Show("Animation transforms dumped.", this.Text, MessageBoxButtons.OK, MessageBoxIcon.Information);
        }

```


At the moment it exports all animation presently loaded.  Was planning on adding a progress dialog so that you can tell that processing is still going on.  Feel free to modify it as necessary.  If i can fix whatever is causing the issues on my end, i'll post a modified version of the viewer here.  Other than that i should hopefully be able to post an updated plugin supporting the above format soon.
## Post #53
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-15T07:37:28+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Good Work revelations =D

But One only question: You say that you changed the file extension from MSET to ASET so when we want to load we have to change the MSET file Extensions to ASET if is as I undesrtand, after all isn't a problem we can use a bat file whit the REN command yet Inserted =D


For what regarding my list I'm compiling the PDF File =D

@KKDF2: As was yet said in this topic the ANB files are also a valid MSET animation.... and using you anb2msewt converter he can convert ANB to MSET but I find an issue:

Almost all ANB ( for B,F,N,M,..., Model ) work fine.... but...... when i try to convert the ANB of H Model ( spekable Model ) when I load in you viewer it messup the face section... =(
## Post #54
- Username: Shapyi
- Rank: ultra-n00b
- Number of posts: 5
- Joined date: Tue Aug 02, 2011 7:45 am
- Post datetime: 2011-08-15T07:49:02+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from revelation
>
> Well, i'll modify my plugin to load the format a little bit later, once i can fix whatever the heck it is i broke in the code that is keeping it from working the way it is supposed to when i recompile it.

i changed the format to support multiple animations per file so that it can be loaded in much the same way as the original MSET would have.  i simply changed the file extension to ASET instead.

Are you using the source code posted in this thread? Or do you have a better version? Because I can't get that to compile at all, maybe I didn't put enough time into it. 

Anyway, what kind of problems are you having? Can you be more specific? Your code looks good but I wanted to test it out to see if I can find any issues with it. Thanks.
## Post #55
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-15T09:29:46+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from Shapyi
>
> revelation wrote:Well, i'll modify my plugin to load the format a little bit later, once i can fix whatever the heck it is i broke in the code that is keeping it from working the way it is supposed to when i recompile it.

i changed the format to support multiple animations per file so that it can be loaded in much the same way as the original MSET would have.  i simply changed the file extension to ASET instead.

Are you using the source code posted in this thread? Or do you have a better version? Because I can't get that to compile at all, maybe I didn't put enough time into it. 

Anyway, what kind of problems are you having? Can you be more specific? Your code looks good but I wanted to test it out to see if I can find any issues with it. Thanks.

I'm according whit you, I'm too want to test your plugin revelations
## Post #56
- Username: chrrox
- Rank: Moderator
- Number of posts: 2602
- Joined date: Sun May 18, 2008 10:01 pm
- Post datetime: 2011-08-15T09:52:05+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

He is just posting the animation loading code not the entire plugin.
## Post #57
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-15T10:12:43+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from Xemnass
>
> Shapyi wrote:revelation wrote:Well, i'll modify my plugin to load the format a little bit later, once i can fix whatever the heck it is i broke in the code that is keeping it from working the way it is supposed to when i recompile it.

i changed the format to support multiple animations per file so that it can be loaded in much the same way as the original MSET would have.  i simply changed the file extension to ASET instead.

Are you using the source code posted in this thread? Or do you have a better version? Because I can't get that to compile at all, maybe I didn't put enough time into it. 

Anyway, what kind of problems are you having? Can you be more specific? Your code looks good but I wanted to test it out to see if I can find any issues with it. Thanks.

I'm according whit you, I'm too want to test your plugin revelations

Yhea, I 've yet Understood by myself indded i was mean  when he made the new Beta-Plugin =D XD
## Post #58
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-15T17:04:13+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Ladies and gentleman i will show you my List whit an improved graphic:


In this list still:
The Object section ( there is a lot of object so when I ahve more time i will do this )
and the MAP section( I will compile this very,very soon )

However This is the mdeol covered by my list:

B_ Model
H_ Model
M_ Model
N_ Model
P_ Model
W_ Model
WM_ Model

So the 90% of all the dump.


For this dump I've use the KHDumperX and the ISO of Kingdom Hearts II FInal Mix + =D =D =D =D =D

Enjoy, rate and Comment =D

List 1.0.PDF
[http://www.mediafire.com/?nspnj9r647dywjj](http://www.mediafire.com/?nspnj9r647dywjj)
## Post #59
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2011-08-15T22:20:10+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Well i have updated my plugin code to load the associated ASET file instead of MSET.  Now just have to create a working version of the conversion process and we'll be set.  Looks great for the animations that are currently processed correctly by the viewer.  i have attached the plugin here, and can hopefully have a working MSET to ASET conversion out sometime soon.  Since currently the animation data relies on the hierarchy information from the MDLX in order to compute the inverse transforms it automatically looks for an ASET file with the same name (as is output by the function i posted earlier).  i suppose i could include the hierarchy in the format so that drag and drop would be supported, but for now this is probably a bit safer.  i may add some more error checking later on as well.

i also need to do some more testing to determine what the best default frame rate is, as it seems a bit slow at 30 fps, but is good enough for initial testing.

Other than that i will still continue on investigating the MSET processing in more detail in order to get a more complete implementation of the animation data as i am able to make time for it.

Hope it helps.


EDIT: and for those that want to test... [http://www.mediafire.com/?tfub75a6mgngmk7](http://www.mediafire.com/?tfub75a6mgngmk7)  And yes, matrix keyframes enlarges the animation data that much...
[kingdom_hearts_2.rar](https://xentaxbackup.github.io/file/4632_kingdom_hearts_2.rar)
## Post #60
- Username: kkdf2
- Rank: beginner
- Number of posts: 24
- Joined date: Sun Oct 24, 2010 4:26 pm
- Post datetime: 2011-08-16T00:14:28+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Hi.

> Reply from Xemnass
>
> @KKDF2: As was yet said in this topic the ANB files are also a valid MSET animation.... and using you anb2msewt converter he can convert ANB to MSET but I find an issue:

Almost all ANB ( for B,F,N,M,..., Model ) work fine.... but...... when i try to convert the ANB of H Model ( spekable Model ) when I load in you viewer it messup the face section... =(

it is viewer's problem.
it'll cause if 3 or more vertices belong to one joint (skin weights). new release supports up to 5.

I fixed your issue some while ago. here is new one!
[http://kkdf2.sakura.ne.jp/pcsx2lair/Release_11.7z](http://kkdf2.sakura.ne.jp/pcsx2lair/Release_11.7z)
pass 2

would you plz try this release?

Thanks
## Post #61
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-16T12:34:26+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Allright =D

All of your improvement are good and are working perfectly:

@KKDF2: It's all perfect =D all function properly =D.

@Reveletions: Your plugin are working properly but:

The exported file (for me PSK and PSA) have a big size: 220.21 MB

An dthe Importing of PSA are a slowest.

But each my "ISSUE" i think, is fault if the model a model whit few animations will be imported fustest =D XD

However I want to tell you, KKDF2 and reevelations, how we can pack some MSEt into one, for example:

the ANB are valid MSET files but one ANB have one Animations, if in teh converter which you are writing maybe  can do this even will can be fantastic =D if it is possible =D Thankyou very Much =D



However, I say this again,:


YOU ARE DOING  A GOODEST JOB =D =D =D =D =D
## Post #62
- Username: ultimaespio
- Rank: mega-veteran
- Number of posts: 267
- Joined date: Thu Apr 15, 2010 2:55 am
- Post datetime: 2011-08-16T12:47:49+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

136mb when you use Dae. Took me 15 mins to export :O

Might be quicker and less painful to export just one animation at a time.

Actually after Importing, the animation is all mushed up in a ball.
## Post #63
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-16T13:28:57+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

For export asp PSK and PSA it took me 0.50 sec, is the importing part in 3dsMAX which take me 10 minute =(

But the animations is read succesfull:

ex.:
## Post #64
- Username: kkdf2
- Rank: beginner
- Number of posts: 24
- Joined date: Sun Oct 24, 2010 4:26 pm
- Post datetime: 2011-08-16T14:13:06+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Hi.

@revelation
it works great! it looks very beautiful in noesis.

> Reply from Xemnass
>
> However I want to tell you, KKDF2 and reevelations, how we can pack some MSEt into one, for example:

the ANB are valid MSET files but one ANB have one Animations, if in teh converter which you are writing maybe  can do this even will can be fantastic =D if it is possible =D Thankyou very Much =D

I wrote unpacker (mset file to anb files) and packer (anb file to mset file).

[http://kkdf2.sakura.ne.jp/pcsx2lair/Anb_n_Mset.7z](http://kkdf2.sakura.ne.jp/pcsx2lair/Anb_n_Mset.7z)
pass 2

GetAnb to unpack mset file.

Convert-each-Anb-to-Mset: drag all anb files and drop into it. then, packer'll ask you to select a folder to save mset files.

Thanks
## Post #65
- Username: ultimaespio
- Rank: mega-veteran
- Number of posts: 267
- Joined date: Thu Apr 15, 2010 2:55 am
- Post datetime: 2011-08-16T14:51:53+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Got it to import 

I had to use collada for the mesh, and PSA for the animation.
## Post #66
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-16T15:05:23+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from kkdf2
>
> Hi.

@revelation
it works great! it looks very beautiful in noesis.
Xemnass wrote:However I want to tell you, KKDF2 and reevelations, how we can pack some MSEt into one, for example:

the ANB are valid MSET files but one ANB have one Animations, if in teh converter which you are writing maybe  can do this even will can be fantastic =D if it is possible =D Thankyou very Much =D


I wrote unpacker (mset file to anb files) and packer (anb file to mset file).

http://kkdf2.sakura.ne.jp/pcsx2lair/Anb_n_Mset.7z
pass 2


GetAnb to unpack mset file.

Convert-each-Anb-to-Mset: drag all anb files and drop into it. then, packer'll ask you to select a folder to save mset files.

Thanks

Good Work =D
But there is a way to pack all MSET file obtained into One? If it is possible =D
## Post #67
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-08-17T15:11:56+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

It seems that kkdf2 has posted an update at [http://kkdf2.sakura.ne.jp/pcsx2lair/Anb_n_Mset_2.7z](http://kkdf2.sakura.ne.jp/pcsx2lair/Anb_n_Mset_2.7z) .
## Post #68
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-17T15:25:38+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Good Job =D
It is Incredibile   

YOU DID IT =D

You are the most incredible Team =D Thanks to all

Thanks kkdf2 for the MSET gathering =D
If you want I can do a little GUI. even if it isn't require XD

I am embarrassed I want to do something, anything, which I cand do for help you and this project =D = D XD
## Post #69
- Username: Devilot
- Rank: ultra-veteran
- Number of posts: 443
- Joined date: Tue Sep 07, 2010 5:12 pm
- Post datetime: 2011-08-17T17:02:25+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

personally I'd love a GUI, but that is the creator's choice to make.
## Post #70
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-17T18:47:22+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Yhea if KKdf2 want from the bat I can create a GUI, but, as you said, this choice have to make the Craetor himnself who is kkdf2 =D =D =D =D =D
## Post #71
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-18T12:05:48+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Investigating... I found this Example of how is loaded in Game mode the anb and the MDLX =D in HEX.....
 I Know that isn't the real method but, is a begin XD
## Post #72
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-18T14:30:48+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

!

Seriusly Problem!!!

I was doing some research and trial and i see an orrible things!!!!


According to my trial..... all the animations is rotatedof 90 grades.......


Anyone know how to rotate " even the animations??? "

Maybe this can add directly to the plugin =D if is possible to rotate XD
## Post #73
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-08-19T01:29:09+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

You just triple posted. I think I should make another post to keep you from making it four.
## Post #74
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-19T07:09:09+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from Mirrorman95
>
> You just triple posted. I think I should make another post to keep you from making it four.
 sorry......

But on equestion, ingeneral, what happen if a person make a lot of post??? I didn't never understand this XD


However,        Sorry Again
## Post #75
- Username: Darkfox
- Rank: VVIP member
- Number of posts: 688
- Joined date: Sat Jul 05, 2003 1:11 am
- Post datetime: 2011-08-20T20:16:01+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

A lot of good progress was made here. Is right now a process to go through but a working method is a working method. MSET to ASET would skip a lot of this instead of getting it through the hacked viewer, I'm assuming that is the file used by the importer.

And yes, it is only natural for the files to be very large, I haven't tested it yet but I believe the method used captures what you see, so a lot of extra frames exist in the animation. If I'm not mistaken, at least.
## Post #76
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-21T07:29:17+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

yhea you hav reason, for example:
in the DUSK animations, there a lot of frame for example in his normal motion in fact,finished his emotion he move his hand, only the hand for another 56 frame XD
## Post #77
- Username: Devilot
- Rank: ultra-veteran
- Number of posts: 443
- Joined date: Tue Sep 07, 2010 5:12 pm
- Post datetime: 2011-08-21T11:08:42+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

maybe this is normal? S-E is supposed to be a very scrupolous company, it would have made its models move properly!
## Post #78
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-22T08:55:00+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

instead.... i Think to another things, i think that the Sq****En***** use or physics or the Motion tracking via magnetic scanner =D so it's normal encounter some extra frame... XD
And for finish, i think that the Crystal Engine can control the numbers of frame to use XD =D Unfortunately nobodies...... can steal a build or a copy of the Crystal Engine............ =(
## Post #79
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-08-24T03:51:09+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

kkdf2, although this is a little late, let me be the first to say how great revision 11 is. Before, facial animations were a mess. Now I can view all the highpoly animations correctly without having to use yaz0r's latest viewer, which although is more advanced and can animate map files, can't run on lower-end graphics cards like the one on my laptop.

Revelation, your newest KH2 plugin update works splendidly with the ASET, which is a great proof-of-concept. The only reason I hadn't commented on it earlier is because I wasn't logged in when I look at that post the first time, and wasn't even aware of the link's existence until significant hindsight. If we had a converter to decompress the MSETs into ASETs, or better yet pack multiple ANBs into MSETs, we could run and convert all the animations of Kingdom Hearts 2 with ease.

Xemnass, I didn't have a problem with you triple posting, but my experience with Admins and Moderators has made it clear that they don't like multiple posting. I didn't intend to invoke so many frowny faces.

I have no doubt that full conversion of KH2 animations will be achievable soon. I only wonder if we will ever be able to make something to view Birth By Sleep PAMs. I think Truthkey told me he might be able to work on an OBJ to PMO converter, if he had full documentation of the PMO format outline, which has never been made fully available. But anyway, keep up the good work everyone!
## Post #80
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2011-08-24T04:54:36+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

As far as double and triple (and so on) posting is concerned, while it is generally preferred that you edit your post rather than posting again, there are situations where it is not just acceptable, but appropriate - for instance, if it's been a few hours since your last post, and you're not adding some trivial thought, writing a new post is probably better than editing your post, since members don't get notified of post edits, but only of new posts. When you're doing work like this, and you have something to add pretty much any time after maybe 15 minutes to half an hour later, a new post is probably preferable.

Don't worry so much about it this time; the main reason double posting is generally frowned upon is because most of the time, double posters aren't really adding anything of value with their additional posts.
## Post #81
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-27T14:07:58+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Sorry fro the late reply XD

However
@Dinoguy1000: Thanks ^_^

@Mirrorman95:I'm according whit you however:
--@PAM: I'm searching a metjod to unpack the PAM animations but whn I try whit the KHBbS Modding Stations,he give me 
              an error XD
--@me:XD
--@Pluggin-anbpack: Yhea, was two very goodest improvement to this project =D


Good Joob to all =D

I almost finish the MAP list and then i will write th object list XD
## Post #82
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-08-28T21:02:11+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from Xemnass
>
> Sorry fro the late reply XD

However
@Dinoguy1000: Thanks ^_^

@Mirrorman95:I'm according whit you however:
--@PAM: I'm searching a metjod to unpack the PAM animations but whn I try whit the KHBbS Modding Stations,he give me 
              an error XD
--@me:XD
--@Pluggin-anbpack: Yhea, was two very goodest improvement to this project =D


Good Joob to all =D

I almost finish the MAP list and then i will write th object list XD

You may have better luck unpacking the PAMs if you use Modding Station 1.5.4 on each decrypted DAT individually.
## Post #83
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-29T11:33:12+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Me:I've yet extracted the PAM's File onlky when i try to unpack the PAM file he give me error
You:.... Decrypting the dat files
Me: Decrypting hm...... you think thta whit the decription can change somethings?
## Post #84
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2011-08-29T15:33:12+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Thanks to kkdf2, i now have a version of things working and can post it up for you all to test.

Main addition on my part is really only the ASET export.  The Animation list view now has check boxes.  If none are selected then all animations will be output, otherwise you can select only a few of them, etc.  Clicking the column header allows for toggling selection of all or none of the animations in the list.  The export process can take a bit, depending on how many animation you decide to export, so i added a progress dialog to show the processing status.

Not overly sophisticated, but should be enough to play around with.  i am sure it could use some good testing, so let me know if anything breaks horribly, heh.

[http://www.mediafire.com/?xym4yaa75qjvdpt](http://www.mediafire.com/?xym4yaa75qjvdpt)

Have fun.
## Post #85
- Username: ultimaespio
- Rank: mega-veteran
- Number of posts: 267
- Joined date: Thu Apr 15, 2010 2:55 am
- Post datetime: 2011-08-29T16:48:53+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Seems to be working fine so far, only thing though, when you export an aset it only exports it for one model. So if I had Sora with his keyblade, it would only export an aset for Sora.

Everything else works fine
## Post #86
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2011-08-29T20:07:11+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Ah.  Yeah, i don't use the Bind Controller much at all.  Most keyblade animation movement comes from the joint they are attached to in the base model, not from their own MSET, so most of the time even if small things like a chain on them are animated, it is not completely necessary.

Would probably be more useful to be able to batch export, since you can simply drag a keyblade on the viewer and export it separately if needed.

But this was mainly to tide people over that were interested in the animations, as i will mostly be continuing to debug the actual MSET format processing in order to alleviate the need for the emulated ps2 instructions.  That has been my main goal.  This was mostly just a diversion to allow those interested in them to access them in the meantime, heh.

Hope it is at least useful for now.
## Post #87
- Username: ultimaespio
- Rank: mega-veteran
- Number of posts: 267
- Joined date: Thu Apr 15, 2010 2:55 am
- Post datetime: 2011-08-29T20:10:08+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Thanks, I'll find a way around it for now.

It's really nice to be able to see all the animations like that
## Post #88
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-30T12:03:09+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from revelation
>
> 
Hope it is at least useful for now.
Are you kidding????
You and kkdf2 did the impossible!!! and you say only "hope it is at least usefull for now  "?
Guys, You DID IT!!!
But now I'm very embarassed   realy if I can help you in everythings!! I wont to do somethings XD i'm very embarassed =D



However, i re-say it again:

YOU DID THE IMPOSSIBLE, YOU DID IT =D =D =D =D =D

You have my Respect! XD


However Mirrorman have reason, whit this other and imprtant improvement we can archieve this "problem" as solved very soon =D YOU DID IT!!! YOU, GUYS, YOU ARE AMAZING =D =D =D =D =D




Proof:






Only one things when i export mset made by anb seems that the 3 bones which controll the down mounth seems as if Riku he's biting his lip:


This occured only into Noesis and then seems that the lip tremble

If you want to try:
MDLX+MSET+ASET
[http://www.mediafire.com/?e1y6mj7v6bm1ep2](http://www.mediafire.com/?e1y6mj7v6bm1ep2)
## Post #89
- Username: ultimaespio
- Rank: mega-veteran
- Number of posts: 267
- Joined date: Thu Apr 15, 2010 2:55 am
- Post datetime: 2011-08-30T15:53:49+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

It works really well. I couldn't find an animation for High Poly Roxas Dual wielding, so I had to copy his normal playable one:



The normal and Highpoly models are built the same until you get to their faces. So if you rename a couple of bones, you can transfer animations/poses between them.
## Post #90
- Username: Devilot
- Rank: ultra-veteran
- Number of posts: 443
- Joined date: Tue Sep 07, 2010 5:12 pm
- Post datetime: 2011-08-30T15:57:35+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

a most excellent idea! use battle animations for highpoly models!

but, how do you recognize a lowpoly from a highpoly?
## Post #91
- Username: ultimaespio
- Rank: mega-veteran
- Number of posts: 267
- Joined date: Thu Apr 15, 2010 2:55 am
- Post datetime: 2011-08-30T16:00:53+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Highpoly ones have more depth. They have moveable eyes and mouths and the like. Roxas' is H_EX510.MDLX.

While I'm here, has anyone found W_EX010_RX_BTLF_L.mset?
## Post #92
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-30T18:45:04+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Sorry but  I didn't make the list for nothngs,

My list show you all model name (ex. H_ex710.mdlx, N_Ex75.mdlx ecc...) and their relativ character connected to them (Riku, etc...)


The H model is the Higpoly model cause they can "speak"
The B model is the Battle model
The N Model is for the NPC character
The W Model is the Weapon Model
The M model is the Enemyes Model
Ecc...


Please Read my list I did that for help everyone =D, i relink my List whitout you have to find it in the discussion:
List 1.0.pdf
[http://www.mediafire.com/?nspnj9r647dywjj](http://www.mediafire.com/?nspnj9r647dywjj)


P.S.=@Mset:Yuo can insert his name in the nametable of falo's dumper
## Post #93
- Username: Devilot
- Rank: ultra-veteran
- Number of posts: 443
- Joined date: Tue Sep 07, 2010 5:12 pm
- Post datetime: 2011-08-30T20:44:15+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

thank you! still can't find falo's dumper but it is a good idea.
## Post #94
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-08-30T21:42:44+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from Devilot
>
> thank you! still can't find falo's dumper but it is a good idea.

Happy for been of any help =D
## Post #95
- Username: Devilot
- Rank: ultra-veteran
- Number of posts: 443
- Joined date: Tue Sep 07, 2010 5:12 pm
- Post datetime: 2011-09-05T08:52:46+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

can someone post pictures/videos of Kh1 animations?
## Post #96
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-09-05T09:19:53+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

I've yet posted =D in the before page they work all well whit 3dsmax =D Using my trick XD =D
## Post #97
- Username: Devilot
- Rank: ultra-veteran
- Number of posts: 443
- Joined date: Tue Sep 07, 2010 5:12 pm
- Post datetime: 2011-09-05T09:27:51+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

that is a kh2 anim  I ask because I am far from my usual hardware and can't test it.
## Post #98
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-09-05T09:38:20+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

XD and.., unfortunately I'm migrating and i'm making order in my room so I can power on my laptop(I have there my files) and show you a proof as can i can do it i will post ok?
## Post #99
- Username: Devilot
- Rank: ultra-veteran
- Number of posts: 443
- Joined date: Tue Sep 07, 2010 5:12 pm
- Post datetime: 2011-09-05T09:42:22+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

too kind
## Post #100
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-09-05T09:56:34+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Sorry, but for "migrating" i wasn't mean  "migrating from Italy to another nation"  I mean form a room to another XD   I ha d all of my 5 computer (two mac excluded) all in the DSalon which is big  but now, which the Summer is over, and i have to return to school (this year i will do the Ninth Grade =D after all I have 14 Years old =D) i have to remake order in my house, although my parent will kill me or my pc or even my pc and I XD after a lll  is not a difficult task XD and, after all I Love go to school  =D
## Post #101
- Username: BakameExcalibur
- Rank: advanced
- Number of posts: 68
- Joined date: Wed Feb 02, 2011 8:02 am
- Post datetime: 2011-09-06T23:54:42+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Apologies if it's been uploaded somewhere in this topic/forum, but can someone point me to where KHDumperX is, or a dumper that can extract the .ASET files from my US KHII disc? (I don't have Final Mix+, since it was never released Stateside.)
## Post #102
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-09-07T04:08:18+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

The KH2DumperX is at [http://xeeynamo.blogspot.com/2011/07/ki ... l-mix.html](http://xeeynamo.blogspot.com/2011/07/kingdom-hearts-ii-final-mix.html) . It can't extract ASETs themselves; only Revelation's modified khkh xldMii can turn MSETs to ASETs.

Also, does anyone think we could make a program to separate the bones and textures and meshes from MDLXs just like BBS Modding Station can do with PMOs?

And kkdf2, what's with your new ball game?
## Post #103
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-09-07T12:37:02+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

@separating the things:
I think that we can do this XD according to kkdf2's documentation which i re-uploaded there was written and was shown how the mdlx is do (  TIM header, Mesh Header, Bones Header ) so i think that is possible =D, I think XD
## Post #104
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-09-07T23:07:42+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

I guess we could do that. A simple deconstruction.

By the way, kkdf2 has updated his KH2 Map Viewer and Extraction programs so that now, you can drop a two-dimensional rectangle into any map area. [http://kkdf2.sakura.ne.jp/pcsx2lair/expack1g'.7z](http://kkdf2.sakura.ne.jp/pcsx2lair/expack1g%27.7z)
## Post #105
- Username: BakameExcalibur
- Rank: advanced
- Number of posts: 68
- Joined date: Wed Feb 02, 2011 8:02 am
- Post datetime: 2011-09-07T23:56:23+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

@Mirrorman95 Thanks! Got everything re-extracted and dumped, and am currently assigning ASETs to the appropriate characters.
Still got a question, and that is if there's a way to get .ANBs packed into an .ASET or .MSET. Would just packing the appropriate .ANBs into a .zip labeled as a .MSET work?

edit: Nope, packing didn't work.
## Post #106
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-09-08T01:28:22+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

You can only pack ANBs into ASETs by using kkdf2's anb2mset converter and then loading the mset(s) in Revelation's modified Release 11 of kkdf2's MDLX viewer.
## Post #107
- Username: BakameExcalibur
- Rank: advanced
- Number of posts: 68
- Joined date: Wed Feb 02, 2011 8:02 am
- Post datetime: 2011-09-08T01:40:42+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

...there's a converter? Link? ^^; Sorry if it's a hassle...
## Post #108
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-09-08T02:36:41+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

[http://kkdf2.sakura.ne.jp/pcsx2lair/Anb_n_Mset_2.7z](http://kkdf2.sakura.ne.jp/pcsx2lair/Anb_n_Mset_2.7z) converts Anb to Mset.
## Post #109
- Username: BakameExcalibur
- Rank: advanced
- Number of posts: 68
- Joined date: Wed Feb 02, 2011 8:02 am
- Post datetime: 2011-09-08T03:52:53+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Thanks! Just curious though, is there a way to get all of a character's ASETs to play in Noesis, or would I have to manually rename for each one I want to play?

edit: Also, been seeing a lot of "Unhandled exception" errors when trying to run these converted MSETs through khkh_xldM ][ (Yes, I'm using Revelation's mod of release 11, the one that can make ASETs). Dunno where or what exactly could be causing the errors (either xldM needs debugging, or the ANB-to-MSET converter has bugs), but I'd just thought I'd bring it to the project's attention.
## Post #110
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-09-08T11:47:08+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from BakameExcalibur
>
> Thanks! Just curious though, is there a way to get all of a character's ASETs to play in Noesis, or would I have to manually rename for each one I want to play?

edit: Also, been seeing a lot of "Unhandled exception" errors when trying to run these converted MSETs through khkh_xldM ][ (Yes, I'm using Revelation's mod of release 11, the one that can make ASETs). Dunno where or what exactly could be causing the errors (either xldM needs debugging, or the ANB-to-MSET converter has bugs), but I'd just thought I'd bring it to the project's attention.

Yhe as a beta & developer "preview" of the meet and ANB gathers and the Ve.11 modded have their own bug but some time some bug depend of your computer, may can be fault of your processor, Video Card, or the C#,C++ redistributable version that you have for example some meet converted from an ANB on my laptop give me some error, in my PC which i made didn't give to me any error and the exporting process was very fast =D

Let us know =D
## Post #111
- Username: BakameExcalibur
- Rank: advanced
- Number of posts: 68
- Joined date: Wed Feb 02, 2011 8:02 am
- Post datetime: 2011-09-08T17:05:06+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Just for technical reasons, I guess I should post the relevant specs of my computer:

CPU: 1.86 GHz Intel Core 2 Duo
GRAPHICS: Nvidia GeForce 9400 GT, 1 GB of video RAM, DirectX 9 since I still have Windows XP >_>;
C++ REDISTRIBUTABLE: Microsoft C++ 2010, not sure if there's others that I might need.
## Post #112
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-09-08T17:09:51+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from BakameExcalibur
>
> Just for technical reasons, I guess I should post the relevant specs of my computer:

CPU: 1.86 GHz Intel Core 2 Duo
GRAPHICS: Nvidia GeForce 9400 GT, 1 GB of video RAM, DirectX 9 since I still have Windows XP >_>;
C++ REDISTRIBUTABLE: Microsoft C++ 2010, not sure if there's others that I might need.

Mhm..... I don't think that is an hardware/software problem... can you post the mdlx and the meet?
## Post #113
- Username: BakameExcalibur
- Rank: advanced
- Number of posts: 68
- Joined date: Wed Feb 02, 2011 8:02 am
- Post datetime: 2011-09-08T19:20:16+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

You mean a model and its associated MSETs? Okay, but knowing my luck, they'll work fine on your computer. >_>;

edit: ...or not want to upload as an attachment at all. Anyone else get a 500 Internal Server Error when they try to upload an attachment?
edit 2: Ended up just uploading it to Mediafire. [Here you go.](http://www.mediafire.com/?3xb86xxcrwzq4an)
## Post #114
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-09-10T13:49:51+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Sorry for the late reply... so I tested it and i found your same erro This is the log:

```
ee1Dec.C.RecfnnotFound: Recfn not found: rc1 00129514
   in ef1Declib.Mlink.Permit(Stream fsMdlx, Int32 cnt1, Stream fsMset, Int32 cnt2, UInt32 offMsetRxxx, Single tick, MemoryStream os)
   in khkh_xldMii.FormII.calcbody(CaseTris ct, Mesh M, Mt1 mt1, Single _tick, UpdateFlags flags)
   in khkh_xldMii.FormII.recalc()
   in khkh_xldMii.FormII.numericUpDownTick_ValueChanged(Object sender, EventArgs e)
   in System.Windows.Forms.NumericUpDown.OnValueChanged(EventArgs e)
   in System.Windows.Forms.NumericUpDown.set_Value(Decimal value)
   in khkh_xldMii.FormII.listView1_SelectedIndexChanged(Object sender, EventArgs e)
   in System.Windows.Forms.ListView.OnSelectedIndexChanged(EventArgs e)
   in System.Windows.Forms.ListView.WmReflectNotify(Message& m)
   in System.Windows.Forms.ListView.WndProc(Message& m)
   in System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   in System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   in System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

```


I tryed also to convert directly this animation to ASET but unfortunately didn't apperal even teh file XD i think taht is a Matrix problem howeve little trick i want to suggest t you XD


Whit the second version of the Anb2Mset you can gather all anb to one mset directly if yo didn't find the Second version, i will re-link to you here:

[http://kkdf2.sakura.ne.jp/pcsx2lair/Anb_n_Mset_2.7z](http://kkdf2.sakura.ne.jp/pcsx2lair/Anb_n_Mset_2.7z)
## Post #115
- Username: BakameExcalibur
- Rank: advanced
- Number of posts: 68
- Joined date: Wed Feb 02, 2011 8:02 am
- Post datetime: 2011-09-11T04:31:49+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Thanks for the tip, but I already have the tool. 

How do you get the multiple-ANB-to-one-MSET thing to work? All I got was

```
System.ArgumentNullException: Buffer cannot be null.
Parameter name: buffer
   at System.IO.MemoryStream..ctor(Byte[] buffer, Boolean writable)
   at khkh_xldMii.FormII.loadMset(String fmset, Int32 ty)
   at khkh_xldMii.FormII.LoadOf(Int32 x, String fp)
   at khkh_xldMii.BCForm.p1_DoubleClick(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnDoubleClick(EventArgs e)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
```


when I tried that tool.

edit: Well, I got Selphie's to work. I'll try again with the one that broke and see if I get something else.

edit 2:... or not. Still got that recfn error message.
## Post #116
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-09-11T09:29:57+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from BakameExcalibur
>
> Thanks for the tip, but I already have the tool. 

How do you get the multiple-ANB-to-one-MSET thing to work? All I got was
Code: Select all************** Exception Text **************
System.ArgumentNullException: Buffer cannot be null.
Parameter name: buffer
   at System.IO.MemoryStream..ctor(Byte[] buffer, Boolean writable)
   at khkh_xldMii.FormII.loadMset(String fmset, Int32 ty)
   at khkh_xldMii.FormII.LoadOf(Int32 x, String fp)
   at khkh_xldMii.BCForm.p1_DoubleClick(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnDoubleClick(EventArgs e)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

when I tried that tool.

edit: Well, I got Selphie's to work. I'll try again with the one that broke and see if I get something else.

edit 2:... or not. Still got that recfn error message.


What  you mean whit:
How do you get the multiple-ANB-to-one-MSET thing to work? All I got was...

The references that you posted belong to the viewer... but I still don't understand what error gave to you the MSET Gather.... maybe some ann need some accurate research for find the gooiest matrix to convert to Mset maybe some ann have some matrices that is wrong interpetated by the ann converter or by the viewer =D
 Indeed even some "official" MSET give some error whit the viewer so it is a mset( I think ) Matrix based error, if O have reason I don't know how help you ( If I understood correctly the question ) =D

Let e know =D
## Post #117
- Username: kkdf2
- Rank: beginner
- Number of posts: 24
- Joined date: Sun Oct 24, 2010 4:26 pm
- Post datetime: 2011-09-12T11:49:49+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Hi.

> ee1Dec.C.RecfnnotFound: Recfn not found: rc1 00129514
I'll fix this problem. It says procedure 00129514 is missing. It needs to be converted. For now there are 978 converted procedures in your ef1Declib.

Then I'll ask revelation for updating...

> And kkdf2, what's with your new ball game?
Sorry, it is not implemented yet!

Thanks
## Post #118
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-09-12T14:09:17+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from kkdf2
>
> 
Thanks???
Thanks to you instead =D XD =D =D =D =D

Edit:
New function, i found, in th edusk animations:

rc1 0012CD9C

hopping to be of any help =D XD
## Post #119
- Username: kkdf2
- Rank: beginner
- Number of posts: 24
- Joined date: Sun Oct 24, 2010 4:26 pm
- Post datetime: 2011-09-13T12:52:56+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Hi.

> Reply from Xemnass
>
> kkdf2 wrote:
Thanks???
Thanks to you instead =D XD =D =D =D =D

Edit:
New function, i found, in th edusk animations:

rc1 0012CD9C

hopping to be of any help =D XD
Thank you!

It'll be fixed now!

Here is a standalone ef1Declib.dll release.
[http://kkdf2.sakura.ne.jp/pcsx2lair/ef1 ... 0110913.7z](http://kkdf2.sakura.ne.jp/pcsx2lair/ef1Declib_20110913.7z)
pass 2

Please replace ef1Declib.dll in your khkh_xldMii folder with new one.

Replacing ef1Declib.dll will work on revelation's modified version too.
## Post #120
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-09-13T20:34:53+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from kkdf2
>
> Hi.
Xemnass wrote:kkdf2 wrote:
Thanks???
Thanks to you instead =D XD =D =D =D =D

Edit:
New function, i found, in th edusk animations:

rc1 0012CD9C

hopping to be of any help =D XD
Thank you!

It'll be fixed now!

Here is a standalone ef1Declib.dll release.
http://kkdf2.sakura.ne.jp/pcsx2lair/ef1 ... 0110913.7z
pass 2

Please replace ef1Declib.dll in your khkh_xldMii folder with new one.

Replacing ef1Declib.dll will work on revelation's modified version too.

Thank You again, tomorrow i will download and test it =D Thanks for the fastest improvement of the library =D
## Post #121
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-09-13T20:50:00+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Listen, something in revelation's version of the program is preventing N_EX950 from playing EEH20403E, and, perhaps, any other animation, as is for those recently posted Kairi animations. It doesn't occur in your version, though. To be clear, it is completely unrelated to this new dll update. Somehow, we just can't import everything to ASET format.
## Post #122
- Username: BakameExcalibur
- Rank: advanced
- Number of posts: 68
- Joined date: Wed Feb 02, 2011 8:02 am
- Post datetime: 2011-09-13T21:30:55+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from kkdf2
>
> Hi.
Xemnass wrote:kkdf2 wrote:
Thanks???
Thanks to you instead =D XD =D =D =D =D

Edit:
New function, i found, in th edusk animations:

rc1 0012CD9C

hopping to be of any help =D XD
Thank you!

It'll be fixed now!

Here is a standalone ef1Declib.dll release.
http://kkdf2.sakura.ne.jp/pcsx2lair/ef1 ... 0110913.7z
pass 2

Please replace ef1Declib.dll in your khkh_xldMii folder with new one.

Replacing ef1Declib.dll will work on revelation's modified version too.
Thanks! Animations are working now!
## Post #123
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-09-16T15:09:56+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

kkdf2 has updated his map viewer again with batch export for various KH2 filetypes, including MDLX, MAP, ARD, and others! [http://kkdf2.sakura.ne.jp/pcsx2lair/expack1h.7z](http://kkdf2.sakura.ne.jp/pcsx2lair/expack1h.7z)
## Post #124
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-09-16T15:50:49+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Perfect =D now what we need is to find a repacker for the File Cause KHDumperX can  even repack the files into the ISO =D
## Post #125
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-09-17T05:08:56+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

He has that as well. [http://kkdf2.sakura.ne.jp/pcsx2lair/repack1b.7z](http://kkdf2.sakura.ne.jp/pcsx2lair/repack1b.7z)
## Post #126
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-09-23T15:21:00+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from Mirrorman95
>
> He has that as well. http://kkdf2.sakura.ne.jp/pcsx2lair/repack1b.7z
Thanks =D sorry for the late repl =D
However I found a lot of missing Instructions i'm doing a list of it =D, recentl teh school is begun fro me to XD so, as a boy of 14 years old, m prryority is school =D so sometimes i can do a late reply like this =D XD

Sorry again fro the late reply =D


=D =D =D =D =D
## Post #127
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-09-24T12:59:30+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Hello everybody, I want to tell you that a my new friend, a my Italian new friend, will join in this researches and.....

However, first i will tell you who is him, he is our old frends.... Xeeynamo

However, he will join to our researches and ihe had ea big project, do a Engine.... and he want to ask if Reevelations and KKDF2 want to help us =D i can do the the Cutscene editor XD if you want However, the rest of the things that he want to say I let it in him hand so, later this breaking news, i will turn to my work of catalogation, I'm cataloging every single file muahahah XD


However, as i always say, Everybody that i helpingg , helped, and theta will help us as KKDF2, Reevelations and Sophy did, and iI'msure will do, everybody, represent new step for Archieve this case, and this project and finally make  the word "Succesfuly Ended" to our Project, and i want to ask if some mod can map ethos topic highlighted XD Thank in Advance =D

=D =D =D =D =D
## Post #128
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-09-24T20:27:19+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

You can actually make a cutscene editor? And you're working with Xeeynamo's OpenKH? That sounds promising.
Tell me, have you managed to do anything substantial with kkdf2's repacker?
## Post #129
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-09-24T20:39:43+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

I'm studying it XD =D

Then the project will start when kkdf2, revelations and whoever that have a good knowledge about this kinda of format etc, so whoever are contributing to this project XD, even you Mirrorman95, if you want you can join, i yet see you tat have a good knowledge you can help me whit the cutscene Editor XD =D
However we have to speak directly to Xeenyamo for joing.. I don't think that i can invite whoever whiteout his permission, I think XD, however he said that whoever that have a good knowledge is the welcome =D

=D =D =D =D =D
Let me know, Mirrorman XD =D =D =D =D =D

Little Edit:

KKDF2 has updated his expacker:[http://kkdf2.sakura.ne.jp/pcsx2lair/expack1h.7z](http://kkdf2.sakura.ne.jp/pcsx2lair/expack1h.7z)
## Post #130
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-09-24T21:06:34+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

I kind of already mentioned the unpacker update earlier in the page. Although I do try to make the most of the tools that are made, I really don't understand file formats or programming beyond basic Java anyway. I don't really have time, either, so I'd be pretty much useless in this project.
## Post #131
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-09-24T21:19:02+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from Mirrorman95
>
> I kind of already mentioned the unpacker update earlier in the page. Although I do try to make the most of the tools that are made, I really don't understand file formats or programming beyond basic Java anyway. I don't really have time, either, so I'd be pretty much useless in this project.
XD Howver, everybody do what hehe want to do =D if you don't have time, take it easy,  is not important however XD =D =D =D =D =D

I've extracted some interesant Graphics and i will post XD

However as repacked, i was mentioning:

The new expacker of KKDF2 let us extract all the graphics, and if I mod that graphics, there is a way to reimport, or, at the least, inject it to the original file? XD =D =D =D =D =D

However that is the Pack:
[http://www.mediafire.com/?5kpbc3al5pv2nf0](http://www.mediafire.com/?5kpbc3al5pv2nf0)
this pack may can interess even to Xeenyamos for his translating task XD =D =D =D =D =D

Hoping that I've been of any help =D =D =D =D =D
## Post #132
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-09-26T00:46:59+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

I think kkdf2 might be able to make an kh2 resource exporter, if he has time. Now, I've been wondering, although this goes a little off-topic, do you think we would be able to make a model viewer/plugin for KH3D when it comes out?
## Post #133
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-09-26T12:39:55+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Hiahaihiahaiha


Obviusly I'm sure that when KH3D come out we(whoever that will want) will be the first to try a:

Fisrt: Try and find a method to how to open and find "things" into a 3ds ROM, then

If you have afraid  of the "3D" world, take it easy XD =D

If you noticed the 3DS enviroment have a switch, so a variable, tha can turno ON/OFF the 3D so it is a stereoscopical 3D, the game is not projected for a 3D model, but is normal model that appear in 3D.

Explanation:

Some films that you can see at a cinema sometimes, you think, that is a real/strange 3D feel... but is not this:

In the realty there is the fusion of 2 parallel image one for eyes, whit some pixel of distance between this image... Thi make the fell of a Real 3D but unfotunately nobody can do a rela 3D although you use the Olographic 3D XD

=D =D =D =D =D

If my explanation is not too easy to understand or i do some error, please report this commentig to the topic XD

However The DS have almost alway the same encryption method for the 3D model, the hard, is to find a way to open and extract the contents of that ROOM XD
## Post #134
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-09-26T14:54:34+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Yeah, I guess then if the 3DS ROMs have the same file system as NDS ROMs, and they also use NSBMD, it should be easy to extract/view. In the meantime, I also wonder, after spending so much time looking at the KH2 MSETs and assets, will it even look interesting anymore?
## Post #135
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-09-26T18:03:38+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Hiahihaiahihaiaiah

Yhea XD, whoever you have almost reason, i will explain:

1st)Yhea, I'm according whit you, you mean, after a lot of time that we did the impossible searching for a method to extract MSET assets, the scond things may can be no more excited lie this.....
2nd) ALtough the previously argument is a good argument.... You always remember and don't ever forgive that:
An Hacker/person like us and like everybody like you, and everybody in this forum, I think that his forum was made for improve our Knowledged horizon, every things that may can seems bored, or not excited, is however a things that have is part of Knowleedged, for me, at least, is this, this is my Idea... My think.... My creed... My conviction...... Maybe some times i will not accept a fail.... but.... after all I, like everybody, I guess, will fight for know even that little part of Knowledged =D =D =D =D =D
## Post #136
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-09-27T15:59:50+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

In the meantime, a while ago Truthkey said he would try to make an OBJ2PMO program, but he didn't have documentation on the PMO file structure. When I suggested asking Revelation, he said he didn't think it was right as he had already asked him to create PAM and PMP plugins for BBS animations and maps, respectively. Although, technically, you could just break apart a PMP and recombine it with his program, you still couldn't see how all the pieces line up.
## Post #137
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-09-27T16:10:01+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from Mirrorman95
>
> In the meantime, a while ago Truthkey said he would try to make an OBJ2PMO program, but he didn't have documentation on the PMO file structure. When I suggested asking Revelation, he said he didn't think it was right as he had already asked him to create PAM and PMP plugins for BBS animations and maps, respectively. Although, technically, you could just break apart a PMP and recombine it with his program, you still couldn't see how all the pieces line up.

Yhea... Anyway... I was thinking about one things:
When we export the map we have "2 problem":
Some transparent Texture: ( Which i solved =D )
And the weather environment.....

Anybody know here how to "move the water"?....

However a things that i noticed, tab the only model that have some kinda of problem whit the instructions is only the ANB only a few "normal model" make some Error of instruction =D XD =D =D =D =D
## Post #138
- Username: UltimateSora
- Rank: beginner
- Number of posts: 25
- Joined date: Fri Jun 24, 2011 2:56 am
- Post datetime: 2011-10-07T19:00:25+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Hi, I've read every page of this topic. But I haven't figured out how You get the KH2 animations into Noesis? I put Sora's mdlx, mset and aset all into the same folder. But when I load the mdlx into Noesis it doesn't have any animations.   What am I suppose to do?

Thanks.
## Post #139
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-10-07T19:59:22+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Did you replaced the plugin whit the new beta plugin of Revelations? ( [download/file.php?id=4632](http://forum.xentax.com/download/file.php?id=4632) ) ???
## Post #140
- Username: UltimateSora
- Rank: beginner
- Number of posts: 25
- Joined date: Fri Jun 24, 2011 2:56 am
- Post datetime: 2011-10-07T21:04:35+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from Xemnass
>
> Did you replaced the plugin whit the new beta plugin of Revelations? ( download/file.php?id=4632 ) ???

Thanks, that worked.   I guess I missed that part.
## Post #141
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-10-11T20:54:29+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from UltimateSora
>
> Xemnass wrote:Did you replaced the plugin whit the new beta plugin of Revelations? ( download/file.php?id=4632 ) ???

Thanks, that worked.   I guess I missed that part.

Happying That I Helped You =D =D =D =D =D
## Post #142
- Username: ultimaespio
- Rank: mega-veteran
- Number of posts: 267
- Joined date: Thu Apr 15, 2010 2:55 am
- Post datetime: 2011-10-12T21:33:31+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

I've found a bug with ASET exporting, it won't export animations that only have 1 frame.

I've been trying to export ETT11711E.anb inside p_ex110 in the Twilight Town folder.

Do I need to upload the anb?
## Post #143
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-10-14T00:49:24+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

If it only has one frame, couldn't you just take a 3D capture? Or would that screw up the model? Come to mention it, the ASET exporter on the whole is not entirely complete. There are several instances where it just won't transpose the animations. Perhaps someone could fix it, and since it's in C# or C++ or whatever, it's totally decompilable and editable with a C-something editor. I'm pretty sure Revelation already had to do that in order to modify the program at all, so we just have to go in there, identify the problem, and fix it. But since I really only know Java, and not C-based languages, nor do I understand any programming involving 3D model formats, I would be as usual completely useless to such an endeavor. I really only come here because other people can make programs, and I can fully utilize them in going over hundreds of files.
So yeah, it's not complete, but it shouldn't be too hard for someone with basic knowledge of this version of C and such 3D programming skills, like kkdf2 or revelation, to fix it.
## Post #144
- Username: MrAdults
- Rank: Moderator
- Number of posts: 1007
- Joined date: Mon Mar 23, 2009 9:57 am
- Post datetime: 2011-10-15T13:13:41+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from Mirrorman95
>
> If it only has one frame, couldn't you just take a 3D capture? Or would that screw up the model? Come to mention it, the ASET exporter on the whole is not entirely complete. There are several instances where it just won't transpose the animations. Perhaps someone could fix it, and since it's in C# or C++ or whatever, it's totally decompilable and editable with a C-something editor. I'm pretty sure Revelation already had to do that in order to modify the program at all, so we just have to go in there, identify the problem, and fix it. But since I really only know Java, and not C-based languages, nor do I understand any programming involving 3D model formats, I would be as usual completely useless to such an endeavor. I really only come here because other people can make programs, and I can fully utilize them in going over hundreds of files.
So yeah, it's not complete, but it shouldn't be too hard for someone with basic knowledge of this version of C and such 3D programming skills, like kkdf2 or revelation, to fix it.
It is occasionally entertaining to read the ideas some of you guys have about this whole process. Entertaining in the "hahaha, wow, no" sort of way.

Native binary is not decompilable and editable with a C-something editor, unless you want to end up with a potentially even more horrifying (and likely not compilable) mess than you'd get just going through x86/MIPS/etc. disassembly. C# binary (as used with the .NET framework, at least) is something completely different. That said, revelation is a perfectly nice fellow, and would likely be happy to share his plugin source with anyone who had a mind to do something meaningful with it. The sad reality, however, is that no one else is likely to actually accomplish anything with it.

As far as I know revelation also didn't have to decompile anything in the way of C# programs, or in the way of any other thirdparty program. I believe he's figured out all of the KH formats himself (from staring at the file binary and/or disassembling the actual game's PS2 binary) and/or possibly with some written spec info/code, and of course, the Noesis plugin source is included in every version of Noesis so he certainly didn't have to decompile anything there.

Also, to be frank, it requires something fairly well beyond basic 3D knowledge to handle these animations, especially without a spec laid out in front of you. Not only are you having to duplicate the logic behind an IK-driven animation system, you're having to do so without even being entirely sure what the data you're working with is supposed to be as it pertains to said system. revelation remains your best candidate here, but I don't think decompiled and mangled C# codebases are really going to help him out.
## Post #145
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-10-17T05:51:38+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

We're not really talking about the plugin code, but yes, I really have no idea how any of this works.
## Post #146
- Username: SoftIce
- Rank: veteran
- Number of posts: 98
- Joined date: Sun Jan 23, 2011 12:31 pm
- Post datetime: 2011-11-21T20:34:48+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Wow I leave for a couple months and come back and find this! Amazing! 

I'm wondering where the ASET files are located though. I used kh2dumperx but it didn't dump any of them. Are they inside of another file format?
## Post #147
- Username: ultimaespio
- Rank: mega-veteran
- Number of posts: 267
- Joined date: Thu Apr 15, 2010 2:55 am
- Post datetime: 2011-11-21T20:37:54+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

No, you've to use Revelation's version of khkh_xldMii to convert mset to aset, then you can view and export
## Post #148
- Username: SoftIce
- Rank: veteran
- Number of posts: 98
- Joined date: Sun Jan 23, 2011 12:31 pm
- Post datetime: 2011-11-21T22:17:10+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from ultimaespio
>
> No, you've to use Revelation's version of khkh_xldMii to convert mset to aset, then you can view and export
Thanks!

EDIT: Durr, ran into a wall again. When I use khdumperx, the 'anm' folder is never dumped. When I use Yaz0r's most recent verison of his dumper, it only dumps two files called 'main.csv' and 'ovl.csv', but his older version works fine (but only dumps the 'obj' folder with the mdlx and mset files. 

Anyone run into anything like this?
## Post #149
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-11-22T20:42:19+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from SoftIce
>
> ultimaespio wrote:No, you've to use Revelation's version of khkh_xldMii to convert mset to aset, then you can view and export 
Thanks!

EDIT: Durr, ran into a wall again. When I use khdumperx, the 'anm' folder is never dumped. When I use Yaz0r's most recent verison of his dumper, it only dumps two files called 'main.csv' and 'ovl.csv', but his older version works fine (but only dumps the 'obj' folder with the mdlx and mset files. 

Anyone run into anything like this?

Are you wure of this things?.. Mhm.... it loks like so strange... Are you sure you do the extraction progress as the readme file say?
## Post #150
- Username: kkdf2
- Rank: beginner
- Number of posts: 24
- Joined date: Sun Oct 24, 2010 4:26 pm
- Post datetime: 2011-11-23T04:33:12+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Hi.

> Reply from SoftIce
>
> EDIT: Durr, ran into a wall again. When I use khdumperx, the 'anm' folder is never dumped. When I use Yaz0r's most recent verison of his dumper, it only dumps two files called 'main.csv' and 'ovl.csv', but his older version works fine (but only dumps the 'obj' folder with the mdlx and mset files. 

Anyone run into anything like this?
I checked it just now. The usage differs:

---
v0.4 usage: Yaz0r's most recent verison

```
KH2Dump.exe D:
```

---
v0.1 usage: his older version works 

```
KH2Dump.exe D:\KH2
```

D: is your media drive holding KH2/fm !

---
off-topic: how about frontend for 3 extractors?
- yaz0r's (version variants)
- falo's
- kkdf2's

sample screen shot [http://kkdf2.sakura.ne.jp/pcsx2lair/kh2exfe.png](http://kkdf2.sakura.ne.jp/pcsx2lair/kh2exfe.png)

Thanks
## Post #151
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-11-23T19:16:49+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from kkdf2
>
> Hi.
SoftIce wrote:EDIT: Durr, ran into a wall again. When I use khdumperx, the 'anm' folder is never dumped. When I use Yaz0r's most recent verison of his dumper, it only dumps two files called 'main.csv' and 'ovl.csv', but his older version works fine (but only dumps the 'obj' folder with the mdlx and mset files. 

Anyone run into anything like this?
I checked it just now. The usage differs:

---
v0.4 usage: Yaz0r's most recent verison
Code: Select allKH2Dump.exe D:
---
v0.1 usage: his older version works 
Code: Select allKH2Dump.exe D:\KH2
D: is your media drive holding KH2/fm !

---
off-topic: how about frontend for 3 extractors?
- yaz0r's (version variants)
- falo's
- kkdf2's

sample screen shot http://kkdf2.sakura.ne.jp/pcsx2lair/kh2exfe.png

Thanks

Every time you say "Thanks" and everytime I have to say to you that WE have to say thanks to your work XD (Your and Mirrorman, Sapphy.. and so on.. XD ) However Now i Will do a Simple "Recollecting of The Facts" Topic and, if you want you can add a point to that topic even in your new program XD
## Post #152
- Username: SoftIce
- Rank: veteran
- Number of posts: 98
- Joined date: Sun Jan 23, 2011 12:31 pm
- Post datetime: 2011-11-24T02:40:56+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

ARGH double posted on accident when I went to edit. Whoops.
## Post #153
- Username: SoftIce
- Rank: veteran
- Number of posts: 98
- Joined date: Sun Jan 23, 2011 12:31 pm
- Post datetime: 2011-11-24T03:03:26+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Edit:
Hey guys, does khkh_xldMii crash on anyone else when loading one of Kairi's animations? (So typical, the character I wanted to see the most fails on me lol.) Whenever I click on an animation I get an Unhandled Exception error. 

Here's the details:

> Recfn not found: rc1 00129514
>
> 
>
> ************** Exception Text **************
>
> ee1Dec.C.RecfnnotFound: Recfn not found: rc1 00129514
>
>    at ef1Declib.Mlink.Permit(Stream fsMdlx, Int32 cnt1, Stream fsMset, Int32 cnt2, UInt32 offMsetRxxx, Single tick, MemoryStream os)
>
>    at khkh_xldMii.FormII.calcbody(CaseTris ct, Mesh M, Mt1 mt1, Single _tick, UpdateFlags flags)
>
>    at khkh_xldMii.FormII.recalc()
>
>    at khkh_xldMii.FormII.listView1_SelectedIndexChanged(Object sender, EventArgs e)
>
>    at System.Windows.Forms.ListView.OnSelectedIndexChanged(EventArgs e)
>
>    at System.Windows.Forms.ListView.WmReflectNotify(Message& m)
>
>    at System.Windows.Forms.ListView.WndProc(Message& m)
>
>    at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
>
>    at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
>
>    at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

Is this happening with anyone else? So far I've tested a few of Sora and Riku's animations and they both appear to be working fine. It's just Kairi that's screwing up. It happens with her school uniform version as well. 

I'm pretty sure that it's always the same reference not being found as well: rc1 00129514

I'm using Revelation's hacked version of khkh, but I also tried running one of Kairi's animations in the latest version by kkdf2, and I still get the same error.

But besides for Kairi crashing the player it's pretty awesome viewing the cutscene animations! Thanks so much everyone for all your hard work with all this!  

> Reply from kkdf2
>
> Hi.
---
v0.4 usage: Yaz0r's most recent verison
Code: Select allKH2Dump.exe D:
---
v0.1 usage: his older version works 
Code: Select allKH2Dump.exe D:\KH2
D: is your media drive holding KH2/fm !

---
off-topic: how about frontend for 3 extractors?
- yaz0r's (version variants)
- falo's
- kkdf2's

sample screen shot http://kkdf2.sakura.ne.jp/pcsx2lair/kh2exfe.png

Thanks

> Reply from Xemnass
>
> 
Every time you say "Thanks" and everytime I have to say to you that WE have to say thanks to your work XD (Your and Mirrorman, Sapphy.. and so on.. XD )

kkdf2 and Xemnass, thank you so much! I'm going to try that right now! (And yes I agree kkdf2 is one of the gods among men/women here lol)

EDIT: Hallelujah!!! GOT THE DUMPER TO WORK! THANKS A TON FOR ALL THE HELP GUYS! 
(Now to just hope that I don't run into another wall converting the anm files.. lol.
## Post #154
- Username: kkdf2
- Rank: beginner
- Number of posts: 24
- Joined date: Sun Oct 24, 2010 4:26 pm
- Post datetime: 2011-11-26T13:28:38+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Hi!
Here is new version!

[http://kkdf2.sakura.ne.jp/pcsx2lair/Release_12.7z](http://kkdf2.sakura.ne.jp/pcsx2lair/Release_12.7z)
pass 2

```
Super smoggy effect removed. (no more gamma correction)
Fixed: Recfn not found: rc1 00129514

```

If you need aset conversion: replace ef1Declib.dll on Revelation's hacked version. Release_12 includes latest ef1Declib.dll, it will work.



I remembered about a tool set for anb extraction:
[http://kkdf2.sakura.ne.jp/pcsx2lair/expack1anbz2.7z](http://kkdf2.sakura.ne.jp/pcsx2lair/expack1anbz2.7z)
pass ][

lol, it was useful to extract kairi's anb files, and was useful to generate kairi's joined mset.

Thanks
## Post #155
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-11-26T19:57:09+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from kkdf2
>
> Hi!
Here is new version!

http://kkdf2.sakura.ne.jp/pcsx2lair/Release_12.7z
pass 2
Code: Select allr12 2011.11.24
Super smoggy effect removed. (no more gamma correction)
Fixed: Recfn not found: rc1 00129514

If you need aset conversion: replace ef1Declib.dll on Revelation's hacked version. Release_12 includes latest ef1Declib.dll, it will work.



I remembered about a tool set for anb extraction:
http://kkdf2.sakura.ne.jp/pcsx2lair/expack1anbz2.7z
pass ][

lol, it was useful to extract kairi's anb files, and was useful to generate kairi's joined mset.

Thanks

As Always, Thankyou =D XD =D XD XD XD =D XD =D
## Post #156
- Username: SoftIce
- Rank: veteran
- Number of posts: 98
- Joined date: Sun Jan 23, 2011 12:31 pm
- Post datetime: 2011-11-27T01:22:54+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Thanks a bunch!    I can open Kairi's files now, but I can't see the model for some reason (but I can see her keyblade model, odd). Another thing I noticed is that there has to be a matching mset or the mdlx won't load. I don't know if that's a new feature or one that's been around since revelation's hacked version. 

One big thing though.. I noticed that even if I replaced ef1Declib.dll with revelation's version, the export ASET button still doesn't show up though. Do you know if I did something wrong? 

> Reply from kkdf2
>
> Hi!
Here is new version!

http://kkdf2.sakura.ne.jp/pcsx2lair/Release_12.7z
pass 2
Code: Select allr12 2011.11.24
Super smoggy effect removed. (no more gamma correction)
Fixed: Recfn not found: rc1 00129514

If you need aset conversion: replace ef1Declib.dll on Revelation's hacked version. Release_12 includes latest ef1Declib.dll, it will work.



I remembered about a tool set for anb extraction:
http://kkdf2.sakura.ne.jp/pcsx2lair/expack1anbz2.7z
pass ][

lol, it was useful to extract kairi's anb files, and was useful to generate kairi's joined mset.

Thanks
## Post #157
- Username: BakameExcalibur
- Rank: advanced
- Number of posts: 68
- Joined date: Wed Feb 02, 2011 8:02 am
- Post datetime: 2011-11-27T05:23:33+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from SoftIce
>
> Thanks a bunch!    I can open Kairi's files now, but I can't see the model for some reason (but I can see her keyblade model, odd). Another thing I noticed is that there has to be a matching mset or the mdlx won't load. I don't know if that's a new feature or one that's been around since revelation's hacked version. 

One big thing though.. I noticed that even if I replaced ef1Declib.dll with revelation's version, the export ASET button still doesn't show up though. Do you know if I did something wrong? 
kkdf2 wrote:Hi!
Here is new version!

http://kkdf2.sakura.ne.jp/pcsx2lair/Release_12.7z
pass 2
Code: Select allr12 2011.11.24
Super smoggy effect removed. (no more gamma correction)
Fixed: Recfn not found: rc1 00129514

If you need aset conversion: replace ef1Declib.dll on Revelation's hacked version. Release_12 includes latest ef1Declib.dll, it will work.



I remembered about a tool set for anb extraction:
http://kkdf2.sakura.ne.jp/pcsx2lair/expack1anbz2.7z
pass ][

lol, it was useful to extract kairi's anb files, and was useful to generate kairi's joined mset.

Thanks
You have to replace the .dll in Revelation's hack with the newest one. Should work fine... though I still got an error importing Schoolgirl!Kairi's H_EX550.mset. Hmm...
(Typed as I was working on it, so pardon the sudden swerve in attitude).
## Post #158
- Username: SoftIce
- Rank: veteran
- Number of posts: 98
- Joined date: Sun Jan 23, 2011 12:31 pm
- Post datetime: 2011-11-27T05:51:20+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from BakameExcalibur
>
> 
You have to replace the .dll in Revelation's hack with the newest one. Should work fine... though I still got an error importing Schoolgirl!Kairi's H_EX550.mset. Hmm...
(Typed as I was working on it, so pardon the sudden swerve in attitude).

LOL thanks! Can't believe I didn't try that combo. Finally HP Kairi. I'll try her schoolgirl one now and see if I get the error you do.

Edit: Schoolgirl outfit Kairi works for me *knock on wood*. Let me know if you got her to eventually work for you.

I also wanted to say a big 'thank you' to kkdf2, Revelation and Xemnass (and anyone else who contributed) for all their help!

Xemnass, your list comes in super handy. Thank you so much for taking all that time to compile and share it with us!
## Post #159
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2011-12-04T23:00:16+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from SoftIce
>
> 
Xemnass, your list comes in super handy. Thank you so much for taking all that time to compile and share it with us!

Thankyou very much for this rate =D =D =D =D =D XD

I'm so glad that you found my list usefull XD 

Thankyou again, XD

P.S.= Sorry for the late answer XD I've noticed your rate only now XD

=D =D =D =D =D XD
## Post #160
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2011-12-18T06:18:05+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

So, is the ASET converter pretty much complete?
## Post #161
- Username: Steve
- Rank: ultra-n00b
- Number of posts: 3
- Joined date: Mon Dec 19, 2011 12:56 am
- Post datetime: 2011-12-24T21:40:43+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

What is Revelation's hack and where can i get it ?
## Post #162
- Username: kkdf2
- Rank: beginner
- Number of posts: 24
- Joined date: Sun Oct 24, 2010 4:26 pm
- Post datetime: 2011-12-25T02:56:45+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Hi.

@Steve
Here is the post about latest ASET exporter release: [viewtopic.php?p=58637#p58637](http://forum.xentax.com/viewtopic.php?p=58637#p58637)

> Reply from revelation
>
> Thanks to kkdf2, i now have a version of things working and can post it up for you all to test.

Main addition on my part is really only the ASET export.  The Animation list view now has check boxes.  If none are selected then all animations will be output, otherwise you can select only a few of them, etc.  Clicking the column header allows for toggling selection of all or none of the animations in the list.  The export process can take a bit, depending on how many animation you decide to export, so i added a progress dialog to show the processing status.

Not overly sophisticated, but should be enough to play around with.  i am sure it could use some good testing, so let me know if anything breaks horribly, heh.

http://www.mediafire.com/?xym4yaa75qjvdpt

Have fun.

Get the Release.7z, unpack it by 7zip, and just run khkh_xldMii executable file.

If you have problem for launching it, you may need to install Microsoft .NET Framework Version 2.0 Redistributable Package (x86). [http://www.microsoft.com/download/en/details.aspx?id=19](http://www.microsoft.com/download/en/details.aspx?id=19)

@Mirrorman95
The mset decoder of both ASET exporter and khkh_xldMii still depends on ps2 emulation technique.

It is incomplete part.

However IMO it is practical level about viewing the models.

About Exception Text such as Recfn not found: rc1 00129514, i can fix it. just replace ef1Declib.dll file with new one.

Thanks
## Post #163
- Username: BakameExcalibur
- Rank: advanced
- Number of posts: 68
- Joined date: Wed Feb 02, 2011 8:02 am
- Post datetime: 2012-01-08T08:51:06+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Well, I've installed Windows 7 Ultimate over my aging XP MCE install, and so far so good. Unfortunately, I still get the same errors I've been getting with converting ANBs to MSETs.

```
System.ArgumentNullException: Buffer cannot be null.
Parameter name: buffer
   at System.IO.MemoryStream..ctor(Byte[] buffer, Boolean writable)
   at khkh_xldMii.FormII.loadMset(String fmset, Int32 ty)
   at khkh_xldMii.FormII.LoadOf(Int32 x, String fp)
   at khkh_xldMii.BCForm.p1_DoubleClick(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnDoubleClick(EventArgs e)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)


************** Loaded Assemblies **************
mscorlib
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5448 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v2.0.50727/mscorlib.dll
----------------------------------------
khkh_xldMii
    Assembly Version: 2011.8.16.10
    Win32 Version: 2011.8.16.10
    CodeBase: file:///C:/Users/Philip/Downloads/Kingdom%20Hearts%20model%20work/Revelation/Release/khkh_xldMii.exe
----------------------------------------
System.Windows.Forms
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5446 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Windows.Forms/2.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5447 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Drawing
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
SlimDX
    Assembly Version: 2.0.10.43
    Win32 Version: 
    CodeBase: file:///C:/Users/Philip/Downloads/Kingdom%20Hearts%20model%20work/Revelation/Release/SlimDX.DLL
----------------------------------------
msvcm90
    Assembly Version: 9.0.30729.6161
    Win32 Version: 9.00.30729.6161
    CodeBase: file:///C:/Windows/WinSxS/x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.6161_none_50934f2ebcb7eb57/msvcm90.dll
----------------------------------------
Accessibility
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.4927 (NetFXspW7.050727-4900)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/Accessibility/2.0.0.0__b03f5f7f11d50a3a/Accessibility.dll
----------------------------------------
System.Xml
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll
----------------------------------------
ef1Declib
    Assembly Version: 2011.11.24.2
    Win32 Version: 2011.11.24.2
    CodeBase: file:///C:/Users/Philip/Downloads/Kingdom%20Hearts%20model%20work/Revelation/Release/ef1Declib.DLL
----------------------------------------
```


Fun stuff. Not particularly in the mood to do bug-hunting at almost 4:00 AM, though I hope this is of use to someone.
## Post #164
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2012-01-08T11:11:26+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from BakameExcalibur
>
> Well, I've installed Windows 7 Ultimate over my aging XP MCE install, and so far so good. Unfortunately, I still get the same errors I've been getting with converting ANBs to MSETs.
Code: Select all************** Exception Text **************
System.ArgumentNullException: Buffer cannot be null.
Parameter name: buffer
   at System.IO.MemoryStream..ctor(Byte[] buffer, Boolean writable)
   at khkh_xldMii.FormII.loadMset(String fmset, Int32 ty)
   at khkh_xldMii.FormII.LoadOf(Int32 x, String fp)
   at khkh_xldMii.BCForm.p1_DoubleClick(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnDoubleClick(EventArgs e)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)


************** Loaded Assemblies **************
mscorlib
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5448 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v2.0.50727/mscorlib.dll
----------------------------------------
khkh_xldMii
    Assembly Version: 2011.8.16.10
    Win32 Version: 2011.8.16.10
    CodeBase: file:///C:/Users/Philip/Downloads/Kingdom%20Hearts%20model%20work/Revelation/Release/khkh_xldMii.exe
----------------------------------------
System.Windows.Forms
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5446 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Windows.Forms/2.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5447 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Drawing
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
SlimDX
    Assembly Version: 2.0.10.43
    Win32 Version: 
    CodeBase: file:///C:/Users/Philip/Downloads/Kingdom%20Hearts%20model%20work/Revelation/Release/SlimDX.DLL
----------------------------------------
msvcm90
    Assembly Version: 9.0.30729.6161
    Win32 Version: 9.00.30729.6161
    CodeBase: file:///C:/Windows/WinSxS/x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.6161_none_50934f2ebcb7eb57/msvcm90.dll
----------------------------------------
Accessibility
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.4927 (NetFXspW7.050727-4900)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/Accessibility/2.0.0.0__b03f5f7f11d50a3a/Accessibility.dll
----------------------------------------
System.Xml
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll
----------------------------------------
ef1Declib
    Assembly Version: 2011.11.24.2
    Win32 Version: 2011.11.24.2
    CodeBase: file:///C:/Users/Philip/Downloads/Kingdom%20Hearts%20model%20work/Revelation/Release/ef1Declib.DLL
----------------------------------------

Fun stuff. Not particularly in the mood to do bug-hunting at almost 4:00 AM, though I hope this is of use to someone.

I am not sure about what i will say  ( so don't kill me XD ) I think tahtbthe program didn't actually loaded somethings, if you was using the Anb2mset converter, seems that in the Data-buffer wasn't loaded the animations cause it say the the buffe. ( the data ) is ewual to "null" so is euqla to noting... Are you sure that you did all thngs properly, like, installed the right package, if your system neded it? With what file give to you this debug log???

XD Let Us Know XD
## Post #165
- Username: kkdf2
- Rank: beginner
- Number of posts: 24
- Joined date: Sun Oct 24, 2010 4:26 pm
- Post datetime: 2012-02-08T14:13:16+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Hi.

very very sorry for late reply!

> Reply from BakameExcalibur
>
> Well, I've installed Windows 7 Ultimate over my aging XP MCE install, and so far so good. Unfortunately, I still get the same errors I've been getting with converting ANBs to MSETs.
Code: Select all************** Exception Text **************
System.ArgumentNullException: Buffer cannot be null.
Parameter name: buffer
   at System.IO.MemoryStream..ctor(Byte[] buffer, Boolean writable)
   at khkh_xldMii.FormII.loadMset(String fmset, Int32 ty)
   at khkh_xldMii.FormII.LoadOf(Int32 x, String fp)
   at khkh_xldMii.BCForm.p1_DoubleClick(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnDoubleClick(EventArgs e)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
...

Your converted mset seems to be broken.

Try expack1anbz2 package instead.
[http://kkdf2.sakura.ne.jp/pcsx2lair/expack1anbz2.7z](http://kkdf2.sakura.ne.jp/pcsx2lair/expack1anbz2.7z)
pass ][

Run Explode_anb_?_drive.bat first,
then Mix_anb_into_mset.bat.

I know that the MsetGather in Anb_n_Mset or Anb_n_Mset_2 packages sometimes generates broken mset files.

expack1anbz2 is preferred if you wanna generate mset files like P_EX100.mset from many many anb files stored in KH2 media disk.

Thanks.
## Post #166
- Username: BakameExcalibur
- Rank: advanced
- Number of posts: 68
- Joined date: Wed Feb 02, 2011 8:02 am
- Post datetime: 2012-02-08T19:21:13+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from kkdf2
>
> Hi.

very very sorry for late reply!
BakameExcalibur wrote:Well, I've installed Windows 7 Ultimate over my aging XP MCE install, and so far so good. Unfortunately, I still get the same errors I've been getting with converting ANBs to MSETs.
Code: Select all************** Exception Text **************
System.ArgumentNullException: Buffer cannot be null.
Parameter name: buffer
   at System.IO.MemoryStream..ctor(Byte[] buffer, Boolean writable)
   at khkh_xldMii.FormII.loadMset(String fmset, Int32 ty)
   at khkh_xldMii.FormII.LoadOf(Int32 x, String fp)
   at khkh_xldMii.BCForm.p1_DoubleClick(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnDoubleClick(EventArgs e)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
...



Your converted mset seems to be broken.

Try expack1anbz2 package instead.
http://kkdf2.sakura.ne.jp/pcsx2lair/expack1anbz2.7z
pass ][

Run Explode_anb_?_drive.bat first,
then Mix_anb_into_mset.bat.

I know that the MsetGather in Anb_n_Mset or Anb_n_Mset_2 packages sometimes generates broken mset files.

expack1anbz2 is preferred if you wanna generate mset files like P_EX100.mset from many many anb files stored in KH2 media disk.

Thanks.
Thank you! It worked!
## Post #167
- Username: dragicorn
- Rank: beginner
- Number of posts: 37
- Joined date: Sun Sep 18, 2011 3:21 am
- Post datetime: 2012-02-17T22:37:15+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

Does anyone have a plugin to view KH1 mset files on neosis 2.82?
## Post #168
- Username: Mirrorman95
- Rank: ultra-veteran
- Number of posts: 355
- Joined date: Tue Jul 20, 2010 9:08 am
- Post datetime: 2012-02-18T03:04:51+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from dragicorn
>
> Does anyone have a plugin to view KH1 mset files on neosis 2.82?
KH1 MSETs can only be viewed with Yaz0r's original ModelViewerD3DX program. There is no plugin, or converter, for Noesis, or any other program; Yaz0r's is the only one that reads these animations.
## Post #169
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2012-02-18T03:10:24+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from Mirrorman95
>
> dragicorn wrote:Does anyone have a plugin to view KH1 mset files on neosis 2.82?
KH1 MSETs can only be viewed with Yaz0r's original ModelViewerD3DX program. There is no plugin, or converter, for Noesis, or any other program; Yaz0r's is the only one that reads these animations.
Now I have to ask: is that due to some aspect of the format, or simply because no one else has taken the time to write plugins/converters, be they for Noesis or for any other program?
## Post #170
- Username: Xemnass
- Rank: advanced
- Number of posts: 74
- Joined date: Wed Jun 01, 2011 9:07 pm
- Post datetime: 2012-02-18T20:29:35+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

> Reply from Dinoguy1000
>
> Mirrorman95 wrote:dragicorn wrote:Does anyone have a plugin to view KH1 mset files on neosis 2.82?
KH1 MSETs can only be viewed with Yaz0r's original ModelViewerD3DX program. There is no plugin, or converter, for Noesis, or any other program; Yaz0r's is the only one that reads these animations.
Now I have to ask: is that due to some aspect of the format, or simply because no one else has taken the time to write plugins/converters, be they for Noesis or for any other program?

Regarding my knowledge i know the there are some difference between this two format even if they have the same name XD I remember somethings about the structure i guess XD

=D =D XD XD Correct me if i Go Wrong XD XD =D =D
## Post #171
- Username: Devilot
- Rank: ultra-veteran
- Number of posts: 443
- Joined date: Tue Sep 07, 2010 5:12 pm
- Post datetime: 2012-04-23T19:40:25+00:00
- Post Title: Re: MSET RESEARCH PROJECT + FILES UPLOADED + SOURCES

any update on this project?
