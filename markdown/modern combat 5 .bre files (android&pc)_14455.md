## Post #1
- Username: Faraz Adil
- Rank: n00b
- Number of posts: 11
- Joined date: Sat Jun 11, 2016 12:41 am
- Post datetime: 2016-06-11T18:26:03+00:00
- Post Title: modern combat 5 .bre files (android&pc)

okay its about modern combat 5 (mc5) both android and pc.. i xtracted .gla2 using quick bms and nova3 bms script by aluigi.. then i got several files like .bre (model file), .dds (map and texture files) , .dat files, .swf files (which r actualy .fws when opened via hex editor) , .mih files, but the main are .bre files a guy named acewell converted .bre files to .obj via hex2obj but i dont know how to do tht(m not tht pro as u guyz r)  gameloft is just hate me    so can any1 make a script for converting or there is any other way to do it? any help will b appreciated   3 files r attached below.. plz help  
file1: [http://www.mediafire.com/download/15875 ... 282%29.bre](http://www.mediafire.com/download/15875dio9a4f914/0000000000000000%282%29.bre)
file2: [http://www.mediafire.com/download/g61qa ... 000000.bre](http://www.mediafire.com/download/g61qa6udytbgzrp/0000000000000000.bre)
file3: [http://www.mediafire.com/download/58f0k ... 00000a.bre](http://www.mediafire.com/download/58f0kluakn2ivy8/000000000000000a.bre)
## Post #2
- Username: shakotay2
- Rank: MEGAVETERAN
- Number of posts: 4300
- Joined date: Fri Apr 20, 2012 4:24 pm
- Post datetime: 2016-06-11T19:50:11+00:00
- Post Title: modern combat 5 .bre files (android&pc)

Simple format:



0000_bre.jpg (157.58 KiB) Viewed 204 times
## Post #3
- Username: Faraz Adil
- Rank: n00b
- Number of posts: 11
- Joined date: Sat Jun 11, 2016 12:41 am
- Post datetime: 2016-06-11T19:56:37+00:00
- Post Title: modern combat 5 .bre files (android&pc)

wow wow wow.. m reading ur guide for past 2 hours but i cant understand (m a super noob)   nd u just did it... so now i just hav to change the strt perimeters  or everything for each file.. nd i realy appreciate ur work on hex2obj.. howevr it is confusing but not tht much as it should be thnx a lot
## Post #4
- Username: shakotay2
- Rank: MEGAVETERAN
- Number of posts: 4300
- Joined date: Fri Apr 20, 2012 4:24 pm
- Post datetime: 2016-06-11T20:12:45+00:00
- Post Title: modern combat 5 .bre files (android&pc)

> Reply from Faraz Adil
>
> hex2obj.. howevr it is confusingIf you told me what exactly is confusing I could try to improve it.

btw: is there a problem with the 'a' key of your keyboard?  
(You may find it cool to spare the 'a's but it makes your text hard to read - just my two cents.)
## Post #5
- Username: Faraz Adil
- Rank: n00b
- Number of posts: 11
- Joined date: Sat Jun 11, 2016 12:41 am
- Post datetime: 2016-06-11T20:47:17+00:00
- Post Title: modern combat 5 .bre files (android&pc)

lol   actualy my a key is realy broken i mean sumtimes it works sum times not :p nd the confusing part is about sequential hey i giv u a gud idea use a practical example like. post a link to a file then screenshot it step by step how to do things it will make it a lot easier nd noobs like me could get the idea fast
## Post #6
- Username: shakotay2
- Rank: MEGAVETERAN
- Number of posts: 4300
- Joined date: Fri Apr 20, 2012 4:24 pm
- Post datetime: 2016-06-11T20:59:52+00:00
- Post Title: modern combat 5 .bre files (android&pc)

> Reply from Faraz Adil
>
> hey i giv u a gud idea use a practical example like. post a link to a file then screenshot it step by step how to do things it will make it a lot easier nd noobs like me could get the idea fasthey, I give you a good idea, too: there's dozens of examples in this forum where I showed how to do it.

Times to show again and again how to to it for a special example have passed, sry.

Tell me <what> you have tried so far and <where> you got stuck.
That's the only way that is working for me.

> the confusing part is about sequentialyou don't need the sequential mode here, it's 'Vertex Block mode', afaics
## Post #7
- Username: Faraz Adil
- Rank: n00b
- Number of posts: 11
- Joined date: Sat Jun 11, 2016 12:41 am
- Post datetime: 2016-06-11T21:42:40+00:00
- Post Title: modern combat 5 .bre files (android&pc)

ok i got u but still u should attach examples for sequential nd block though.. nd i got a prblm.. now i no how to get strtaddr but i dont no how to get count.. i serched for clues but i couldnt find any  edit: no m not saying tht giv special examples for each file type just post ur examples on a page nd say detailed tutorial for ulta noobs :p just giv more visual examples like upload a video on youtube in this way u can get more attention bcoz with ol due respct sir.. u guyz hav made a powerful software but its not tht much popular.. u shud go post links on diffrent forums.. even "the Aluigi" didnt no about ur product  edit: ok now i get it how to get count m realy confused in how to know what is fvf size as it always change my mesh and i dont know how to calculate it?
## Post #8
- Username: shakotay2
- Rank: MEGAVETERAN
- Number of posts: 4300
- Joined date: Fri Apr 20, 2012 4:24 pm
- Post datetime: 2016-06-12T00:05:43+00:00
- Post Title: modern combat 5 .bre files (android&pc)

> Reply from Faraz Adil
>
> ok i got u but still u should attach examples for sequential nd block thoughpress the 'tut' button in hex2obj - there's a sequential example handled

For VB (vertex block) mode read here:
.hgs model file conversion
[viewtopic.php?f=16&t=14377&p=118873#p118873](http://forum.xentax.com/viewtopic.php?f=16&t=14377&p=118873#p118873)

Flintstones Bedrock Bowling .AMW
[viewtopic.php?f=16&t=12521&p=103091#p103091](http://forum.xentax.com/viewtopic.php?f=16&t=12521&p=103091#p103091)

(including maxscript)
Boiling Point: Road to Hell *.RF2
[viewtopic.php?f=16&t=14294&p=118292#p118292](http://forum.xentax.com/viewtopic.php?f=16&t=14294&p=118292#p118292)

> now i no how to get strtaddr but i dont no how to get count..which start address are you talking of? start address of the vertex block or start address of face indices?
count of face indices (FIs) is size of FIs' block divided by 2
count of vertices is calculated automatically (read the tutorial, carefully)

size of FVF is (start address of FIs - start address of vertex block) / vertex count
(This formula DOESN'T apply for every model format!)

> just giv more visual examples like upload a video on youtubeI don't have the time for such, sry.

> in this way u can get more attentionwell, I'm an old guy - the only attention I was keen on was the one of the pretty girls in my young days - rofl  

> u guyz hav made a powerful software but its not tht much popular.. u shud go post links on diffrent forums.. even "the Aluigi" didnt no about ur productI really don't care - hex2obj is a helper tool for my own needs - it's development is finished more or less (except for weights which may come some day).
(There's about 2000 downloads up to now but I guess there's only a handful of regular users.)

> how to know what is fvf size as it always change my mesh and i dont know how to calculate it?see formula above
## Post #9
- Username: Faraz Adil
- Rank: n00b
- Number of posts: 11
- Joined date: Sat Jun 11, 2016 12:41 am
- Post datetime: 2016-06-12T02:25:21+00:00
- Post Title: modern combat 5 .bre files (android&pc)

well thnx those postshelped nd i improved  but not tht much  as u said i got strt address for face indices (3c10) and count 2880 (it was calculated 2879 as last address of Face indices was 528f) after go1 i got max face idex= 559 vertices==vertex count.. then i calculated strt address of vertices 12x559=6708=1a34 and when i calculated fvf according to ur formula (3c10-1a34/559=6) but again its showing wiered images like in screenshot now my questions r how to get fvf size (any other effective method?) how to get uv pos(totally confused)  file tht m working on: [http://www.mediafire.com/download/sbxqb ... 000000.bre](http://www.mediafire.com/download/sbxqbowmbgo6o3m/0000000000000000.bre) 
now plz help me.. m so close.. i can feel it    lol screenshot link: [http://www.mediafire.com/download/923po ... 169%29.png](http://www.mediafire.com/download/923po3igz3gracy/Screenshot_%28169%29.png)
## Post #10
- Username: Acewell
- Rank: VIP member
- Number of posts: 1330
- Joined date: Wed Nov 05, 2008 7:16 pm
- Post datetime: 2016-06-12T04:04:58+00:00
- Post Title: modern combat 5 .bre files (android&pc)

0000000000000000.bre sample mesh header

little-endian

0x18D0 - offset to vertex block start
0x18D8 - length of vertex block
0x1910 - vertex stride/FVF (first occurance) 0x48 = 72 dec
0x19D0 - vert count (add 1)
0x19D4 - face count
0x19E0 - offset to face indices start
0x19E8 - length of face indices data to eof (or next submesh header)

i have not yet figured out how to find the start of the first submesh header
## Post #11
- Username: shakotay2
- Rank: MEGAVETERAN
- Number of posts: 4300
- Joined date: Fri Apr 20, 2012 4:24 pm
- Post datetime: 2016-06-12T07:13:44+00:00
- Post Title: modern combat 5 .bre files (android&pc)

> Reply from Faraz Adil
>
> then i calculated strt address of vertices 12x559=6708=1a34doesn't make sense to me - try

0x3C10 2880
Vb1
24 12
0x7C0 559
020000
0x0 255

(Not the final solution but should serve as a good starting point.)

btw: if you had pressed the go2 button you'd have been told that an EOF is met with your parameters

> how to get fvf size (any other effective method?)search for patterns - it's clear to be seen that FF0000FF is such a pattern in the vertex block

> how to get uv pos(totally confused)that's the hard part - there's various possibilities.
(For example vx,vy,vz, vnx,vny,vnz, tx,ty, so for floats uv pos= 24.  Or uv pos= FVFsize-8)

Here it might be FVFsize-12 (just a wild guess).

edit: start of vertices is 0x7A8 - you'll get a perfect sphere then.

here's how to find the vertex start address:
 search for 0000  302C302C -> 0x13A
 go 10 bytes back, get DWord -> 0x650
 add 0x48 to that DWord -> 0x698
 it's a pointer, so it contains an address
[0x698] 0x7A8
## Post #12
- Username: Faraz Adil
- Rank: n00b
- Number of posts: 11
- Joined date: Sat Jun 11, 2016 12:41 am
- Post datetime: 2016-06-12T15:37:56+00:00
- Post Title: modern combat 5 .bre files (android&pc)

wow easy i got it now just a few more questions guyz:-(acewell ur reply is confusing dont talk so pro m a ultra noob here  )
ques.1-is every .bre file consist ff0000ff type pattern or it can b something else.. if so then how m gonna find it?
ques.2-is i always hav to search for 0000 302c302c? that line "go 10 bytes back,get d word" i serched for D and i found it on 0x650
but what u mean by go 10 bytes back?
ques.3-"add 0x48 to that d word" is i always hav to add 0x48 to every d word offset i found??
" it's a pointer, so it contains an address

[0x698] 0x7A8"
but it contains it like a807 and u wrote 7a8.. is i hav to interchange their value then read or what?  edit: and how u know where is the v block is  there another trick for it?
## Post #13
- Username: shakotay2
- Rank: MEGAVETERAN
- Number of posts: 4300
- Joined date: Fri Apr 20, 2012 4:24 pm
- Post datetime: 2016-06-12T17:10:14+00:00
- Post Title: modern combat 5 .bre files (android&pc)

> Reply from Faraz Adil
>
> ques.1-is every .bre file consist ff0000ff type pattern or it can b something else.. if so then how m gonna find it?patterns may change; a pattern is a byte sequence that occurs several times in a vertex block for example. If you find an identical sequence, then the offset to the previous one might be the FVF size. (There are one or two posts where I showed a picture of such but I'm too lazy to search, sry.)

> ques.2-is i always hav to search for 0000 302c302c?dunno - worked for the bre files I have

> but what u mean by go 10 bytes back?go back means count back



bre_explain.jpg (107.2 KiB) Viewed 146 times



> i always hav to add 0x48 to every d word offset i found??don't understand the question. Do what you're told to do   and you'll find the vertex start address, in most cases, I guess.
What I found is just a receipe, not a rule. (Finding rules requires a FULL format analysis and I don't waste my time with such.)

> [0x698] 0x7A8"
>
> but it contains it like a807 and u wrote 7a8..because of the endianness - see above picture
## Post #14
- Username: Faraz Adil
- Rank: n00b
- Number of posts: 11
- Joined date: Sat Jun 11, 2016 12:41 am
- Post datetime: 2016-06-12T19:52:27+00:00
- Post Title: modern combat 5 .bre files (android&pc)

THNX FOR HELPING MAY B I WILL COME UP WITH SOME PROBLEMS IN ANY OTHER .BRE FILES BCOZ THEY R SO LARGE ABOUT 60-80 MB YES MB    BUT FOR NOW I HAV TO STUDY BCOZ I HAV TO GIV 3 XAMS IN 3 DAYS (DAILY) AND I HAV TO STUDY NOW   AND U SAID THAT IT CAN BE DONE I MEAN FULL FORMAT ANALYSIS CAN BE DONE!! IF ITS POSSIBLE THEN PLZ TELL ME HOW? I CAN DO ANYTHING TO ANALYZE THIS FORMAT.. BCOZ THE THING I WANT TO DO IS MAKE MAP MODELS LIKE CRATES AND WALLS MINIMIZED IN SIZE OR TOTALLY REPLACED WITH SUMTHING TRANSPARENT OR SEMI TRANSPARENT OR JUST NOTHING.. TO MAKE WHOLE MAP TRANSPARENT THEN AGAIN CODE THEM IN .BRE AND THEN REPACK THEM IN .GLA2 AND REPLACE DEFAULT FILES WITH THOSE EDITED FILES.. GIV ME SOMETHING POSITIVE.. (COZ MY BLOOD GRUP IS B POSITIV    LOL) EAGER FOR UR REPLY
## Post #15
- Username: shakotay2
- Rank: MEGAVETERAN
- Number of posts: 4300
- Joined date: Fri Apr 20, 2012 4:24 pm
- Post datetime: 2016-06-12T20:15:46+00:00
- Post Title: modern combat 5 .bre files (android&pc)

> Reply from Faraz Adil
>
> AND U SAID THAT IT CAN BE DONE I MEAN FULL FORMAT ANALYSIS CAN BE DONE!!well, iirc I wrote it would require a full analysis - by someone else, not me
> IF ITS POSSIBLE THEN PLZ TELL ME HOW?As I wrote I've no time for such.
(I've spent tons of time to create hex2obj, so please, don't be too greedy.  )

If you know 'C' you could read here to maybe get more insight: [viewtopic.php?f=29&t=12756](http://forum.xentax.com/viewtopic.php?f=29&t=12756)
## Post #16
- Username: Faraz Adil
- Rank: n00b
- Number of posts: 11
- Joined date: Sat Jun 11, 2016 12:41 am
- Post datetime: 2016-06-12T21:11:10+00:00
- Post Title: Re: modern combat 5 .bre files (android&pc)

alr8 i bookmarked the thread will c after xams but is it can be done? i mean is those .obj can be minimized or minimized to null  and then put back them in gla2 format and put it back in game without errors? and what will happen if i just rename those some files of models and textures of map then again pack them in gla2 archieve will it work then or it will giv errors? u r a xpert thts y m asking u!!  
also i got tons of .dat files i think those contains stats and useful data.. can i access them by any means?
## Post #17
- Username: Faraz Adil
- Rank: n00b
- Number of posts: 11
- Joined date: Sat Jun 11, 2016 12:41 am
- Post datetime: 2016-06-13T09:20:55+00:00
- Post Title: Re: modern combat 5 .bre files (android&pc)

hello reply r u inactiv or what?
## Post #18
- Username: shakotay2
- Rank: MEGAVETERAN
- Number of posts: 4300
- Joined date: Fri Apr 20, 2012 4:24 pm
- Post datetime: 2016-06-13T16:05:38+00:00
- Post Title: Re: modern combat 5 .bre files (android&pc)

well, other than you, obviously, I've to earn money, follow my own projects.
3D models is just a hobby of mine and you don't have any claims to get answers from me.
## Post #19
- Username: Faraz Adil
- Rank: n00b
- Number of posts: 11
- Joined date: Sat Jun 11, 2016 12:41 am
- Post datetime: 2016-06-13T16:38:55+00:00
- Post Title: Re: modern combat 5 .bre files (android&pc)

alright yes u  r r8.. who m i.. m nothing..thnx for ur hlp.. realy a big thanx for evrythng u hav done for me and for hex2obj so far
## Post #20
- Username: shakotay2
- Rank: MEGAVETERAN
- Number of posts: 4300
- Joined date: Fri Apr 20, 2012 4:24 pm
- Post datetime: 2016-06-13T16:52:07+00:00
- Post Title: Re: modern combat 5 .bre files (android&pc)

> Reply from Faraz Adil
>
> i mean is those .obj can be minimized or minimized to nullwhy?

> and then put back them in gla2 format and put it back in game without errors?Atm I can't remember any 3d format where someone did the reverse way (obj -> whatever format). You'll need a full format analysis for such.

> and what will happen if i just rename those some files of models and textures of map then again pack them in gla2 archieve will it work then or it will giv errors?who knows? You should try it out.

> also i got tons of .dat files i think those contains stats and useful data.. can i access them by any means?In most cases you'll need a debugger to understand how a game handles its resource and data files. But you'll need months (if not a year) to understand how the debugging of a game works.
## Post #21
- Username: Faraz Adil
- Rank: n00b
- Number of posts: 11
- Joined date: Sat Jun 11, 2016 12:41 am
- Post datetime: 2016-06-13T16:59:12+00:00
- Post Title: Re: modern combat 5 .bre files (android&pc)

yes yes yes thts the answer i was serching for.. a game debugger!! wow u r awesome man.. and why i want to make those files minimised to null so tht the map can be transparent!! it will b so cool.. thnx anyway for ur help.. realy u helped a lot.. keep on ur gud work
