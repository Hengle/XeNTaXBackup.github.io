## Post #1
- Username: philip92dk
- Rank: advanced
- Number of posts: 78
- Joined date: Mon Jul 26, 2010 3:52 am
- Post datetime: 2011-04-18T22:16:54+00:00
- Post Title: To Aru Majutsu no Index psp help

I have tried to export 3d models from To Aru Majutsu no Index (the psp game) but i cant get them out
i would be very happy if someone could export them for me  
samples
[http://www.gamefront.com/files/20322263/USRDIR.rar](http://www.gamefront.com/files/20322263/USRDIR.rar)
[http://www.gamefront.com/files/20322337/INSDIR.rar](http://www.gamefront.com/files/20322337/INSDIR.rar)

sorry but could somone tag a look on it and tell me if it is possible to export 3d models from it   ?
## Post #2
- Username: FEATHER
- Rank: advanced
- Number of posts: 75
- Joined date: Sun Jun 13, 2010 1:47 pm
- Post datetime: 2011-04-18T23:30:39+00:00
- Post Title: To Aru Majutsu no Index psp help

People need sample files to help.
## Post #3
- Username: philip92dk
- Rank: advanced
- Number of posts: 78
- Joined date: Mon Jul 26, 2010 3:52 am
- Post datetime: 2011-04-19T20:22:04+00:00
- Post Title: To Aru Majutsu no Index psp help

> Reply from FEATHER
>
> People need sample files to help.
thanks for the hands up
## Post #4
- Username: szfzafa
- Rank: advanced
- Number of posts: 56
- Joined date: Sun Feb 27, 2011 6:46 pm
- Post datetime: 2011-05-11T11:02:34+00:00
- Post Title: To Aru Majutsu no Index psp help

file not found, man..
 

> Reply from philip92dk
>
> I have tried to export 3d models from To Aru Majutsu no Index (the psp game) but i cant get them out
i would be very happy if someone could export them for me  
samples
http://www.gamefront.com/files/20239847/INSDIR.rar
http://www.gamefront.com/files/20239918/USRDIR.rar

sorry but could somone tag a look on it and tell me if it is possible to export 3d models from it   ?
## Post #5
- Username: philip92dk
- Rank: advanced
- Number of posts: 78
- Joined date: Mon Jul 26, 2010 3:52 am
- Post datetime: 2011-05-11T16:46:24+00:00
- Post Title: To Aru Majutsu no Index psp help

> Reply from szfzafa
>
> file not found, man..
 
philip92dk wrote:I have tried to export 3d models from To Aru Majutsu no Index (the psp game) but i cant get them out
i would be very happy if someone could export them for me  
samples
http://www.gamefront.com/files/20239847/INSDIR.rar
http://www.gamefront.com/files/20239918/USRDIR.rar

sorry but could somone tag a look on it and tell me if it is possible to export 3d models from it   ?

i have reUpload them for you
## Post #6
- Username: szfzafa
- Rank: advanced
- Number of posts: 56
- Joined date: Sun Feb 27, 2011 6:46 pm
- Post datetime: 2011-05-12T14:51:00+00:00
- Post Title: To Aru Majutsu no Index psp help

You have?   but i found nowhere..

> Reply from philip92dk
>
> I have tried to export 3d models from To Aru Majutsu no Index (the psp game) but i cant get them out
i have reUpload them for you
## Post #7
- Username: philip92dk
- Rank: advanced
- Number of posts: 78
- Joined date: Mon Jul 26, 2010 3:52 am
- Post datetime: 2011-05-12T18:00:35+00:00
- Post Title: To Aru Majutsu no Index psp help

> Reply from szfzafa
>
> You have?   but i found nowhere..
philip92dk wrote:I have tried to export 3d models from To Aru Majutsu no Index (the psp game) but i cant get them out
i have reUpload them for you
i delete the old samples links add new ones there  
sorry for the big filer size i don't know where the models is so i Just opload the two biggest folders in the iso i don't think there any models in the SYSDIR folder because it only fills 35 mb
## Post #8
- Username: szfzafa
- Rank: advanced
- Number of posts: 56
- Joined date: Sun Feb 27, 2011 6:46 pm
- Post datetime: 2011-05-13T03:56:07+00:00
- Post Title: To Aru Majutsu no Index psp help

for Nanoha AS Portable ACE PSP, the models were stored in USRDIR.
or can u post a filelist with their size?

or else i'll try to get a full rip of the game~   wish i could see it myself..
## Post #9
- Username: philip92dk
- Rank: advanced
- Number of posts: 78
- Joined date: Mon Jul 26, 2010 3:52 am
- Post datetime: 2011-05-13T13:54:41+00:00
- Post Title: To Aru Majutsu no Index psp help

> Reply from szfzafa
>
> for Nanoha AS Portable ACE PSP, the models were stored in USRDIR.
or can u post a filelist with their size?

or else i'll try to get a full rip of the game~   wish i could see it myself..
USRDIR filelist 

STAFF_ROLL.PMF 14.3 mb
PSPSND.bin 142 mb
PSPBGM.bin 21.8 mb
PIC1.png 184 kb
OP.PMF 14.2 mb 
MCB1.BLN 15.4 mb
MCB0.BLN 4.00 kb
ICON0.png 25 kb
GRP.bin 26.6 mb
FARC.bin 14.4 mb
EVT.bin 232 kb
DAT.bin 578 kb
AMW.PMF 1.05 mb
ADV.bin 762 kb
## Post #10
- Username: szfzafa
- Rank: advanced
- Number of posts: 56
- Joined date: Sun Feb 27, 2011 6:46 pm
- Post datetime: 2011-05-14T02:22:30+00:00
- Post Title: To Aru Majutsu no Index psp help

grp.bin again!!
so u just open these .bin and search for some "PKv0" header plz?
i know some PS2 game have samiliar filenames.
## Post #11
- Username: philip92dk
- Rank: advanced
- Number of posts: 78
- Joined date: Mon Jul 26, 2010 3:52 am
- Post datetime: 2011-05-14T12:58:51+00:00
- Post Title: To Aru Majutsu no Index psp help

> Reply from szfzafa
>
> grp.bin again!!
so u just open these .bin and search for some "PKv0" header plz?
i know some PS2 game have samiliar filenames.
I could not find any PKv0 headers in the bin files
## Post #12
- Username: szfzafa
- Rank: advanced
- Number of posts: 56
- Joined date: Sun Feb 27, 2011 6:46 pm
- Post datetime: 2011-05-14T16:59:32+00:00
- Post Title: To Aru Majutsu no Index psp help

Hmm.. i'm gonna to find a iso rip.
i heard this game can be emulatered with JPCSP.
## Post #13
- Username: philip92dk
- Rank: advanced
- Number of posts: 78
- Joined date: Mon Jul 26, 2010 3:52 am
- Post datetime: 2011-05-16T19:46:26+00:00
- Post Title: To Aru Majutsu no Index psp help

> Reply from szfzafa
>
> Hmm.. i'm gonna to find a iso rip.
i heard this game can be emulatered with JPCSP.
any news on this szfzafa?
## Post #14
- Username: szfzafa
- Rank: advanced
- Number of posts: 56
- Joined date: Sun Feb 27, 2011 6:46 pm
- Post datetime: 2011-05-16T20:46:38+00:00
- Post Title: To Aru Majutsu no Index psp help

Nooooope!!
i got a copy of this game, viewed its files, but found totally no clew..
however it can be emulated by JPCSP later versions. so u can rip it with OGLE, since JPCSP uses OpenGL.
see this: [viewtopic.php?f=16&t=6620](http://forum.xentax.com/viewtopic.php?f=16&t=6620)
## Post #15
- Username: philip92dk
- Rank: advanced
- Number of posts: 78
- Joined date: Mon Jul 26, 2010 3:52 am
- Post datetime: 2011-05-16T22:07:33+00:00
- Post Title: To Aru Majutsu no Index psp help

> Reply from szfzafa
>
>  Nooooope!!
i got a copy of this game, viewed its files, but found totally no clew..
however it can be emulated by JPCSP later versions. so u can rip it with OGLE, since JPCSP uses OpenGL.
see this: viewtopic.php?f=16&t=6620
thanks for the help szfzafa
## Post #16
- Username: Bigpet
- Rank: ultra-n00b
- Number of posts: 7
- Joined date: Wed Sep 25, 2013 10:08 pm
- Post datetime: 2013-09-26T02:31:14+00:00
- Post Title: Re: To Aru Majutsu no Index psp help

I'm currently trying to extract the 3D models from the PSP game "toaru kagaku no railgun", which should use the same format.

I've uploaded the file [here](https://mega.co.nz/#!Jo5xnAxT!dAeqGBLcp1WS2Ws4HeVsSEOr6uVpTPW6qbdiBT0lTVk) (edit: I just read the rules, is linking this now forbidden? I'm confused because there's already links in this thread) for people who are interested in helping. 

Immediately before the game displays the model it makes the following file reads: 

```
0x0000029F	SHADE_UMDRead	0x0005	seek64	0x01EEA800	offset=0x01EEA800 whence=0(set)
0x0000029F	SHADE_UMDRead	0x0005	read	0x00002800	data=0x08E4FBF0 size=0x00002800
0x000002A1	SHADE_UMDRead	0x0005	seek64	0x01EED000	offset=0x00000000 whence=1(cur)
0x000002A1	SHADE_UMDRead	0x0005	seek64	0x01EED000	offset=0x01EED000 whence=0(set)
0x000002A1	SHADE_UMDRead	0x0005	read	0x00001800	data=0x08E4FBF0 size=0x00001800
0x000002A3	SHADE_UMDRead	0x0005	seek64	0x01EEE800	offset=0x00000000 whence=1(cur)
0x000002A3	SHADE_UMDRead	0x0005	seek64	0x01EEE800	offset=0x01EEE800 whence=0(set)
0x000002A3	SHADE_UMDRead	0x0005	read	0x00002000	data=0x08E4FBF0 size=0x00002000
0x000002A5	SHADE_UMDRead	0x0005	seek64	0x01EF0800	offset=0x00000000 whence=1(cur)
0x000002A5	SHADE_UMDRead	0x0005	seek64	0x01EF0800	offset=0x01EF0800 whence=0(set)
0x000002A5	SHADE_UMDRead	0x0005	read	0x00002000	data=0x08E4FBF0 size=0x00002000
0x000002A7	SHADE_UMDRead	0x0005	seek64	0x01EF2800	offset=0x00000000 whence=1(cur)
0x000002A7	SHADE_UMDRead	0x0005	seek64	0x01EF2800	offset=0x01EF2800 whence=0(set)
0x000002A7	SHADE_UMDRead	0x0005	read	0x00001000	data=0x08E4FBF0 size=0x00001000
0x000002A9	SHADE_UMDRead	0x0005	seek64	0x01EF3800	offset=0x00000000 whence=1(cur)
0x000002A9	SHADE_UMDRead	0x0005	seek64	0x01EF3800	offset=0x01EF3800 whence=0(set)
0x000002A9	SHADE_UMDRead	0x0005	read	0x00000800	data=0x08E4FBF0 size=0x00000800
0x000002AB	SHADE_UMDRead	0x0005	seek64	0x01EF4000	offset=0x00000000 whence=1(cur)
0x000002AB	SHADE_UMDRead	0x0005	seek64	0x026BB800	offset=0x026BB800 whence=0(set)
0x000002AB	SHADE_UMDRead	0x0005	read	0x00001800	data=0x08E4FBF0 size=0x00001800
0x000002AD	SHADE_UMDRead	0x0005	seek64	0x026BD000	offset=0x00000000 whence=1(cur)
0x000002AD	SHADE_UMDRead	0x0005	seek64	0x01EF5800	offset=0x01EF5800 whence=0(set)
0x000002AD	SHADE_UMDRead	0x0005	read	0x00001800	data=0x08E4FBF0 size=0x00001800
0x000002AF	SHADE_UMDRead	0x0005	seek64	0x01EF7000	offset=0x00000000 whence=1(cur)
0x000002AF	SHADE_UMDRead	0x0005	seek64	0x01EF7000	offset=0x01EF7000 whence=0(set)
0x000002AF	SHADE_UMDRead	0x0005	read	0x00001000	data=0x08E4FBF0 size=0x00001000
0x000002B1	SHADE_UMDRead	0x0005	seek64	0x01EF8000	offset=0x00000000 whence=1(cur)
0x000002B1	SHADE_UMDRead	0x0005	seek64	0x02B66000	offset=0x02B66000 whence=0(set)
0x000002B1	SHADE_UMDRead	0x0005	read	0x00001800	data=0x08E4FBF0 size=0x00001800
0x000002B3	SHADE_UMDRead	0x0005	seek64	0x02B67800	offset=0x00000000 whence=1(cur)
0x000002B3	SHADE_UMDRead	0x0005	seek64	0x02B0F000	offset=0x02B0F000 whence=0(set)
0x000002B3	SHADE_UMDRead	0x0005	read	0x00057000	data=0x09A207E0 size=0x00057000
0x000002B5	SHADE_UMDRead	0x0005	seek64	0x02B66000	offset=0x00000000 whence=1(cur)
0x000002B5	SHADE_UMDRead	0x0005	seek64	0x03023800	offset=0x03023800 whence=0(set)
0x000002B5	SHADE_UMDRead	0x0005	read	0x00003800	data=0x08E4FBF0 size=0x00003800
0x000002B7	SHADE_UMDRead	0x0005	seek64	0x03027000	offset=0x00000000 whence=1(cur)
0x000002B7	SHADE_UMDRead	0x0005	seek64	0x0300E000	offset=0x0300E000 whence=0(set)
0x000002B7	SHADE_UMDRead	0x0005	read	0x00015800	data=0x09AE0FA0 size=0x00015800
0x000002B9	SHADE_UMDRead	0x0005	seek64	0x03023800	offset=0x00000000 whence=1(cur)
0x000002B9	SHADE_UMDRead	0x0005	seek64	0x03023800	offset=0x03023800 whence=0(set)
0x000002B9	SHADE_UMDRead	0x0005	read	0x00003800	data=0x08E4FBF0 size=0x00003800
0x000002BB	SHADE_UMDRead	0x0005	seek64	0x03027000	offset=0x00000000 whence=1(cur)
0x000002BB	SHADE_UMDRead	0x0005	seek64	0x03027000	offset=0x03027000 whence=0(set)
0x000002BB	SHADE_UMDRead	0x0005	read	0x00005800	data=0x09B11960 size=0x00005800

```


On further investigation we find that the 5th file in the USRDIR folder is GRP.BIN and the offsets are referring to that file. All of those offsets point to content that immediately follows some 0x00 padding, so we can be sure that this is the file that the offsets are referring to.

I can't quite make out what these mean however, so I'm currently working on deciphering the GRP.BIN file


What I've found is that the header at the start of the file can be described as follows:

```
	UNKNOWN x; //16bits
	short offset; //offset from beginning of file / BLOCK_SIZE
}

struct header{
	int HDR_LEN; //2335
	int BLOCK_SIZE;//2048 this means that files are 2KB aligned
	UNKNOWN rest; // 12bytes
	//10 00 00 00
	//10 00 00 00
	//FF FF 00 00
	filetable_entry files[HDR_LEN];
}

```

This header is followed by 0x00 padding until the first file referenced in the file table starts at 0x2800

I'm currently trying to figure out how the file blocks are compressed or how their header is comprised.

Most files start with 1 or 2 bytes (no discernable pattern for now) followed by the magic sequence 
```
SHTXPS
```
 then followed by pretty long header that seems to end at 0x412 (going off of just the first few files, still haven't confirmed this pattern) after the beginning of the file block.


I would be very appreciative of some help, I'm new to this and can't  recognize the patterns. I got no clue if this is some modified version of DEFLATE, just Huffman of whatever. I'm currently working on comparing the 412byte headers to see which values change based on file length or other factors
## Post #17
- Username: Bigpet
- Rank: ultra-n00b
- Number of posts: 7
- Joined date: Wed Sep 25, 2013 10:08 pm
- Post datetime: 2013-09-27T17:49:41+00:00
- Post Title: Re: To Aru Majutsu no Index psp help

realized that there's a seperate fourm for images so I posted my findings regarding the image format [there](http://forum.xentax.com/viewtopic.php?f=18&t=10814)

I'll be posting any findings regarding the "PSC6" headered 3D model/animation format here
## Post #18
- Username: Bigpet
- Rank: ultra-n00b
- Number of posts: 7
- Joined date: Wed Sep 25, 2013 10:08 pm
- Post datetime: 2013-10-04T22:59:34+00:00
- Post Title: Re: To Aru Majutsu no Index psp help

Well it's been a long time coming but I finally found vertecies




it may not look like much but I know that these are the vertices for a head.

The offset to the vertex list is in 0x40 , at that position you need to skip 0x122 bytes and then there's the vertex data. 0xA wide and the first 6 bytes of that 0xA are 3 signed shorts with the vertex coordinates, that's right signed fucking shorts. Whos fucking idea was that?

Anyway, I've got my suspicions as to the index buffer, trying that now. If someone else wants to try his hand, here's the file I'm working on: [https://dl.dropboxusercontent.com/u/158 ... /22046.PSC](https://dl.dropboxusercontent.com/u/1589003/in_forums/xentax/22046.PSC)
