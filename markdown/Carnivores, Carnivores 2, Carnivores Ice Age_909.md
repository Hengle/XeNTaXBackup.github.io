## Post #1
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2004-09-13T01:53:12+00:00
- Post Title: Carnivores, Carnivores 2, Carnivores Ice Age

Visit:

[http://carnivoresgames.tk](http://carnivoresgames.tk) (my fansite)

[http://machf.tripod.com/Hunt/Carn/MenuEng.htm](http://machf.tripod.com/Hunt/Carn/MenuEng.htm) (another fansite)

[http://s3.invisionfree.com/The_Carnivor ... hp?act=idx](http://s3.invisionfree.com/The_Carnivores_Saga/index.php?act=idx) (The 'officialy' unofficial Carnivores Forum)

There are currently three filetypes that support can be added for: .car, .map, and .rsc

If these can be added, we would much appreciate it!
## Post #2
- Username: friendsofwatto
- Rank: VVIP member
- Number of posts: 532
- Joined date: Wed Jun 30, 2004 10:01 pm
- Post datetime: 2004-09-13T12:20:34+00:00
- Post Title: Carnivores, Carnivores 2, Carnivores Ice Age

Hi there,

I have downloaded the specs from the forum you posted - but are you able to supply us with some small example files from the actual game (for testing etc.) If they are too big, is there a place where we can download the game or demo?

Also, what do you hope us to do with the files? If you want us to convert the textures into images you can view, or anything like that, I don't think MexCom will be able to do it. All MexCom can do is read archives, unless we specifically sit down and write a plugin just for that game. Please clarify what you want done, and we will try to help you out.

Thanks mate!

WATTO
[watto@watto.org](mailto:watto@watto.org)
[http://www.watto.org](http://www.watto.org)
## Post #3
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2004-09-13T22:36:36+00:00
- Post Title: Carnivores, Carnivores 2, Carnivores Ice Age

Sorry for all the links here, but to post the nessecary content for you here would have made this post extremely long. Anyway, here goes...

Okay... Let's see... For an example of a .car file, go to 

[http://www.geocities.com/dinoguy1000/downloads.html](http://www.geocities.com/dinoguy1000/downloads.html)

 and select where  it says "Click here to download the archeo.car file. (It's in a zipped folder)".  It will proceed to download and you can examine it. If you want to see what we have determined (this will also give you hints at what I want, as I don't exactly know myself   ), go to 

[http://machf.tripod.com/Hunt/Carn/car.htm](http://machf.tripod.com/Hunt/Carn/car.htm) (the page is in both Spanish and English right now...).

Next, the .map fliles. If you go to

[http://machf.tripod.com/Hunt/Carn/files.htm](http://machf.tripod.com/Hunt/Carn/files.htm), 

you can find four downloadable .map files (at the bottom of the page)(they are ones edited  by Machf, the mastermind behind the veiwers you see further up  ... They will still serve your purpose, right?). To veiw the structure so far ascertained, visit 

[http://machf.tripod.com/Hunt/Carn/map.htm](http://machf.tripod.com/Hunt/Carn/map.htm).

As for .rsc files, I can't think of where to get ahold of any aside from downloading a demo (if you have enough time, try a google search). However, you can look at what we have done with them at 

[http://machf.tripod.com/Hunt/Carn/rsc.htm](http://machf.tripod.com/Hunt/Carn/rsc.htm).

Basically, they are the main source files for the levels, and the .map files merely act as 'pointers' for them.

Now, for what exactly I want, I can't explain clearly, but basically veiwers like the ones seen on Machf's downloads page. Once again, I apologise for the number of links, but there was no way around them. I just hope you have the patience (and time!) to read down this far...
## Post #4
- Username: friendsofwatto
- Rank: VVIP member
- Number of posts: 532
- Joined date: Wed Jun 30, 2004 10:01 pm
- Post datetime: 2004-09-14T03:37:36+00:00
- Post Title: Carnivores, Carnivores 2, Carnivores Ice Age

OK, thanks for that, We will take a look at them whenever we get the time.

WATTO
[watto@watto.org](mailto:watto@watto.org)
[http://www.watto.org](http://www.watto.org)
## Post #5
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2004-09-15T01:59:16+00:00
- Post Title: Carnivores, Carnivores 2, Carnivores Ice Age

You're welcome!

I hope you get the time soon (but I'm not trying to rush you or anything...), because we would really like to see these files supported in a "professional" veiwer...
## Post #6
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2004-09-15T02:06:48+00:00
- Post Title: Carnivores, Carnivores 2, Carnivores Ice Age

Before I forget to tell you, the Carnivores game uses slightly (I think) different formats than Carn2 and Carn Ice Age.
## Post #7
- Username: Mr.Mouse
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2004-09-15T07:25:13+00:00
- Post Title: Carnivores, Carnivores 2, Carnivores Ice Age

As WATTO said, we'd have to create a viewer first to plug into MexCom. Currently, only standard formats are supported for viewing/listening such as tif, bmp, jpg, gif, wav, xm, mod etc.
## Post #8
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2004-09-15T17:41:08+00:00
- Post Title: Carnivores, Carnivores 2, Carnivores Ice Age

Well, these files are essentially archive files. The major obstacle would be the fact that they are in a raw, uncompressed format (basically, it's like they made the different details - graphics, sounds, and animations - and used a hex editor to "dump" all of it into one file. Do keep in mind, though, that that's not how it was done, they had editors of their own that they used).

According to Machf, it would be very simple to extract the graphics and sounds and export them to .bmp and .wav files, respectively. As for the animations, based on what I know of .gif files, they could probably be exported to .gif formats.

However, I don't know as much about this stuff as all that gibberish might lead you to believe, so I could be wrong about it in multiple areas...
## Post #9
- Username: Mr.Mouse
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2004-09-15T20:40:25+00:00
- Post Title: Carnivores, Carnivores 2, Carnivores Ice Age

Okay, no problem, if we can extract it, we will.
## Post #10
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2004-09-17T20:40:42+00:00
- Post Title: Carnivores, Carnivores 2, Carnivores Ice Age

Thanks!
## Post #11
- Username: machf
- Rank: N/A
- Number of posts: N/A
- Joined date: N/A
- Post datetime: 2005-01-01T19:42:31+00:00
- Post Title: Carnivores, Carnivores 2, Carnivores Ice Age

Well... I'd suggest you start with the .car files, which are sort of "universal" between all three games. They each contain, among other things, a single texture (which is always 256 pixels wide, the length in bytes allows you to calculate the height; each pixel is 16 bits, or 2 bytes, long, stored in the same format as old-style TGA files - saving it on a 16-bit BMP file would just require flipping the line order), and a variable number of sounds, stored as raw PCM data, sampled as 16-bit mono files at 22050 Hz. If you could just extract and/or add them back into the original file, it would be more than enough.
## Post #12
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2005-02-13T22:00:25+00:00
- Post Title: Carnivores, Carnivores 2, Carnivores Ice Age

Hey, FriendsofWatto, d'you think you could take another look at this if you get the time? I tried to get help writing a script for the .car files, but apparently everyone else just doesn't want to deal with a n00b such as myself...
## Post #13
- Username: friendsofwatto
- Rank: VVIP member
- Number of posts: 532
- Joined date: Wed Jun 30, 2004 10:01 pm
- Post datetime: 2005-02-13T22:25:28+00:00
- Post Title: Carnivores, Carnivores 2, Carnivores Ice Age

Hey,

I did start writing a script for these files, but I ended up scrapping it because the format is just too messy. I *may* have another look at it but don't know if I will end up writing a script for it. The other reason why I probably won't end up doing a script is because I have only done 2 scripts before for pretty simple archive structures - I don't know if I can do something for the structure in the *.car files.

Alternatively though, I may be able to help you correct any of your scripts.

I will take another look at it over the next few days - I don't have anything else to do at the moment - and will see what I come up with.

WATTO
[watto@watto.org](mailto:watto@watto.org)
[http://www.watto.org](http://www.watto.org)
## Post #14
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2005-02-13T23:19:43+00:00
- Post Title: Carnivores, Carnivores 2, Carnivores Ice Age

Okay. From what you said, I won't get my hopes up, but I will keep my fingers crossed. Indeed, when I started shadowing here, and saw how simple most of the other formats were as opposed to these, I am beginning to doubt whether MexCom could even handle them. And I don't have a clue how to handle the 3-D models, other than exporting the whole chunk to one file...
## Post #15
- Username: Mr.Mouse
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2005-02-14T08:20:36+00:00
- Post Title: Carnivores, Carnivores 2, Carnivores Ice Age

> Reply from Dinoguy1000
>
> Hey, FriendsofWatto, d'you think you could take another look at this if you get the time? I tried to get help writing a script for the .car files, but apparently everyone else just doesn't want to deal with a n00b such as myself...
 Well, the problem is with having this as a hobby, and not as a permanent job, that one has to find time to do it in free time.   My work in research does not allow much free time, and I love time with my family as well. 

Besides that, I have just come back from a weekend in Paris to visit some old friends...
## Post #16
- Username: friendsofwatto
- Rank: VVIP member
- Number of posts: 532
- Joined date: Wed Jun 30, 2004 10:01 pm
- Post datetime: 2005-02-14T09:14:57+00:00
- Post Title: 

OK mate, here is a script I wrote up for the *.car format...

```
Get numAnim Long 0 ;
Get numSound Long 0 ;
Get numPoint Long 0 ;
Get numTri Long 0 ;
Get picSize Long 0 ;

For nT = 1 to numTri ;
SavePos FOT 0 ;
Set FST Long 64 ;
Log "" FOT FST 0 0 ;
Math FOT += FST ;
GoTo FOT 0 ;
Next nT ;

For nP = 1 to numPoint ;
SavePos FOP 0 ;
Set FSP Long 16 ;
Log "" FOP FSP 0 0 ;
Math FOP += FSP ;
GoTo FOP 0 ;
Next nP ;

SavePos FO 0 ;
Log "" FO picSize 0 0 ;
Math FO += picSize ;
GoTo FO 0 ;

For nA = 1 to numAnim ;
SavePos FOA 0 ;
SavePos JPA 0 ;
Get FNA String 0 ;
Math JPA += 36 ;
GoTo JPA 0 ;
Get JPA2 Long 0 ;
Math JPA2 *= numPoint ;
Math JPA2 *= 6 ;
Set FSA Long 40 ;
Math FSA += JPA2 ;
Log FN FOA FSA 0 0 ;
Math FOA += FSA ;
GoTo FOA 0 ;
Next nA ;

For nS = 1 to numSound ;
SavePos FOS 0 ;
SavePos JPS 0 ;
Get FNS String 0 ;
Math JPS += 32 ;
GoTo JPS 0 ;
Get JPS2 Long 0 ;
Set FSS Long 36 ;
Math FSS += JPS2 ;
Log FN FOS FSS 0 0 ;
Math FOS += FSS ;
GoTo FOS 0 ;
Next nS ;
```


I have also attached the compiled *.bms script for you, so you don't get end-or-line errors and such.

Now, the script did compile, and i did test it on an archive and got no errors, so it should be close to correct, if not fully correct.

Oh, if you were to use the script I just posted above, you would need to remove all the blank lines - I just put all those lines in there to make it easier to see where the different loops are.

The script should list all the anims, points, triangles, sounds, and the texture image.

Good luck - hopefully if there are any problems with it then you will be able to fix them. Hope it works   

WATTO
[watto@watto.org](mailto:watto@watto.org)
[http://www.watto.org](http://www.watto.org)
[car.zip](https://xentaxbackup.github.io/file/130_car.zip)
## Post #17
- Username: Mr.Mouse
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2005-02-14T10:26:24+00:00
- Post Title: 

F*cking brilliant!  I tried it on the archeo.car file and it worked! I extracted all files fine! All 1244 of them. 

Here's the mc.mrf file that contains the new Esoteria .e3 and the Carnivores .CAR scripts. 

Backup the old mc.mrf in the MultiEx Commander data/config dir, and put this one in instead. you will be able to open .car files now. Hope they don't have diverging formats for different .car files. Then it should work fine.
[mc.mrf](https://xentaxbackup.github.io/file/131_mc.mrf)
## Post #18
- Username: friendsofwatto
- Rank: VVIP member
- Number of posts: 532
- Joined date: Wed Jun 30, 2004 10:01 pm
- Post datetime: 2005-02-14T11:07:07+00:00
- Post Title: 

Thanks mate - it was a beast to try and write a script for! I tested it on a Carnivores 2 *.car file within the scriptor - it didn't complain after I fixed a loop that I ran off the end of the file.

The thing I was most worried about was variable overloading - can I use the same variable name in different parts of the script, or not. For example, in each of the loops I wanted to make an FO variable - would I be able to simply reuse the variable name over and over, or do I need to have unique names like I did in the script?

Thanks mate - the scripting is pretty smooth 

WATTO
[watto@watto.org](mailto:watto@watto.org)
[http://www.watto.org](http://www.watto.org)
## Post #19
- Username: Mr.Mouse
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2005-02-14T11:20:08+00:00
- Post Title: 

Oh yes, you can just reuse the same variable you want, just like in regular programming. When the Scriptor encounters a new variable name it will 'declare' that one, when set in commands like "Set", "SavePos" etc. 
After that the value of this may change. it will have the last value you give it, if you tend to reuse it for another purpose, just set it to any value you need.  For example, if you have a 

```
For T = 1 To FileCount ;
BlahBlah; 
Next T ;

```


You can simply reuse it, for instance :

```
Math FD += 4 ; ' do some stuff with FD ;
Set FileCount Long FD ; set FileCount to this value 

```


or 

```
Log FN FO FS FileCount 0 ;

```


Whatever you wish.
## Post #20
- Username: friendsofwatto
- Rank: VVIP member
- Number of posts: 532
- Joined date: Wed Jun 30, 2004 10:01 pm
- Post datetime: 2005-02-14T12:04:43+00:00
- Post Title: 

OK thanks mate, thats just what I wanted to know - that will make things alittle nicer in the future. Good work!

WATTO
[watto@watto.org](mailto:watto@watto.org)
[http://www.watto.org](http://www.watto.org)
## Post #21
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2005-02-15T02:17:31+00:00
- Post Title: 

Oh, man, this is sweet!  I can't wait to try it for myself! If you would like, I could upload some more *.car files from both Carnivores and C2 for you to do further testing on! 

EDIT: I tried it on the ALLO.CAR file from Carn2 and it extracted all 1007 files without a hitch! It's too big to upload, but I'll upload it at my site and give a link to it and more.

And I know I'm probably not in much of a position to ask for favors, but is it possible to edit the script to add the type of data to the filename? (e.g. if it's an animation, have something like animX, or a triangle would be triangX...)
## Post #22
- Username: machf
- Rank: N/A
- Number of posts: N/A
- Joined date: N/A
- Post datetime: 2005-02-15T04:37:14+00:00
- Post Title: 

Well, this is great news - thank you for your work, guys.
Now DG was talking about the .3df files... well, I guess that would be easier, as they have a lot in common with the .car files and seem to be a little less complex (no animation data, for example, and no sounds either, I think).
## Post #23
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-02-15T04:46:35+00:00
- Post Title: 

I guess you have to register to be able to see any attachments, right?
## Post #24
- Username: Mr.Mouse
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2005-02-15T08:03:35+00:00
- Post Title: 

> Reply from machf
>
> I guess you have to register to be able to see any attachments, right?

Yes, you do. 

And Dinoguy, it is not yet possible to do something like that with the script. Basically, because the script hasn't got a clue which files are what. It just extracts.
## Post #25
- Username: friendsofwatto
- Rank: VVIP member
- Number of posts: 532
- Joined date: Wed Jun 30, 2004 10:01 pm
- Post datetime: 2005-02-15T11:42:58+00:00
- Post Title: 

The closest thing you would be able to do is give each file a different extension based on the file type. Thats what I do for my Game Extractor plugin.

So, Mr Mouse, is there any way to generate the default name (for files that don't have any names) and append a string to the end of it. Similarly for the files with filenames, can we append an extension to them?

The extensions I gave the files, i think, were *.pnt (point), *.tri (triangle), *.anm (animation) and *.snd (sound)

Thanks mate.

WATTO
[watto@watto.org](mailto:watto@watto.org)
[http://www.watto.org](http://www.watto.org)
## Post #26
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2005-02-15T16:03:49+00:00
- Post Title: 

Actually, that would work too. Until then, though, we'll just have to go by the file sizes...
## Post #27
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-02-15T21:41:55+00:00
- Post Title: 

I don't know what I may have done wrong, but I keep getting a "List file was empty, possible error in format" error message whenever I try to open a .car file...
Something to do with ActiveX, apparently, as behind the main window, I've found another one that says "MultiEx ActiveX DLL - Retrieving Archive Contents" which seems to be frozen.
## Post #28
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-02-15T21:55:10+00:00
- Post Title: 

Never mind, I found out the Windows Scripting Host had to be installed for it to run properly...
## Post #29
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-02-15T23:41:03+00:00
- Post Title: 

These are the .car files I've been unable to open so far:

Carnivores: Explo.car, Wind.car, 

Carnivores 2: Wcircle2.car, Wind.car

Ice Age: Sship1.car, Wcircle2.car, Wind.car

Others: Auto_r.car (the autorifle mod!!)

I'll have to revise them and see how they differ from the standard so far...

The error messages are "Process Error: Get called with invalid datatype" and then "Multiex 3 could not process".
## Post #30
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-02-16T00:13:56+00:00
- Post Title: 

Well, a quick check reveals that Explo.car, Wind.car and Wcircle2.car all have 0 sounds, while Sship1.car has 0 animations, so maybe that's wreaking havoc with the FOR loops in the script, which begin at 1... Can you use a conditional before the loop or something?

The Auto_r.car file needs a more thorough revision, but it's long been suspected to be somewhat corrupt, IIRC.
## Post #31
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-02-16T00:50:27+00:00
- Post Title: 

Upon further examination, the Auto_r.car file is indeed corrupt, so I'll have to make a new one. I suppose that somehow confirms my suspicions about the "0" values in the animations and sounds fields messing with the script...
## Post #32
- Username: Mr.Mouse
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2005-02-16T06:42:22+00:00
- Post Title: 

From your info, machf, it looks like the .CAR formats are diverging and the authors used 'archives' that suited them for whatever purpose they had in mind. Like I hoped it would not be.  The 0/1 thing in the loop you mention is not the problem, I think, unless 0 is also an entry (starting from 0 upwards).

Can you see, using a hexeditor, that the values that should be numSound etc are indeed 0? Is it possible to attach some of these non-functional files here? Or at least some headers? You can also mail them to the address you can find here: [http://multiex.xentax.com](http://multiex.xentax.com)
## Post #33
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-02-16T20:08:18+00:00
- Post Title: 

Well, the Wcircle2.car and Wind.car files are small enough that I could attach them here without problems...
[Wind.zip](https://xentaxbackup.github.io/file/134_Wind.zip)
## Post #34
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-02-16T20:09:12+00:00
- Post Title: 

Here's the other one:
[Wcircle2.zip](https://xentaxbackup.github.io/file/135_Wcircle2.zip)
## Post #35
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-02-16T20:47:47+00:00
- Post Title: 

Explo.car is small, too, but I'd say Sship1.car is too big (~300KB, >150KB zipped). Do you want me to attach it to a post too?
[Explo.zip](https://xentaxbackup.github.io/file/136_Explo.zip)
## Post #36
- Username: Mr.Mouse
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2005-02-17T10:11:59+00:00
- Post Title: 

Thanks for the files. We will take a look at them. At first glance, it does seem there are some big and some minor differences with the suported .CAR format.
## Post #37
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-02-17T16:08:48+00:00
- Post Title: 

Hmmm... at first glance, I only notice very minor ones (like the lack of a "msc: N" at the end of the header string in Explo.car, replaced by a couple 4-byte integers, or Wcircle2.car having the 256-byte xref table appended at the end when it shouldn't be there).
## Post #38
- Username: Mr.Mouse
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2005-02-18T22:24:09+00:00
- Post Title: 

I see, well, I will take a look at the script and alter it.
## Post #39
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-02-25T05:02:43+00:00
- Post Title: 

Based on your script, I wonder if this one will work with .3df files...

```
Get numTri Long 0 ;
Get numJoint Long 0 ;
Get picSize Long 0 ;

For nT = 1 to numTri ;
SavePos FOT 0 ;
Set FST Long 64 ;
Log "" FOT FST 0 0 ;
Math FOT += FST ;
GoTo FOT 0 ;
Next nT ;

For nP = 1 to numPoint ;
SavePos FOP 0 ;
Set FSP Long 16 ;
Log "" FOP FSP 0 0 ;
Math FOP += FSP ;
GoTo FOP 0 ;
Next nP ;

For nJ = 1 to numJoint ;
SavePos FOJ 0 ;
Set FSJ Long 48 ;
Log "" FOJ FSJ 0 0 ;
Math FOJ += FSJ ;
GoTo FOJ 0 ;
Next nJ ;

SavePos FO 0 ;
Log "" FO picSize 0 0 ;
Math FO += picSize ;
GoTo FO 0 ;


```


No animations or sounds, but joints (or bones, whatever you prefer to call them) instead...
## Post #40
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-02-25T05:29:12+00:00
- Post Title: 

Well, it worked, here's the BMS file...
[3df.zip](https://xentaxbackup.github.io/file/137_3df.zip)
## Post #41
- Username: Mr.Mouse
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2005-02-25T08:19:40+00:00
- Post Title: 

thx
## Post #42
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2005-02-26T00:30:05+00:00
- Post Title: 

That's two down, two to go... the .MAP and .RSC are going to be real nightmares to write, I'd imagine...
## Post #43
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-02-26T04:54:05+00:00
- Post Title: 

No, .map files would be really easy and very boring to look at... they are, after all, just that, maps (or masks, if you prefer) - no other resources (sounds, textures, 3D models, animations, etc.) within them at all.
The .rsc files will be a real nightmare indeed, though.
## Post #44
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-02-26T05:33:35+00:00
- Post Title: 

Speaking of .map and .rsc files, it's easy to determine whether a .map file belongs to Carnivores or Carnivores 2/Ice Age just by looking at its size, as they are of fixed byte lengths... however, with the .rsc files that's not possible, as they are by design variable-size files. There's even no specific information in their headers to tell them apart. Any suggestions?
## Post #45
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2005-02-26T13:28:16+00:00
- Post Title: 

The only way I could think of would be to search for the presence or absence of a specific type of data...
## Post #46
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-03-02T00:56:18+00:00
- Post Title: 

> Reply from Mr.Mouse
>
> I see, well, I will take a look at the script and alter it.

I've tested the script from within Mex3Scriptor, deleting some sections and adding them gradually. The file explo.car is read without problems as long as the script doesn't attempt to read the sounds at the end (of which that file has none), otherwise it's "Get called with invalid datatype", followed by "File number must be specified", and the same happens with Wind.car and Wcircle2.car (which have no sounds either). With the Sship1.car file, the problem happens when it attempts to read the animations (and that file has none), giving an "overflow" error ("Run-time error '6'") and crashing the program; it works if I omit the for-next loop for the animations.

I've decided to attach the Sship1.car file to this post in case you want to test it too.
[Sship1.zip](https://xentaxbackup.github.io/file/139_Sship1.zip)
## Post #47
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-03-02T04:46:11+00:00
- Post Title: 

I've made a corrected version of your .CAR script, now it loads the Explo.car, Wcircle2.car and Wind.car files, but alas, not the Sship1.car file yet...

```
Get numAnim Long 0 ;
Get numSound Long 0 ;
Get numPoint Long 0 ;
Get numTri Long 0 ;
Get picSize Long 0 ;
If numTri > 0 ;
For nT = 1 To numTri ;
SavePos FOT 0 ;
Set FST Long 64 ;
Log "" FOT FST 0 0 ;
Math FOT += FST ;
GoTo FOT 0 ;
Next nT ;
Else ;
EndIf ;
If numPoint > 0 ;
For nP = 1 To numPoint ;
SavePos FOP 0 ;
Set FSP Long 16 ;
Log "" FOP FSP 0 0 ;
Math FOP += FSP ;
GoTo FOP 0 ;
Next nP ;
Else ;
EndIf ;
If picSize > 0 ;
SavePos FO 0 ;
Log "" FO picSize 0 0 ;
Math FO += picSize ;
GoTo FO 0 ;
Else ;
EndIf ;
For nA = 1 To numAnim ;
SavePos FOA 0 ;
GetDString FNA 32 0 ;
Get FDA Long 0 ;
Get JPA2 Long 0 ;
Math JPA2 *= numPoint ;
Math JPA2 *= 6 ;
Set FSA Long 40 ;
Math FSA += JPA2 ;
Log "" FOA FSA 0 0 ;
Math FOA += FSA ;
GoTo FOA 0 ;
Next nA ;
For nS = 1 To numSound ;
SavePos FOS 0 ;
GetDString FNS 32 0 ;
Get JPS2 Long 0 ;
Set FSS Long 36 ;
Math FSS += JPS2 ;
Log "" FOS FSS 0 0 ;
Math FOS += FSS ;
GoTo FOS 0 ;
Next nS ;

```


If I attempt to use an If... Else...Endif conditional around the animations for...next loop, the script seems to enter an infinite loop with any file. If I don't, it just crashes with an overflow error when I attempt to load Sship1.car.
[CAR.zip](https://xentaxbackup.github.io/file/141_CAR.zip)
## Post #48
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-03-02T07:30:42+00:00
- Post Title: 

I managed to correct those problems, but now the program (MultiEx Commander, not the scripter) crashes with a runtime error 9 ('Subscript out of range') whenever I attempt to extract any part of the files or even by just clicking on them...

```
GetDString nameFile 24 0 ;
SavePos ex 0 ;
GetDString extraFile 8 0 ;
Set FileName String nameFile ;
Set FileExtra String extraFile ;
Set A Long 24 ;
Set B Long 8 ;
Log FileName st A 0 0 ;
Log FileExtra ex B 0 0 ;
Get numAnim Long 0 ;
Get numSound Long 0 ;
Get numPoint Long 0 ;
Get numTri Long 0 ;
Get picSize Long 0 ;
For nT = 1 To numTri ;
SavePos FOT 0 ;
Set FST Long 64 ;
Log "" FOT FST 0 0 ;
Math FOT += FST ;
GoTo FOT 0 ;
Next nT ;
For nP = 1 To numPoint ;
SavePos FOP 0 ;
Set FSP Long 16 ;
Log "" FOP FSP 0 0 ;
Math FOP += FSP ;
GoTo FOP 0 ;
Next nP ;
SavePos FO 0 ;
Log "" FO picSize 0 0 ;
Math FO += picSize ;
GoTo FO 0 ;
If numAnim = 0 ;
SavePos FOA 0 ;
Else ;
For nA = 1 To numAnim ;
GetDString FNA 32 0 ;
SavePos FOA 0 ;
Get divCoord Long 0 ;
Get numFrames Long 0 ;
Math numFrames *= numPoint ;
Math numFrames *= 6 ;
Set FSA Long 8 ;
Math numFrames += FSA ;
Log FNA FOA numFrames 0 0 ;
Math FOA += numFrames ;
GoTo FOA 0 ;
Next nA ;
EndIf ;
For nS = 1 To numSound ;
GetDString FNS 32 0 ;
Get JPS2 Long 0 ;
SavePos FOS 0 ;
Log FNS FOS JPS2 0 0 ;
Math FOS += JPS2 ;
GoTo FOS 0 ;
Next nS ;

```


Maybe it has to do with the filenames?
## Post #49
- Username: Mr.Mouse
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2005-03-02T07:35:10+00:00
- Post Title: 

You are using the "Use custom BMS on..." option? Please don't. 
It's bugged, as you may or may not have read in other threads on this forum.    

You should follow this procedure if you wish to use a new/custom BMS:

[viewtopic.php?t=1098](http://forum.xentax.com/viewtopic.php?t=1098)

The bug is removed in the next release.
## Post #50
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-03-02T07:47:00+00:00
- Post Title: 

Oh, OK... I wanted to avoid overwriting the mc.mrf file until I got the thing working properly, but if you say so...

It looks like it's working fine now, though I may refine it a bit yet. That will have to wait until tomorrow, I'm off to sleep right now.
## Post #51
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-03-02T14:52:18+00:00
- Post Title: 

Well, here are the revised scripts for the Carnivores .CAR and .3DF formats:

3DF.bms

```
Get numTri Long 0 ;
Get numJoint Long 0 ;
Get picSize Long 0 ;
Set A Long 0 ;
Set B Long 5 ;
Log "" A B 0 0 ;
For nT = 1 To numTri ;
SavePos FOT 0 ;
Set FST Long 64 ;
Log "" FOT FST 0 0 ;
Math FOT += FST ;
GoTo FOT 0 ;
Next nT ;
For nP = 1 To numPoint ;
SavePos FOP 0 ;
Set FSP Long 16 ;
Log "" FOP FSP 0 0 ;
Math FOP += FSP ;
GoTo FOP 0 ;
Next nP ;
For nJ = 1 To numJoint ;
SavePos FOP 0 ;
Set FSJ Long 48 ;
Log "" FOJ FSJ 0 0 ;
Math FOJ += FSJ ;
GoTo FOJ 0 ;
Next nJ ;
SavePos FO 0 ;
Log "" FO picSize 0 0 ;
Math FO += picSize ;
GoTo FO 0 ;

```


CAR.bms

```
GetDString nameFile 24 0 ;
SavePos ex 0 ;
GetDString extraFile 8 0 ;
Get numAnim Long 0 ;
Get numSound Long 0 ;
Get numPoint Long 0 ;
Get numTri Long 0 ;
Get picSize Long 0 ;
Set FileName String nameFile ;
Set FileExtra String extraFile ;
Set A Long 24 ;
Set B Long 7 ;
Log FileName ex B 0 0 ;
For nT = 1 To numTri ;
SavePos FOT 0 ;
Set FST Long 64 ;
Log "" FOT FST 0 0 ;
Math FOT += FST ;
GoTo FOT 0 ;
Next nT ;
For nP = 1 To numPoint ;
SavePos FOP 0 ;
Set FSP Long 16 ;
Log "" FOP FSP 0 0 ;
Math FOP += FSP ;
GoTo FOP 0 ;
Next nP ;
SavePos FO 0 ;
Log "" FO picSize 0 0 ;
Math FO += picSize ;
GoTo FO 0 ;
If numAnim = 0 ;
SavePos FOA 0 ;
Else ;
For nA = 1 To numAnim ;
GetDString FNA 32 0 ;
Set FileName String FNA ;
SavePos FOA 0 ;
Get divCoord Long 0 ;
Get numFrames Long 0 ;
Math numFrames *= numPoint ;
Math numFrames *= 6 ;
Set FSA Long 8 ;
Math numFrames += FSA ;
Log FileName FOA numFrames 0 0 ;
Math FOA += numFrames ;
GoTo FOA 0 ;
Next nA ;
EndIf ;
For nS = 1 To numSound ;
GetDString FNS 32 0 ;
Set FileName String FNS ;
Get JPS2 Long 0 ;
SavePos FOS 0 ;
Log FileName FOS JPS2 0 0 ;
Math FOS += JPS2 ;
GoTo FOS 0 ;
Next nS ;
If numSound > 0 ;
Set XREF Long 64 ;
Log "" FOS XREF 0 0 ;
Else ;
EndIf ;

```


(Though that "EndIf ;" at the end keeps disappearing whenever I reload the file)
[CAR+3DF.zip](https://xentaxbackup.github.io/file/142_CAR+3DF.zip)
## Post #52
- Username: Mr.Mouse
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2005-03-02T14:56:07+00:00
- Post Title: 

Yes, I noticed that bug as well, the disappearing EndIf.    Will fix. Thanks for the scripts!
## Post #53
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-03-02T14:59:16+00:00
- Post Title: 

I guess in the meantime the whole last If..Endif block could be left out until it's working properly...

BTW, is there a way to add text to an already existing string or define one from scratch? Looking at a lot of "nonameNN" entries isn't too informative...
## Post #54
- Username: Mr.Mouse
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2005-03-02T15:07:43+00:00
- Post Title: 

Well, you could just write another last statement there like "Set DUMMY Long 0 ; ", right behind the last EndIf. you will see that the EndIf now stays.  

And no, I haven't included that "create your own string option". Might do, though. Some string functions.
## Post #55
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-03-02T15:20:25+00:00
- Post Title: 

OK, thanks. Here's another quick question: is there a way to add data before saving a block? Since with the addition of the proper headers (18 bytes for a .TGA file, 40 bytes for a .WAV file) one could extract the texture and sound data directly to standard formats...
## Post #56
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2005-03-02T15:52:47+00:00
- Post Title: 

Wow, nice work, machf! I still need to learn a scripting language (like JS), I have a feeling that writing scripts for MexCom would be much easier if I had one under my belt... I keep meaning to take the time to learn one, but I never get around to it...
## Post #57
- Username: Mr.Mouse
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2005-03-02T16:26:12+00:00
- Post Title: 

> Reply from machf
>
> OK, thanks. Here's another quick question: is there a way to add data before saving a block? Since with the addition of the proper headers (18 bytes for a .TGA file, 40 bytes for a .WAV file) one could extract the texture and sound data directly to standard formats...

Well, there's none built in. You see, the script was written so, that generic formats could be included. If a game doesn't care about headers and removes them to save space or some other reason, the script can't do anything about that, as it was not written to be able to handle such specific details, that are not common. Still, the option would be nice to have, perhaps an "AddHeader <path> ;" command would be nice. Let me think about it.
## Post #58
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-03-06T19:57:39+00:00
- Post Title: 

I've made yet another modification to both scripts...


First, the .3DF script now also displays the joint/bone names the same way the .CAR script does with the sound and animation names:

> Get numPoint Long 0 ;
>
> Get numTri Long 0 ;
>
> Get numJoint Long 0 ;
>
> Get picSize Long 0 ;
>
> Set A Long 0 ;
>
> Set B Long 5 ;
>
> Log "" A B 0 0 ;
>
> For nT = 1 To numTri ;
>
> SavePos FOT 0 ;
>
> Set FST Long 64 ;
>
> Log "" FOT FST 0 0 ;
>
> Math FOT += FST ;
>
> GoTo FOT 0 ;
>
> Next nT ;
>
> For nP = 1 To numPoint ;
>
> SavePos FOP 0 ;
>
> Set FSP Long 16 ;
>
> Log "" FOP FSP 0 0 ;
>
> Math FOP += FSP ;
>
> GoTo FOP 0 ;
>
> Next nP ;
>
> For nJ = 1 To numJoint ;
>
> GetDString FNJ 32 0 ;
>
> Set FileName String FNJ ;
>
> SavePos FOJ 0 ;
>
> Set FSJ Long 16 ;
>
> Log FileName FOJ FSJ 0 0 ;
>
> Math FOJ += FSJ ;
>
> GoTo FOJ 0 ;
>
> Next nJ ;
>
> SavePos FO 0 ;
>
> Log "" FO picSize 0 0 ;
>
> Math FO += picSize ;
>
> GoTo FO 0 ;

And second, I did something else to the .CAR script to attempt to read the xref table at the nd with the help of an If..Else..Endif conditional (though it doesn't work properly with this version, apaprently the conditional is ignored, resulting in a 0-bytes block when the xref table isn't present):


> SavePos st 0 ;
>
> GetDString nameFile 24 0 ;
>
> SavePos ex 0 ;
>
> GetDString extraFile 8 0 ;
>
> Get numAnim Long 0 ;
>
> Get numSound Long 0 ;
>
> Get numPoint Long 0 ;
>
> Get numTri Long 0 ;
>
> Get picSize Long 0 ;
>
> Set FileName String nameFile ;
>
> Set FileExtra String extraFile ;
>
> Set A Long 24 ;
>
> Set B Long 7 ;
>
> Log FileName ex B 0 0 ;
>
> For nT = 1 To numTri ;
>
> SavePos FOT 0 ;
>
> Set FST Long 64 ;
>
> Log "" FOT FST 0 0 ;
>
> Math FOT += FST ;
>
> GoTo FOT 0 ;
>
> Next nT ;
>
> For nP = 1 To numPoint ;
>
> SavePos FOP 0 ;
>
> Set FSP Long 16 ;
>
> Log "" FOP FSP 0 0 ;
>
> Math FOP += FSP ;
>
> GoTo FOP 0 ;
>
> Next nP ;
>
> SavePos FO 0 ;
>
> Log "" FO picSize 0 0 ;
>
> Math FO += picSize ;
>
> GoTo FO 0 ;
>
> If numAnim = 0 ;
>
> SavePos FOA 0 ;
>
> Else ;
>
> For nA = 1 To numAnim ;
>
> GetDString FNA 32 0 ;
>
> Set FileName String FNA ;
>
> SavePos FOA 0 ;
>
> Get divCoord Long 0 ;
>
> Get numFrames Long 0 ;
>
> Math numFrames *= numPoint ;
>
> Math numFrames *= 6 ;
>
> Set FSA Long 8 ;
>
> Math numFrames += FSA ;
>
> Log FileName FOA numFrames 0 0 ;
>
> Math FOA += numFrames ;
>
> GoTo FOA 0 ;
>
> Next nA ;
>
> EndIf ;
>
> For nS = 1 To numSound ;
>
> GetDString FNS 32 0 ;
>
> Set FileName String FNS ;
>
> Get JPS2 Long 0 ;
>
> SavePos FOS 0 ;
>
> Log FileName FOS JPS2 0 0 ;
>
> Math FOS += JPS2 ;
>
> GoTo FOS 0 ;
>
> Next nS ;
>
> If numSound = 0 ;
>
> SavePos Table 0 ;
>
> Else ;
>
> SavePos Table 0 ;
>
> Set XREF Long 64 ;
>
> Log "" Table XREF 0 0 ;
>
> EndIf ;
>
> GoTo 0 0 ;
[CAR+3DF.zip](https://xentaxbackup.github.io/file/143_CAR+3DF.zip)
## Post #59
- Username: Mr.Mouse
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2005-03-06T20:45:15+00:00
- Post Title: 

Okay , good. By the way, I have fixed the If-bug and that will work better in the next version. Also, I have included commands for a bit of string manipulation, so now you can edit filenames prior logging them.  Though the next version will need a registration (either by donation or other means of support) for this type of advanced usage, you will recieve a code, as you already donated your support
## Post #60
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2005-03-06T22:50:06+00:00
- Post Title: 

I know this might sound like I'm trying to take credit when I really didn't work on the scripts themselves any, but will I recieve a code for my part?
## Post #61
- Username: Mr.Mouse
- Rank: Site Admin
- Number of posts: 4073
- Joined date: Thu Jan 16, 2003 1:45 am
- Post datetime: 2005-03-06T23:06:10+00:00
- Post Title: 

> Reply from Dinoguy1000
>
> I know this might sound like I'm trying to take credit when I really didn't work on the scripts themselves any, but will I recieve a code for my part?

Of course! You are already in my "Acknowledgements", so yes.
## Post #62
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2005-03-06T23:53:33+00:00
- Post Title: 

Ok, thanks! And I swear, I will try to learn how to script for MexCom... but right now, I just discovered the wonders of Visual Basic...
## Post #63
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-03-07T01:10:02+00:00
- Post Title: 

> Reply from Mr.Mouse
>
> Okay , good. By the way, I have fixed the If-bug and that will work better in the next version. Also, I have included commands for a bit of string manipulation, so now you can edit filenames prior logging them.  Though the next version will need a registration (either by donation or other means of support) for this type of advanced usage, you will recieve a code, as you already donated your support

Really? Well, thanks. Wait until I get it, then you'll see how I change those scripts yet another time...
## Post #64
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2005-03-07T14:29:24+00:00
- Post Title: 

Always the busybody, eh?
## Post #65
- Username: machf
- Rank: beginner
- Number of posts: 25
- Joined date: Tue Feb 15, 2005 12:42 pm
- Post datetime: 2005-03-07T15:00:49+00:00
- Post Title: 

You don't have any idea how many things go through my mind at any time...
## Post #66
- Username: Dinoguy1000
- Rank: Site Admin
- Number of posts: 786
- Joined date: Mon Sep 13, 2004 8:55 am
- Post datetime: 2005-03-07T15:08:49+00:00
- Post Title: 

I could imagine... ...or could I?
