## Post #1
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-08-28T14:42:39+00:00
- Post Title: Street Fighter 4 model animation info

[updated]: Finally animations are very similar to MD5 ones...
[updated]: I am dumb, there was some blank animation hidden in there, much more usefull!!
[updated]: Almost Owned!   

Hello,

I am working on animation data for street fighter 4.
I dumped some #EMA sections but I cannot figure out the essential : skeleton node transforms
With the skeletton weight magnum figured out I could animate the models in the 3D viewer

Here is the simplest animation i cound find , the most complicated is attached

It may be a hard guess with just theses floatting value, but perhaps you may recognize a known animation layout.

I guessed this on the first part:
- skeletton node number
- transformation type  ( 0: translation, 1: rotation, 2: scales, see below)
- some flags (transform componentont the 2 low order bits we have 00b=0 on the first record, then 01b=1 on the next and 10b=2, and repeatedly)
- timing count (2 bytes)
- offset to the offsets !!! (2 bytes)
- a list of timings (incrementing, starting at 0)  on 8 bits if frame count <255, 16bits otherwise
- some trash if (offset to the offsets > timing count * sizeof timing (8/16 bits))
- a list of offsets
some are used more than once (some kind of compression) so the stuff /timing count does not match the value count
as you see 0300 and 0400 are reapeated a lot, and what do we find as 3rd an 4th values:0.0 and 1.0


- when the 2nd field is 1 there is a bunch of 0300 -> 0.0 = no rotation as in the original bone node matrix
- when the 2nd field is 1 there is a bunch of 0400 -> 1.0 = 1:1 scale as in the original bone node matrix
now I'm pretty sure about the transformation type

now i think animations are matrix patches, not cumulatives transformations, at least for this file
I hope unknow flags in 3rd field don't drive this behavior

it also helps about the 2 low order bits of the 4th field being a "transform component", not too sure about the hight order bits of this thougt

if we cross check offsets for bone 1 we retrive the translation component of the original matrix in the first three values... 

```
frame count: 1

animation:
  1 0 0x08     2    12, 0 1 , 0x000000000000
  1 0 0x09     2    12, 0 1 , 0x000001000100
  1 0 0x0A     2    12, 0 1 , 0x000002000200
  2 0 0x08     2    12, 0 1 , 0x000003000300
  2 0 0x09     2    12, 0 1 , 0x000005000500
  2 0 0x0A     2    12, 0 1 , 0x000006000600
  3 0 0x08     2    12, 0 1 , 0x000007000700
  3 0 0x09     2    12, 0 1 , 0x000008000800
  3 0 0x0A     2    12, 0 1 , 0x000009000900
  4 0 0x08     2    12, 0 1 , 0x00000A000A00
  4 0 0x09     2    12, 0 1 , 0x00000B000B00
  4 0 0x0A     2    12, 0 1 , 0x00000C000C00
  5 0 0x08     2    12, 0 1 , 0x00000D000D00
  5 0 0x09     2    12, 0 1 , 0x00000E000E00
  5 0 0x0A     2    12, 0 1 , 0x00000F000F00
  6 0 0x08     2    12, 0 1 , 0x000010001000
  6 0 0x09     2    12, 0 1 , 0x000011001100
  6 0 0x0A     2    12, 0 1 , 0x000012001200
  7 0 0x08     2    12, 0 1 , 0x000013001300
  7 0 0x09     2    12, 0 1 , 0x000014001400
  7 0 0x0A     2    12, 0 1 , 0x000015001500
  8 0 0x08     2    12, 0 1 , 0x000003000300
  8 0 0x09     2    12, 0 1 , 0x000003000300
  8 0 0x0A     2    12, 0 1 , 0x000003000300
  9 0 0x08     2    12, 0 1 , 0x000016001600
  9 0 0x09     2    12, 0 1 , 0x000017001700
  9 0 0x0A     2    12, 0 1 , 0x000018001800
 10 0 0x08     2    12, 0 1 , 0x000003000300
 10 0 0x09     2    12, 0 1 , 0x000003000300
 10 0 0x0A     2    12, 0 1 , 0x000003000300
 11 0 0x08     2    12, 0 1 , 0x000019001900
 11 0 0x09     2    12, 0 1 , 0x00001A001A00
 11 0 0x0A     2    12, 0 1 , 0x00001B001B00
 12 0 0x08     2    12, 0 1 , 0x00001D001D00
 12 0 0x09     2    12, 0 1 , 0x00001E001E00
 12 0 0x0A     2    12, 0 1 , 0x00001F001F00
 13 0 0x08     2    12, 0 1 , 0x000003000300
 13 0 0x09     2    12, 0 1 , 0x000022002200
 13 0 0x0A     2    12, 0 1 , 0x000023002300
 14 0 0x08     2    12, 0 1 , 0x000024002400
 14 0 0x09     2    12, 0 1 , 0x000025002500
 14 0 0x0A     2    12, 0 1 , 0x000026002600
 15 0 0x08     2    12, 0 1 , 0x00002A002A00
 15 0 0x09     2    12, 0 1 , 0x00002B002B00
 15 0 0x0A     2    12, 0 1 , 0x00002C002C00
 16 0 0x08     2    12, 0 1 , 0x00002D002D00
 16 0 0x09     2    12, 0 1 , 0x000025002500
 16 0 0x0A     2    12, 0 1 , 0x000026002600
 17 0 0x08     2    12, 0 1 , 0x000030003000
 17 0 0x09     2    12, 0 1 , 0x00002B002B00
 17 0 0x0A     2    12, 0 1 , 0x00002C002C00
 18 0 0x08     2    12, 0 1 , 0x000003000300
 18 0 0x09     2    12, 0 1 , 0x000031003100
 18 0 0x0A     2    12, 0 1 , 0x000032003200
 19 0 0x08     2    12, 0 1 , 0x000003000300
 19 0 0x09     2    12, 0 1 , 0x000003000300
 19 0 0x0A     2    12, 0 1 , 0x000033003300
 20 0 0x08     2    12, 0 1 , 0x000003000300
 20 0 0x09     2    12, 0 1 , 0x000003000300
 20 0 0x0A     2    12, 0 1 , 0x000034003400
 21 0 0x08     2    12, 0 1 , 0x000003000300
 21 0 0x09     2    12, 0 1 , 0x000003000300
 21 0 0x0A     2    12, 0 1 , 0x000035003500
 22 0 0x08     2    12, 0 1 , 0x000003000300
 22 0 0x09     2    12, 0 1 , 0x000036003600
 22 0 0x0A     2    12, 0 1 , 0x000037003700
 23 0 0x08     2    12, 0 1 , 0x000038003800
 23 0 0x09     2    12, 0 1 , 0x000039003900
 23 0 0x0A     2    12, 0 1 , 0x00003A003A00
 24 0 0x08     2    12, 0 1 , 0x00003C003C00
 24 0 0x09     2    12, 0 1 , 0x00003D003D00
 24 0 0x0A     2    12, 0 1 , 0x00003E003E00
 25 0 0x08     2    12, 0 1 , 0x00003F003F00
 25 0 0x09     2    12, 0 1 , 0x00000E000E00
 25 0 0x0A     2    12, 0 1 , 0x00000F000F00
 26 0 0x08     2    12, 0 1 , 0x000040004000
 26 0 0x09     2    12, 0 1 , 0x000011001100
 26 0 0x0A     2    12, 0 1 , 0x000012001200
 27 0 0x08     2    12, 0 1 , 0x000041004100
 27 0 0x09     2    12, 0 1 , 0x000014001400
 27 0 0x0A     2    12, 0 1 , 0x000015001500
 28 0 0x08     2    12, 0 1 , 0x000003000300
 28 0 0x09     2    12, 0 1 , 0x000003000300
 28 0 0x0A     2    12, 0 1 , 0x000003000300
 29 0 0x08     2    12, 0 1 , 0x000042004200
 29 0 0x09     2    12, 0 1 , 0x000017001700
 29 0 0x0A     2    12, 0 1 , 0x000018001800
 30 0 0x08     2    12, 0 1 , 0x000003000300
 30 0 0x09     2    12, 0 1 , 0x000003000300
 30 0 0x0A     2    12, 0 1 , 0x000003000300
 31 0 0x08     2    12, 0 1 , 0x000043004300
 31 0 0x09     2    12, 0 1 , 0x000044004400
 31 0 0x0A     2    12, 0 1 , 0x000045004500
 32 0 0x08     2    12, 0 1 , 0x000003000300
 32 0 0x09     2    12, 0 1 , 0x000003000300
 32 0 0x0A     2    12, 0 1 , 0x000046004600
 33 0 0x08     2    12, 0 1 , 0x000047004700
 33 0 0x09     2    12, 0 1 , 0x000048004800
 33 0 0x0A     2    12, 0 1 , 0x000049004900
 34 0 0x08     2    12, 0 1 , 0x00004A004A00
 34 0 0x09     2    12, 0 1 , 0x000044004400
 34 0 0x0A     2    12, 0 1 , 0x000045004500
 35 0 0x08     2    12, 0 1 , 0x000003000300
 35 0 0x09     2    12, 0 1 , 0x000003000300
 35 0 0x0A     2    12, 0 1 , 0x000046004600
 36 0 0x08     2    12, 0 1 , 0x00001D001D00
 36 0 0x09     2    12, 0 1 , 0x00004B004B00
 36 0 0x0A     2    12, 0 1 , 0x00004C004C00
 37 0 0x08     2    12, 0 1 , 0x00004F004F00
 37 0 0x09     2    12, 0 1 , 0x000050005000
 37 0 0x0A     2    12, 0 1 , 0x000051005100
 38 0 0x08     2    12, 0 1 , 0x000055005500
 38 0 0x09     2    12, 0 1 , 0x000056005600
 38 0 0x0A     2    12, 0 1 , 0x000057005700
 39 0 0x08     2    12, 0 1 , 0x000058005800
 39 0 0x09     2    12, 0 1 , 0x000056005600
 39 0 0x0A     2    12, 0 1 , 0x000059005900
 40 0 0x08     2    12, 0 1 , 0x00005A005A00
 40 0 0x09     2    12, 0 1 , 0x000050005000
 40 0 0x0A     2    12, 0 1 , 0x000051005100
 41 0 0x08     2    12, 0 1 , 0x00005E005E00
 41 0 0x09     2    12, 0 1 , 0x00005F005F00
 41 0 0x0A     2    12, 0 1 , 0x000060006000
 42 0 0x08     2    12, 0 1 , 0x000061006100
 42 0 0x09     2    12, 0 1 , 0x00005F005F00
 42 0 0x0A     2    12, 0 1 , 0x000060006000
 43 0 0x08     2    12, 0 1 , 0x000062006200
 43 0 0x09     2    12, 0 1 , 0x000001000100
 43 0 0x0A     2    12, 0 1 , 0x000002000200
 44 0 0x08     2    12, 0 1 , 0x000003000300
 44 0 0x09     2    12, 0 1 , 0x000005000500
 44 0 0x0A     2    12, 0 1 , 0x000006000600
 45 0 0x08     2    12, 0 1 , 0x000063006300
 45 0 0x09     2    12, 0 1 , 0x000064006400
 45 0 0x0A     2    12, 0 1 , 0x000065006500
 46 0 0x08     2    12, 0 1 , 0x000066006600
 46 0 0x09     2    12, 0 1 , 0x000008000800
 46 0 0x0A     2    12, 0 1 , 0x000009000900
 47 0 0x08     2    12, 0 1 , 0x000067006700
 47 0 0x09     2    12, 0 1 , 0x000039003900
 47 0 0x0A     2    12, 0 1 , 0x00003A003A00
 48 0 0x08     2    12, 0 1 , 0x000069006900
 48 0 0x09     2    12, 0 1 , 0x00003D003D00
 48 0 0x0A     2    12, 0 1 , 0x00003E003E00
 49 0 0x08     2    12, 0 1 , 0x00006A006A00
 49 0 0x09     2    12, 0 1 , 0x000048004800
 49 0 0x0A     2    12, 0 1 , 0x000049004900
 50 0 0x08     2    12, 0 1 , 0x00006B006B00
 50 0 0x09     2    12, 0 1 , 0x00001A001A00
 50 0 0x0A     2    12, 0 1 , 0x00006C006C00
 51 0 0x08     2    12, 0 1 , 0x00006D006D00
 51 0 0x09     2    12, 0 1 , 0x00000B000B00
 51 0 0x0A     2    12, 0 1 , 0x00000C000C00
 52 0 0x08     2    12, 0 1 , 0x000063006300
 52 0 0x09     2    12, 0 1 , 0x00006E006E00
 52 0 0x0A     2    12, 0 1 , 0x00006F006F00
 53 0 0x08     2    12, 0 1 , 0x000070007000
 53 0 0x09     2    12, 0 1 , 0x000071007100
 53 0 0x0A     2    12, 0 1 , 0x000072007200
 54 0 0x08     2    12, 0 1 , 0x000073007300
 54 0 0x09     2    12, 0 1 , 0x000071007100
 54 0 0x0A     2    12, 0 1 , 0x000072007200
  1 1 0x08     2    12, 0 1 , 0x000003000300
  1 1 0x09     2    12, 0 1 , 0x000003000300
  1 1 0x0A     2    12, 0 1 , 0x000003000300
  2 1 0x08     2    12, 0 1 , 0x000003000300
  2 1 0x09     2    12, 0 1 , 0x000003000300
  2 1 0x0A     2    12, 0 1 , 0x000003000300
  3 1 0x08     2    12, 0 1 , 0x000003000300
  3 1 0x09     2    12, 0 1 , 0x000003000300
  3 1 0x0A     2    12, 0 1 , 0x000003000300
  4 1 0x08     2    12, 0 1 , 0x000003000300
  4 1 0x09     2    12, 0 1 , 0x000003000300
  4 1 0x0A     2    12, 0 1 , 0x000003000300
  5 1 0x08     2    12, 0 1 , 0x000003000300
  5 1 0x09     2    12, 0 1 , 0x000003000300
  5 1 0x0A     2    12, 0 1 , 0x000003000300
  6 1 0x08     2    12, 0 1 , 0x000003000300
  6 1 0x09     2    12, 0 1 , 0x000003000300
  6 1 0x0A     2    12, 0 1 , 0x000003000300
  7 1 0x08     2    12, 0 1 , 0x000003000300
  7 1 0x09     2    12, 0 1 , 0x000003000300
  7 1 0x0A     2    12, 0 1 , 0x000003000300
  8 1 0x08     2    12, 0 1 , 0x000003000300
  8 1 0x09     2    12, 0 1 , 0x000003000300
  8 1 0x0A     2    12, 0 1 , 0x000003000300
  9 1 0x08     2    12, 0 1 , 0x000003000300
  9 1 0x09     2    12, 0 1 , 0x000003000300
  9 1 0x0A     2    12, 0 1 , 0x000003000300
 10 1 0x08     2    12, 0 1 , 0x000003000300
 10 1 0x09     2    12, 0 1 , 0x000003000300
 10 1 0x0A     2    12, 0 1 , 0x000003000300
 11 1 0x08     2    12, 0 1 , 0x000003000300
 11 1 0x09     2    12, 0 1 , 0x00001C001C00
 11 1 0x0A     2    12, 0 1 , 0x000003000300
 12 1 0x08     2    12, 0 1 , 0x000020002000
 12 1 0x09     2    12, 0 1 , 0x000021002100
 12 1 0x0A     2    12, 0 1 , 0x000003000300
 13 1 0x08     2    12, 0 1 , 0x000003000300
 13 1 0x09     2    12, 0 1 , 0x000003000300
 13 1 0x0A     2    12, 0 1 , 0x000003000300
 14 1 0x08     2    12, 0 1 , 0x000027002700
 14 1 0x09     2    12, 0 1 , 0x000028002800
 14 1 0x0A     2    12, 0 1 , 0x000029002900
 15 1 0x08     2    12, 0 1 , 0x000003000300
 15 1 0x09     2    12, 0 1 , 0x000003000300
 15 1 0x0A     2    12, 0 1 , 0x000003000300
 16 1 0x08     2    12, 0 1 , 0x000027002700
 16 1 0x09     2    12, 0 1 , 0x00002E002E00
 16 1 0x0A     2    12, 0 1 , 0x00002F002F00
 17 1 0x08     2    12, 0 1 , 0x000003000300
 17 1 0x09     2    12, 0 1 , 0x000003000300
 17 1 0x0A     2    12, 0 1 , 0x000003000300
 18 1 0x08     2    12, 0 1 , 0x000003000300
 18 1 0x09     2    12, 0 1 , 0x000003000300
 18 1 0x0A     2    12, 0 1 , 0x000003000300
 19 1 0x08     2    12, 0 1 , 0x000003000300
 19 1 0x09     2    12, 0 1 , 0x000003000300
 19 1 0x0A     2    12, 0 1 , 0x000003000300
 20 1 0x08     2    12, 0 1 , 0x000003000300
 20 1 0x09     2    12, 0 1 , 0x000003000300
 20 1 0x0A     2    12, 0 1 , 0x000003000300
 21 1 0x08     2    12, 0 1 , 0x000003000300
 21 1 0x09     2    12, 0 1 , 0x000003000300
 21 1 0x0A     2    12, 0 1 , 0x000003000300
 22 1 0x08     2    12, 0 1 , 0x000003000300
 22 1 0x09     2    12, 0 1 , 0x000003000300
 22 1 0x0A     2    12, 0 1 , 0x000003000300
 23 1 0x08     2    12, 0 1 , 0x000003000300
 23 1 0x09     2    12, 0 1 , 0x00003B003B00
 23 1 0x0A     2    12, 0 1 , 0x000003000300
 24 1 0x08     2    12, 0 1 , 0x000003000300
 24 1 0x09     2    12, 0 1 , 0x000003000300
 24 1 0x0A     2    12, 0 1 , 0x000003000300
 25 1 0x08     2    12, 0 1 , 0x000003000300
 25 1 0x09     2    12, 0 1 , 0x00001C001C00
 25 1 0x0A     2    12, 0 1 , 0x000003000300
 26 1 0x08     2    12, 0 1 , 0x000003000300
 26 1 0x09     2    12, 0 1 , 0x000003000300
 26 1 0x0A     2    12, 0 1 , 0x000003000300
 27 1 0x08     2    12, 0 1 , 0x000003000300
 27 1 0x09     2    12, 0 1 , 0x000003000300
 27 1 0x0A     2    12, 0 1 , 0x000003000300
 28 1 0x08     2    12, 0 1 , 0x000003000300
 28 1 0x09     2    12, 0 1 , 0x000003000300
 28 1 0x0A     2    12, 0 1 , 0x000003000300
 29 1 0x08     2    12, 0 1 , 0x000003000300
 29 1 0x09     2    12, 0 1 , 0x000003000300
 29 1 0x0A     2    12, 0 1 , 0x000003000300
 30 1 0x08     2    12, 0 1 , 0x000003000300
 30 1 0x09     2    12, 0 1 , 0x000003000300
 30 1 0x0A     2    12, 0 1 , 0x000003000300
 31 1 0x08     2    12, 0 1 , 0x000003000300
 31 1 0x09     2    12, 0 1 , 0x00001C001C00
 31 1 0x0A     2    12, 0 1 , 0x000003000300
 32 1 0x08     2    12, 0 1 , 0x000003000300
 32 1 0x09     2    12, 0 1 , 0x000003000300
 32 1 0x0A     2    12, 0 1 , 0x000003000300
 33 1 0x08     2    12, 0 1 , 0x000003000300
 33 1 0x09     2    12, 0 1 , 0x00001C001C00
 33 1 0x0A     2    12, 0 1 , 0x000003000300
 34 1 0x08     2    12, 0 1 , 0x000003000300
 34 1 0x09     2    12, 0 1 , 0x000003000300
 34 1 0x0A     2    12, 0 1 , 0x000003000300
 35 1 0x08     2    12, 0 1 , 0x000003000300
 35 1 0x09     2    12, 0 1 , 0x000003000300
 35 1 0x0A     2    12, 0 1 , 0x000003000300
 36 1 0x08     2    12, 0 1 , 0x00004D004D00
 36 1 0x09     2    12, 0 1 , 0x00004E004E00
 36 1 0x0A     2    12, 0 1 , 0x000003000300
 37 1 0x08     2    12, 0 1 , 0x000052005200
 37 1 0x09     2    12, 0 1 , 0x000053005300
 37 1 0x0A     2    12, 0 1 , 0x000054005400
 38 1 0x08     2    12, 0 1 , 0x000003000300
 38 1 0x09     2    12, 0 1 , 0x000021002100
 38 1 0x0A     2    12, 0 1 , 0x000003000300
 39 1 0x08     2    12, 0 1 , 0x000003000300
 39 1 0x09     2    12, 0 1 , 0x000003000300
 39 1 0x0A     2    12, 0 1 , 0x000003000300
 40 1 0x08     2    12, 0 1 , 0x00005B005B00
 40 1 0x09     2    12, 0 1 , 0x00005C005C00
 40 1 0x0A     2    12, 0 1 , 0x00005D005D00
 41 1 0x08     2    12, 0 1 , 0x000003000300
 41 1 0x09     2    12, 0 1 , 0x000003000300
 41 1 0x0A     2    12, 0 1 , 0x000003000300
 42 1 0x08     2    12, 0 1 , 0x000003000300
 42 1 0x09     2    12, 0 1 , 0x000021002100
 42 1 0x0A     2    12, 0 1 , 0x000003000300
 43 1 0x08     2    12, 0 1 , 0x000003000300
 43 1 0x09     2    12, 0 1 , 0x00001C001C00
 43 1 0x0A     2    12, 0 1 , 0x000003000300
 44 1 0x08     2    12, 0 1 , 0x000003000300
 44 1 0x09     2    12, 0 1 , 0x000003000300
 44 1 0x0A     2    12, 0 1 , 0x000003000300
 45 1 0x08     2    12, 0 1 , 0x000003000300
 45 1 0x09     2    12, 0 1 , 0x000003000300
 45 1 0x0A     2    12, 0 1 , 0x000003000300
 46 1 0x08     2    12, 0 1 , 0x000003000300
 46 1 0x09     2    12, 0 1 , 0x00001C001C00
 46 1 0x0A     2    12, 0 1 , 0x000003000300
 47 1 0x08     2    12, 0 1 , 0x000003000300
 47 1 0x09     2    12, 0 1 , 0x000068006800
 47 1 0x0A     2    12, 0 1 , 0x000003000300
 48 1 0x08     2    12, 0 1 , 0x000003000300
 48 1 0x09     2    12, 0 1 , 0x000003000300
 48 1 0x0A     2    12, 0 1 , 0x000003000300
 49 1 0x08     2    12, 0 1 , 0x000003000300
 49 1 0x09     2    12, 0 1 , 0x000003000300
 49 1 0x0A     2    12, 0 1 , 0x000003000300
 50 1 0x08     2    12, 0 1 , 0x000003000300
 50 1 0x09     2    12, 0 1 , 0x000003000300
 50 1 0x0A     2    12, 0 1 , 0x000003000300
 51 1 0x08     2    12, 0 1 , 0x000003000300
 51 1 0x09     2    12, 0 1 , 0x00001C001C00
 51 1 0x0A     2    12, 0 1 , 0x000003000300
 52 1 0x08     2    12, 0 1 , 0x000003000300
 52 1 0x09     2    12, 0 1 , 0x000003000300
 52 1 0x0A     2    12, 0 1 , 0x000003000300
 53 1 0x08     2    12, 0 1 , 0x000003000300
 53 1 0x09     2    12, 0 1 , 0x00001C001C00
 53 1 0x0A     2    12, 0 1 , 0x000003000300
 54 1 0x08     2    12, 0 1 , 0x000003000300
 54 1 0x09     2    12, 0 1 , 0x000003000300
 54 1 0x0A     2    12, 0 1 , 0x000003000300
  1 2 0x08     2    12, 0 1 , 0x000004000400
  1 2 0x09     2    12, 0 1 , 0x000004000400
  1 2 0x0A     2    12, 0 1 , 0x000004000400
  2 2 0x08     2    12, 0 1 , 0x000004000400
  2 2 0x09     2    12, 0 1 , 0x000004000400
  2 2 0x0A     2    12, 0 1 , 0x000004000400
  3 2 0x08     2    12, 0 1 , 0x000004000400
  3 2 0x09     2    12, 0 1 , 0x000004000400
  3 2 0x0A     2    12, 0 1 , 0x000004000400
  4 2 0x08     2    12, 0 1 , 0x000004000400
  4 2 0x09     2    12, 0 1 , 0x000004000400
  4 2 0x0A     2    12, 0 1 , 0x000004000400
  5 2 0x08     2    12, 0 1 , 0x000004000400
  5 2 0x09     2    12, 0 1 , 0x000004000400
  5 2 0x0A     2    12, 0 1 , 0x000004000400
  6 2 0x08     2    12, 0 1 , 0x000004000400
  6 2 0x09     2    12, 0 1 , 0x000004000400
  6 2 0x0A     2    12, 0 1 , 0x000004000400
  7 2 0x08     2    12, 0 1 , 0x000004000400
  7 2 0x09     2    12, 0 1 , 0x000004000400
  7 2 0x0A     2    12, 0 1 , 0x000004000400
  8 2 0x08     2    12, 0 1 , 0x000004000400
  8 2 0x09     2    12, 0 1 , 0x000004000400
  8 2 0x0A     2    12, 0 1 , 0x000004000400
  9 2 0x08     2    12, 0 1 , 0x000004000400
  9 2 0x09     2    12, 0 1 , 0x000004000400
  9 2 0x0A     2    12, 0 1 , 0x000004000400
 10 2 0x08     2    12, 0 1 , 0x000004000400
 10 2 0x09     2    12, 0 1 , 0x000004000400
 10 2 0x0A     2    12, 0 1 , 0x000004000400
 11 2 0x08     2    12, 0 1 , 0x000004000400
 11 2 0x09     2    12, 0 1 , 0x000004000400
 11 2 0x0A     2    12, 0 1 , 0x000004000400
 12 2 0x08     2    12, 0 1 , 0x000004000400
 12 2 0x09     2    12, 0 1 , 0x000004000400
 12 2 0x0A     2    12, 0 1 , 0x000004000400
 13 2 0x08     2    12, 0 1 , 0x000004000400
 13 2 0x09     2    12, 0 1 , 0x000004000400
 13 2 0x0A     2    12, 0 1 , 0x000004000400
 14 2 0x08     2    12, 0 1 , 0x000004000400
 14 2 0x09     2    12, 0 1 , 0x000004000400
 14 2 0x0A     2    12, 0 1 , 0x000004000400
 15 2 0x08     2    12, 0 1 , 0x000004000400
 15 2 0x09     2    12, 0 1 , 0x000004000400
 15 2 0x0A     2    12, 0 1 , 0x000004000400
 16 2 0x08     2    12, 0 1 , 0x000004000400
 16 2 0x09     2    12, 0 1 , 0x000004000400
 16 2 0x0A     2    12, 0 1 , 0x000004000400
 17 2 0x08     2    12, 0 1 , 0x000004000400
 17 2 0x09     2    12, 0 1 , 0x000004000400
 17 2 0x0A     2    12, 0 1 , 0x000004000400
 18 2 0x08     2    12, 0 1 , 0x000004000400
 18 2 0x09     2    12, 0 1 , 0x000004000400
 18 2 0x0A     2    12, 0 1 , 0x000004000400
 19 2 0x08     2    12, 0 1 , 0x000004000400
 19 2 0x09     2    12, 0 1 , 0x000004000400
 19 2 0x0A     2    12, 0 1 , 0x000004000400
 20 2 0x08     2    12, 0 1 , 0x000004000400
 20 2 0x09     2    12, 0 1 , 0x000004000400
 20 2 0x0A     2    12, 0 1 , 0x000004000400
 21 2 0x08     2    12, 0 1 , 0x000004000400
 21 2 0x09     2    12, 0 1 , 0x000004000400
 21 2 0x0A     2    12, 0 1 , 0x000004000400
 22 2 0x08     2    12, 0 1 , 0x000004000400
 22 2 0x09     2    12, 0 1 , 0x000004000400
 22 2 0x0A     2    12, 0 1 , 0x000004000400
 23 2 0x08     2    12, 0 1 , 0x000004000400
 23 2 0x09     2    12, 0 1 , 0x000004000400
 23 2 0x0A     2    12, 0 1 , 0x000004000400
 24 2 0x08     2    12, 0 1 , 0x000004000400
 24 2 0x09     2    12, 0 1 , 0x000004000400
 24 2 0x0A     2    12, 0 1 , 0x000004000400
 25 2 0x08     2    12, 0 1 , 0x000004000400
 25 2 0x09     2    12, 0 1 , 0x000004000400
 25 2 0x0A     2    12, 0 1 , 0x000004000400
 26 2 0x08     2    12, 0 1 , 0x000004000400
 26 2 0x09     2    12, 0 1 , 0x000004000400
 26 2 0x0A     2    12, 0 1 , 0x000004000400
 27 2 0x08     2    12, 0 1 , 0x000004000400
 27 2 0x09     2    12, 0 1 , 0x000004000400
 27 2 0x0A     2    12, 0 1 , 0x000004000400
 28 2 0x08     2    12, 0 1 , 0x000004000400
 28 2 0x09     2    12, 0 1 , 0x000004000400
 28 2 0x0A     2    12, 0 1 , 0x000004000400
 29 2 0x08     2    12, 0 1 , 0x000004000400
 29 2 0x09     2    12, 0 1 , 0x000004000400
 29 2 0x0A     2    12, 0 1 , 0x000004000400
 30 2 0x08     2    12, 0 1 , 0x000004000400
 30 2 0x09     2    12, 0 1 , 0x000004000400
 30 2 0x0A     2    12, 0 1 , 0x000004000400
 31 2 0x08     2    12, 0 1 , 0x000004000400
 31 2 0x09     2    12, 0 1 , 0x000004000400
 31 2 0x0A     2    12, 0 1 , 0x000004000400
 32 2 0x08     2    12, 0 1 , 0x000004000400
 32 2 0x09     2    12, 0 1 , 0x000004000400
 32 2 0x0A     2    12, 0 1 , 0x000004000400
 33 2 0x08     2    12, 0 1 , 0x000004000400
 33 2 0x09     2    12, 0 1 , 0x000004000400
 33 2 0x0A     2    12, 0 1 , 0x000004000400
 34 2 0x08     2    12, 0 1 , 0x000004000400
 34 2 0x09     2    12, 0 1 , 0x000004000400
 34 2 0x0A     2    12, 0 1 , 0x000004000400
 35 2 0x08     2    12, 0 1 , 0x000004000400
 35 2 0x09     2    12, 0 1 , 0x000004000400
 35 2 0x0A     2    12, 0 1 , 0x000004000400
 36 2 0x08     2    12, 0 1 , 0x000004000400
 36 2 0x09     2    12, 0 1 , 0x000004000400
 36 2 0x0A     2    12, 0 1 , 0x000004000400
 37 2 0x08     2    12, 0 1 , 0x000004000400
 37 2 0x09     2    12, 0 1 , 0x000004000400
 37 2 0x0A     2    12, 0 1 , 0x000004000400
 38 2 0x08     2    12, 0 1 , 0x000004000400
 38 2 0x09     2    12, 0 1 , 0x000004000400
 38 2 0x0A     2    12, 0 1 , 0x000004000400
 39 2 0x08     2    12, 0 1 , 0x000004000400
 39 2 0x09     2    12, 0 1 , 0x000004000400
 39 2 0x0A     2    12, 0 1 , 0x000004000400
 40 2 0x08     2    12, 0 1 , 0x000004000400
 40 2 0x09     2    12, 0 1 , 0x000004000400
 40 2 0x0A     2    12, 0 1 , 0x000004000400
 41 2 0x08     2    12, 0 1 , 0x000004000400
 41 2 0x09     2    12, 0 1 , 0x000004000400
 41 2 0x0A     2    12, 0 1 , 0x000004000400
 42 2 0x08     2    12, 0 1 , 0x000004000400
 42 2 0x09     2    12, 0 1 , 0x000004000400
 42 2 0x0A     2    12, 0 1 , 0x000004000400
 43 2 0x08     2    12, 0 1 , 0x000004000400
 43 2 0x09     2    12, 0 1 , 0x000004000400
 43 2 0x0A     2    12, 0 1 , 0x000004000400
 44 2 0x08     2    12, 0 1 , 0x000004000400
 44 2 0x09     2    12, 0 1 , 0x000004000400
 44 2 0x0A     2    12, 0 1 , 0x000004000400
 45 2 0x08     2    12, 0 1 , 0x000004000400
 45 2 0x09     2    12, 0 1 , 0x000004000400
 45 2 0x0A     2    12, 0 1 , 0x000004000400
 46 2 0x08     2    12, 0 1 , 0x000004000400
 46 2 0x09     2    12, 0 1 , 0x000004000400
 46 2 0x0A     2    12, 0 1 , 0x000004000400
 47 2 0x08     2    12, 0 1 , 0x000004000400
 47 2 0x09     2    12, 0 1 , 0x000004000400
 47 2 0x0A     2    12, 0 1 , 0x000004000400
 48 2 0x08     2    12, 0 1 , 0x000004000400
 48 2 0x09     2    12, 0 1 , 0x000004000400
 48 2 0x0A     2    12, 0 1 , 0x000004000400
 49 2 0x08     2    12, 0 1 , 0x000004000400
 49 2 0x09     2    12, 0 1 , 0x000004000400
 49 2 0x0A     2    12, 0 1 , 0x000004000400
 50 2 0x08     2    12, 0 1 , 0x000004000400
 50 2 0x09     2    12, 0 1 , 0x000004000400
 50 2 0x0A     2    12, 0 1 , 0x000004000400
 51 2 0x08     2    12, 0 1 , 0x000004000400
 51 2 0x09     2    12, 0 1 , 0x000004000400
 51 2 0x0A     2    12, 0 1 , 0x000004000400
 52 2 0x08     2    12, 0 1 , 0x000004000400
 52 2 0x09     2    12, 0 1 , 0x000004000400
 52 2 0x0A     2    12, 0 1 , 0x000004000400
 53 2 0x08     2    12, 0 1 , 0x000004000400
 53 2 0x09     2    12, 0 1 , 0x000004000400
 53 2 0x0A     2    12, 0 1 , 0x000004000400
 54 2 0x08     2    12, 0 1 , 0x000004000400
 54 2 0x09     2    12, 0 1 , 0x000004000400
 54 2 0x0A     2    12, 0 1 , 0x000004000400

Sum col #4=972:

Sum col #6=5832:

Values (116):
-0.033943
0.032618
-0.095317
0.000000
1.000000
0.016146
-0.000951
-0.018550
-0.004315
-0.104465
-0.037231
0.022174
-0.101329
-0.013388
0.050104
-0.109681
-0.012712
0.005377
0.001688
-0.019397
0.002713
0.006083
-0.017672
0.008886
0.003672
0.053155
0.040683
-0.085333
0.000034
0.000000
-0.007297
-0.006021
1.150000
0.000017
-0.045662
-0.099647
0.008874
-0.022252
-0.106337
-0.001325
-2.748392
0.055214
0.019592
-0.020489
-0.098875
-0.008874
2.748392
-0.055214
-0.019592
-0.015281
-0.033980
-0.013876
-0.013876
-0.012973
0.000036
0.000203
0.007760
-0.012363
-0.113518
-2.748912
0.009959
-0.003338
0.006016
0.013389
0.012712
0.019397
0.017672
0.033480
0.042107
-0.083977
-0.014877
0.044363
0.019070
-0.090785
-0.033479
-0.007294
-0.006024
0.575000
0.000008
0.032947
-0.012212
-0.087933
0.028889
0.121487
19.609476
0.055446
-0.008116
-0.039314
-0.055446
-0.039314
-0.032947
0.028883
-0.121471
-19.609476
-0.029280
-0.007574
-0.093709
0.029280
0.033944
0.000006
0.050123
-0.110531
0.018550
-0.007759
2.748946
-0.009959
-0.044362
-0.053154
-0.085333
0.037231
0.004763
0.024311
0.013055
0.010510
-0.102085
-0.013054

skeleton:
  0 parent: 65535 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 -0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000
  1 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 -0.033943 0.032618 -0.095317 1.000000
  2 parent: 1 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 -0.000000 0.016146 -0.000951 1.000000
  3 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 -0.018550 -0.004315 -0.104465 1.000000
  4 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 -0.037231 0.022174 -0.101329 1.000000
  5 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 -0.013388 0.050104 -0.109681 1.000000
  6 parent: 5 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 -0.012712 0.005377 0.001688 1.000000
  7 parent: 6 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 -0.019397 0.002713 0.006083 1.000000
  8 parent: 6 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000
  9 parent: 8 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 -0.017672 0.008886 0.003672 1.000000
 10 parent: 5 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000
 11 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 0.053155 0.040683 -0.085333 1.000000
 12 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 0.000000 -0.007297 -0.006021 1.000000
 13 parent: 12 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 -0.000000 -0.045662 -0.099647 1.000000
 14 parent: 12 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 0.008874 -0.023057 -0.105586 1.000000
 15 parent: 12 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 0.018231 -0.020374 -0.100841 1.000000
 16 parent: 12 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 -0.008874 -0.023057 -0.105586 1.000000
 17 parent: 12 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 -0.018231 -0.020374 -0.100841 1.000000
 18 parent: 12 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 -0.000000 -0.015281 -0.033980 1.000000
 19 parent: 18 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 0.000000 -0.000000 -0.013876 1.000000
 20 parent: 19 matrix: 1.000000 0.000000 -0.000000 0.000000 -0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 -0.000000 -0.000000 -0.013876 1.000000
 21 parent: 20 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 -0.000000 0.000000 -0.012973 1.000000
 22 parent: 12 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 -0.000000 0.000036 0.000203 1.000000
 23 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 0.007760 -0.014474 -0.112392 1.000000
 24 parent: 23 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 0.008533 -0.001242 0.004652 1.000000
 25 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 0.013389 0.050104 -0.109681 1.000000
 26 parent: 25 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 0.012712 0.005377 0.001688 1.000000
 27 parent: 26 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 0.019397 0.002713 0.006083 1.000000
 28 parent: 26 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000
 29 parent: 28 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 0.017672 0.008886 0.003672 1.000000
 30 parent: 25 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 -0.000000 0.000000 -0.000000 1.000000
 31 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 0.033480 0.042107 -0.083977 1.000000
 32 parent: 31 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 0.000000 0.000000 -0.014877 1.000000
 33 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 0.044363 0.019070 -0.090785 1.000000
 34 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 -0.033479 0.042107 -0.083977 1.000000
 35 parent: 34 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 -0.000000 0.000000 -0.014877 1.000000
 36 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 0.000000 -0.007294 -0.006024 1.000000
 37 parent: 36 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 0.029746 -0.014482 -0.089318 1.000000
 38 parent: 36 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 0.055446 -0.008116 -0.039314 1.000000
 39 parent: 36 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 -0.055446 -0.008116 -0.039314 1.000000
 40 parent: 36 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 -0.029746 -0.014482 -0.089318 1.000000
 41 parent: 36 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 -0.029280 -0.007574 -0.093709 1.000000
 42 parent: 36 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 0.029280 -0.007574 -0.093709 1.000000
 43 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 0.033944 0.032618 -0.095317 1.000000
 44 parent: 43 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 0.000000 0.016146 -0.000951 1.000000
 45 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 0.000006 0.050123 -0.110531 1.000000
 46 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 0.018550 -0.004315 -0.104465 1.000000
 47 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 -0.007759 -0.014474 -0.112392 1.000000
 48 parent: 47 matrix: 1.000000 0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -0.000000 -0.000000 1.000000 0.000000 -0.008533 -0.001242 0.004652 1.000000
 49 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 -0.044362 0.019070 -0.090785 1.000000
 50 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 -0.053154 0.040683 -0.085333 1.000000
 51 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 0.037230 0.022170 -0.101330 1.000000
 52 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 0.000006 0.004763 0.024311 1.000000
 53 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 0.013055 0.010510 -0.102085 1.000000
 54 parent: 0 matrix: 1.000000 -0.000000 -0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 0.000000 -0.000000 1.000000 0.000000 -0.013054 0.010510 -0.102085 1.000000

```

[AGL_UCA_ULTRA_dump.rar](https://xentaxbackup.github.io/file/2333_AGL_UCA_ULTRA_dump.rar)
## Post #2
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2009-08-28T20:31:53+00:00
- Post Title: Street Fighter 4 model animation info

Sorry for my ignorance.  Are you dumps the original format of these files?  i have not yet started looking into this game yet (still need to finish up some things on RE4 animations), but i plan to.  i might have some time to look into this at least for a brief moment.  i haven't even gotten the game for pc yet, i'll have to see if there is a demo, as i could possibly confirm things even more by looking through the executable code as it is loading the files.  i would like to confirm the data size of some of those values, as looking at them the:  keyframe (timing) count seems to be a correct assumption given the number of values in the (0 - 60) rang in the simple format, but this doesn't seem to always hold up when looking at your dump for the more complicated animation file.  The flags value in the beginning may be telling you the data storage layout.  This is how it is for Resident Evil 4 FCV animations files, but i am only assuming this as they are both Capcom games as i haven't delved deep enough into SF4 to know for sure yet.  Since i haven't exactly been following progress on this front, if you could ssend or point me in the direction of some of the currently known format information i should be able to at least start looking into clarifying some things for you.

- revel8n
## Post #3
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-08-28T20:57:28+00:00
- Post Title: Street Fighter 4 model animation info

Thanks for you fast reply  

> Reply from revelation
>
> Are you dumps the original format of these files?
Yes, re-formatted,  but only a single animation block as I already spotted how a full animation set is packed in an animation block (#EMA)

> Reply from revelation
>
>  i haven't even gotten the game for pc yet, i'll have to see if there is a demo
A benchmark tool has been released ([http://www.fileshack.com/file.x/14601/S ... hmark+Tool](http://www.fileshack.com/file.x/14601/Street+Fighter+4+Benchmark+Tool))

> Reply from revelation
>
> This is how it is for Resident Evil 4 FCV animations files

It there a post or sources I could look at?

> Reply from revelation
>
> if you could ssend or point me in the direction of some of the currently known format information i should be able to at least start looking into clarifying some things for you.

You can use my viewer to unpack/explore SF4 files,  magnum posted some info on my viewer topic that , among other things, describe the #EMB structure of an #EMZ file
I'll try to add an animation block dump in the next release

This may give you the whole picture
[filesLayout.PNG](https://xentaxbackup.github.io/file/2329_filesLayout.PNG)
## Post #4
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-08-28T22:05:41+00:00
- Post Title: Street Fighter 4 model animation info

> Reply from revelation
>
> Are you dumps the original format of these files?

Here is a dump of the block corresponding to the simple animation in the first post
[AGL_GRD_START.rar](https://xentaxbackup.github.io/file/2331_AGL_GRD_START.rar)
## Post #5
- Username: magnum
- Rank: ultra-n00b
- Number of posts: 5
- Joined date: Mon Jul 27, 2009 3:43 am
- Post datetime: 2009-08-29T15:56:59+00:00
- Post Title: Street Fighter 4 model animation info

I had written an FCV dumper for RE4 a long time ago (in Perl). Unfortunately, I never figured out what any of the data actually does, as all the script does is dump out the data in an organized and readable fashion, so I'm not sure if it'll help in any way. The source for it is here:

[http://z6.invisionfree.com/Resident_Evi ... 2706&st=15](http://z6.invisionfree.com/Resident_Evil_4_PC/index.php?showtopic=2706&st=15)
## Post #6
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2009-09-02T14:50:25+00:00
- Post Title: Street Fighter 4 model animation info

Ok, sorry for the delay.  i just moved into a new apartment and will be without direct internet access until the 10th, so most of my internet usage will be from work.  haven't full deciphered everything but figured i would at least post the main things i know.

i am still going to assume the first uint16 value is the bone index, and i am going to ignore the 2 bytes following it for now.  the 3rd uint16 is the keyframe count it seems (or number of data elements), the 4th uint16 is the offset from the beginning of this header data necessary to get past the keyframe time values that directly follow the header.  The values so far seem to be bytes for the key frame times, and int16 possibly for the data values.  The data seems to repeat 3 time as it does in the FCV format, which i will assume means each track is stored separately for X, Y, and Z values.

Hopefully when i get some time i will be able to actually confirm some of things things for sure, but maybe that will help you figure out some things in the meantime.

hth.

- revel8n


```
 * ema.bt - Structure definitions for Street Fighter 4 - ema file related entities.
 *
 *****************************************************************************
 * Revision History:
 *  2009/09/02 - GWC - Original
 */

#include "common-types.bt"

SetReadOnly(true);

// #pragma displayname("ema structures")
// #pragma fileextensions(".ema")

// #pragma byteorder(little_endian)
LittleEndian();

// mark used bytes with a light green background
SetBackColor(cLtGreen);

// EMA_FILE File Structure
struct EMA_FILE
{
//	#pragma lockAt(0x00000000)

	// EMA_FILE File Header Structure - 0x14 (20) bytes
	struct EMA_HEADER
	{
		uint16 animationLength; // maximum keyframe time value
		uint16 unknownCount0x02;
		uint32 unknown0x04;
		uint32 unknown0x08;
		uint32 unknown0x0C;
		uint32 unknownPtr0x10 <format = hex>;
		
		uint32 unknownPtrs0x14[unknownCount0x02];
	} fileHeader;
	
	if (0 < fileHeader.unknownCount0x02)
	{
		local uint16 uNum = 0;
		for (uNum = 0; uNum < fileHeader.unknownCount0x02; ++uNum)
		{
			FSeek(fileHeader.unknownPtrs0x14[uNum]);
			struct
			{
				uint16 boneIndex;
				uint8 unknown0x02[2];
				uint16 keyframeCount;
				uint16 keyDataOffset; // offset from beginning of this header to keyframe data
				
				uint8 keyTimes[keyframeCount];
				
				FSeek(fileHeader.unknownPtrs0x14[uNum] + keyDataOffset);
				int16 keyData[keyframeCount];
			} unknownData0;
		}
	}
};

struct EMA_FILE fileInfo;

```
## Post #7
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2009-09-02T19:08:13+00:00
- Post Title: Street Fighter 4 model animation info

Well, the 1 byte for keyframe times and 2 bytes for keyframe data doesn't hold up for every animation track...there are times when the keyframe times are 2 bytes and the data is 4 bytes....i am looking into those values after the  bone index to see how they may be interpreted for determining when this occurs....

- revel8n
## Post #8
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-09-02T19:16:14+00:00
- Post Title: Street Fighter 4 model animation info

> Reply from revelation
>
> Well, the 1 byte for keyframe times and 2 bytes for keyframe data doesn't hold up for every animation track...there are times when the keyframe times are 2 bytes and the data is 4 bytes....i am looking into those values after the  bone index to see how they may be interpreted for determining when this occurs....

- revel8n
Yes depending on the frame count it is laid on 2 or 4 bytes

so you have either

```
uint8 keyTimes[keyframeCount];
```
 if keyframeCount<32768
or 
```
uint16 keyTimes[keyframeCount];
```
 if keyframeCount>=32768

also the two bytes after the bone index are:
- first the transformation type (0, 1, 2)
- then transformation component flags (with the 2 lower bits taking values 0, 1 or 2 for x, y, or z)

also what you call keyData are indices to values described below

```
         {
            uint16 boneIndex;
            uint8 transformationType;
            uint8 transformationComponentsFlags;
            uint16 keyframeCount;
            uint16 keyDataOffset; // offset from beginning of this header to keyframe data
            
            uint8 keyTimes[keyframeCount];// or             uint8 keyTimes[keyframeCount];
            
            FSeek(fileHeader.unknownPtrs0x14[uNum] + keyDataOffset);
            uint16 keyData[keyframeCount]; // or uint32 if valuesBlock.values.size>=16384;
         } unknownData0;

```


I cross checked with a face animation block called _blank with is very helpful.


The main header is like this

```

   struct EMA_HEADER
   {
      uint16 animationLength; // maximum keyframe time value
      uint16 unknownCount0x02;
      uint32 valuesOffset;
      uint32 unknown0x08;
      uint32 nameOffset;
      uint32 unknownPtr0x10 <format = hex>;
      
      uint32 unknownPtrs0x14[unknownCount0x02];
   } fileHeader;

FSeek(fileHeader.valuesOffset);
   struct 
  {
     float values[animationChunk.size - m_fileHeader.valuesOffset];
  }valuesBlock;
FSeek(fileHeader.nameOffset);
   struct 
  {
      uint8 charCount;
      char string[charCount];
  }animationName

```


My main concern is now to interpret rotation values for each bone node matrix, i tried every combination (rx*ry*rz*trans*scale, rx*rz*ry*trans*scale trans*scale*rx*rz*ry...) but it lead to nothing, translations and scale components are ok though.

PS. Sorry, I don't know the .bt syntax, I tried to guess...
## Post #9
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2009-09-02T21:04:52+00:00
- Post Title: Street Fighter 4 model animation info

Ok, cool i will look over what you have posted and compare to what i found out after my previous post.  i have also found some of the file loading and processing functions within the executable, including the start of #EMA processing, so i should hopefully be able to verify if the things you have listed so far are correct.  If this format is anything like the RE4 format those values for position/rotation/scale are more than likely multiplied by some constant before being used, and it may not be an obvious one like 0.01, or 0.00001, but something arbitrary in that vain, often based on a power of 2.  But i will see what i can find when i get back to digging through the code.

- revel8n
## Post #10
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-09-03T20:55:11+00:00
- Post Title: Street Fighter 4 model animation info

> Reply from revelation
>
> Ok, cool i will look over what you have posted and compare to what i found out after my previous post.  i have also found some of the file loading and processing functions within the executable,

Do you use IDA pro for this?
## Post #11
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2009-09-03T21:09:44+00:00
- Post Title: Street Fighter 4 model animation info

yes i do.
## Post #12
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2009-09-04T15:30:38+00:00
- Post Title: Street Fighter 4 model animation info

ok, just a small update.

As assumed the second byte after the "bone" index is a flag byte.  So far i have only run into 2 of the flags, but i am still stepping through the code.  As i thought these flags determine when the key times and/or key value indices are either 1 or 2 bytes and 2 or 4 bytes respectively.

if the flags contain bit 0x20 set then the key times are 2 bytes, 1 byte otherwise.
if the flags contain bit 0x40 set then the key value indices are 4 bytes, 2 bytes otherwise.

There are some strange calculations being done on the key times that i am not quire sure of yet.  They are being multiplied together in pairs of 2 and i am not sure why yet as they are not stored in this manner, so it may just be some form of validation.

The key value indices also have a calculation done on them based on the upper 2-bits of the value.  This upper value (0 - 3 given its 2 bits) is added to the key value index and used instead of the actual value.  At least that is what i have gathered so far.  i am still looking into this, but at least if you can you can possibly verify some things in this regard.

i am still in the process of stepping through the handling of the float values after they have been indexed, as well as the meaning of the remaining flag bits and byte value preceding the flag byte.  Hope to have more soon.

- revel8n
## Post #13
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-09-04T18:15:41+00:00
- Post Title: Street Fighter 4 model animation info

> Reply from revelation
>
> 
if the flags contain bit 0x20 set then the key times are 2 bytes, 1 byte otherwise.
if the flags contain bit 0x40 set then the key value indices are 4 bytes, 2 bytes otherwise.

Thanks for this, i was using the value count to guess the size   

> Reply from revelation
>
> 
There are some strange calculations being done on the key times that i am not quire sure of yet.  They are being multiplied together in pairs of 2 and i am not sure why yet as they are not stored in this manner, so it may just be some form of validation.

I confirm they look nice in their raw state, on every animation I opened they were going from 0 to keyframeCount

> Reply from revelation
>
> 
The key value indices also have a calculation done on them based on the upper 2-bits of the value.  This upper value (0 - 3 given its 2 bits) is added to the key value index and used instead of the actual value.  At least that is what i have gathered so far.  i am still looking into this, but at least if you can you can possibly verify some things in this regard.

Ah, cross checking my reader, I was masking the 2 upper bits as the value would go out of the indices array otherwise  
Since the 2 upper bits are often equals to 0, I overlooked this

Your method is clearly better than my guess work
## Post #14
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-09-04T18:16:51+00:00
- Post Title: Street Fighter 4 model animation info

I updated my code to cross check your findings: everything make sense, the byte count flags match the count test I were using, good job!
## Post #15
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2009-09-04T19:08:59+00:00
- Post Title: Street Fighter 4 model animation info

> Reply from piecemontee
>
> Your method is clearly better than my guess work

Normally, i do my best to avoid having to confirm things through the executable code, if possible.  A lot of things can be gathered just from the initial guess work path usually.  For the more obscure methods of data representation though it often becomes necessary to dig deeper, but i guess it is also very helpfull to get true code level confirmation of your initial assumptions.

Ok, it appears the index values are used twice, once with the top 2 bits masked off as the actual parameter value index, and a second time if the upper 2-bits are not zero (0).  I am currently only speculating that this format is similar to the Resident Evil 4 format in that it is making use of a curve based interpolation method to interpret the values between keyframes.  RE4 used hermite curve interpolation which has in and out tangents for each value.  Looking at what i can decipher so far it appears these upper 2-bits indicate the offset from the main float value index to the tangent value index.  If the upper two bits are 0 then then this second values is assumed to be 0 as well and is not used as an index into the float data array.

i am unfortunately only marginally experienced with ida pro, being self taught in most of it, so i have as of yet not found a way to view the mmx registers (hopefully i have just missed something simple with regard to enabling view of these registers as i could figure a lot out just by looking at the results) and some of the calculations are optimized to use these extensions.  i have not done a lot of simd coding so i will have to look into what is truly going on here, so for now these values being used as tangents may only appear to be the case.  But the usage i am seeing is strikingly similar to what i found in RE4.

it appears to use the same value as both incoming and outgoing tangents, but as i said i still have a bit of investigating to do to confirm this.  Could probably start out just treating the data as a linear interpolation to begin with anyway, though it will have some errors in the resultant values.  i am trying to find out whether or not the values are used as is, or further modified down the line as i don't not see anything to suggest this so far.

- revel8n
## Post #16
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-09-04T19:35:32+00:00
- Post Title: Re: Street Fighter 4 model animation info

> Reply from revelation
>
> Could probably start out just treating the data as a linear interpolation to begin with anyway, though it will have some errors in the resultant values.

Actually I am displaying the frame 0 to check if the animation name matches the stance first frame, quite a naive approach for now   

In RE4, were the rotation components Rx, Ry, Rz or a 3 components quaternion?
In SF4, I  was quite surprised to see rotation values greater than 1. which I was taking for degrees since I did not knew about the factor thing. 
It might be quaternion component * factor after all...

For the full node transformation matrix computation (after patching the initial matrix with animation values) I use T * S * Rx * Ry * Rz, but it's not it   

I am also extracting T, S, Rx, Ry and Rz from  the initial matrix to build the matrix when some components are not animated.
## Post #17
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2009-09-04T19:48:56+00:00
- Post Title: Re: Street Fighter 4 model animation info

In RE4 values are stored separately for X, Y, and Z coordinate values.  Rotations are usually in radians though, not degrees which would usually limit them from -pi to +pi (+-3.14159...).

I haven't checked the values in this format to see where they fall yet.  Are you assuming a right or left handed world coordinate system?  i have not yet looked into what SF4 is using.  Might want to try T*S*Rz*Ry*Rx.  I usually use Rx*Ry*Rz*S*T as i usually follow a left handed coordinate system.  Though i also usually represent rotations as quaternions when possible.  Will more than likely have to play with the ordering a bit if its non-standard, though i doubt that will be the case.

Do you have a modified version of your app or source code i could play with to better view the values that are currently being returned?

- revel8n
## Post #18
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-09-04T20:11:41+00:00
- Post Title: Re: Street Fighter 4 model animation info

> Reply from revelation
>
> I haven't checked the values in this format to see where they fall yet.  Are you assuming a right or left handed world coordinate system?

I assumed a left-handed coordinate system since it's Direct3D implementation but since it's also cross platform I could be wrong. 
Its mainly laziness...

> Reply from revelation
>
> Might want to try T*S*Rz*Ry*Rx.  I usually use Rx*Ry*Rz*S*T as i usually follow a left handed coordinate system.

I actually tested all combinations but it was not enough... 


> Reply from revelation
>
> Do you have a modified version of your app or source code i could play with to better view the values that are currently being returned?

I will PM you a working version that can export the animation content in a fashion that more or less matches the first post. I can send you some code also but it may be a bit dirty, humm..
## Post #19
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2009-09-08T04:25:53+00:00
- Post Title: Re: Street Fighter 4 model animation info

Ok, just a brief update.

so far things still appear match up with what we thought they were.  Transforms are created in SRT order, and kept around in both matrix and vector/quaternion form.  Angles are in degrees, then converted to radians for use in euler to quaternion calculation.

The main new bit of information though is that it appears that animation track data can be specified as either world/absolute or local/relative transforms.  If bit 0x10 of the previously mentioned flags byte, the value should be treated as absolute/world and thusly not combined with its parent bone transform.

There is also a uint16 flag in the skeleton data as well that seems to keep some particular bones from being processed in the hierarchy at all initially.

```
{
    uint16 parent;
    uint16 child;
    uint16 sibling;
    uint16 unknown0x06;
    uint16 unknown0x08;
    uint16 flags;
    uint32 unknown0x0C;
    float4x4 transformMatrix;
};

```


The data at the file offset 0x20 bytes from the beginning of the skeleton info header also seems to have some influence on how the skeleton hierarchy is processed, but the calculations are filled with simd instructions so i still have a bit of deciphering to do in that regard.  My best initial guess is that there may be some sort ok IK system in place.

Well i will continue to see if i can confirm and clarify more of these things.

- revel8n
## Post #20
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-09-08T17:17:07+00:00
- Post Title: Re: Street Fighter 4 model animation info

> Reply from revelation
>
> 
The main new bit of information though is that it appears that animation track data can be specified as either world/absolute or local/relative transforms.  If bit 0x10 of the previously mentioned flags byte, the value should be treated as absolute/world and thusly not combined with its parent bone transform.

There is also a uint16 flag in the skeleton data as well that seems to keep some particular bones from being processed in the hierarchy at all initially.

I would not be surprised if those flags where used on the "floating" character parts (clothes, hair, collars, ...)


> Reply from revelation
>
> My best initial guess is that there may be some sort ok IK system in place.

This would make sense as most fighting games use IK to ensure the characters steps match the floor surface, the floor is flat in SF4 however.
## Post #21
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-09-09T17:31:07+00:00
- Post Title: Re: Street Fighter 4 model animation info

> Reply from revelation
>
> Transforms are created in SRT order

I forgot it the first time, but did you see the rotation components multiplication order?
## Post #22
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2009-09-09T18:40:17+00:00
- Post Title: Re: Street Fighter 4 model animation info

i cannot be entirely sure until i run things in another debugger that supports viewing of simd registers, but since things are being converted from euler to quaternion the normal order i usually use/see is YXZ (which is also stated as being used in DMC4 here - [http://www.cgtantra.com/index.php?optio ... &Itemid=35](http://www.cgtantra.com/index.php?option=com_content&task=view&id=254&Itemid=35)).  But like i said i cannot easily tell as i can not see the register values yet so it could just as easily be XYZ.

Also i am not sure if it was clear in the previous post, but the absolute/relative flag is checked per transform component scale, rotation, translation  even though the flag is actually specified per track for X,Y,Z separately, it seems to only check then as a whole.  SO you could have an absolute translation with a relative rotation and scale, or any combination of the 3 being absolute/relative.  This is why the code stores things as both a matrix and as separate vector/quaternion components.  When the translation is relative it is combined with the full matrix of its parent bone, where as the quaternion and scale are only combined with the parent's respective quaternion and scale components only.

i am still working through the calculations following the initial skeleton hierarchy update, so i will have to see if i find anything new.
## Post #23
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-09-09T22:13:12+00:00
- Post Title: Re: Street Fighter 4 model animation info

> Reply from revelation
>
> When the translation is relative it is combined with the full matrix of its parent bone, where as the quaternion and scale are only combined with the parent's respective quaternion and scale components only.

Thanks for the clarification. 

To take in account non-animated transformation components we have

Component evaluation:

missing component in animation:   Extract component from original skeleton node matrix (being S*RY*RX*RZ*T )
else:  interpolate component for current frame (or use frame 0 meanwhile if we are lazy like me  ) 
Final node matrix transform: MboneLocal * Mparent * MboneAbsolute 
with:

MboneLocal computed with missing/relative components
MboneAbsolute computed with absolute components
Mparent being the parent's cumulated transform's computed like this as well
## Post #24
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-09-17T14:23:24+00:00
- Post Title: Re: Street Fighter 4 model animation info

Revelation, Here is a viewer that allow raw dumps on every tree leaf.

Included is an animation skeleton viewer, I made the altmain.cpp file for this purpose solely, other sources are shared from my viewer.

As I already said I am not proud of this code but my time is limited (I also have a job and a son so...). This is why there is very little design and I do everything in headers (bad dependencies but fast coding, works as long as the project is small enough)

So to use the stripped viewer, raw dump an animation and its EMA parent in 2 files in my viewer then open the EMA and the animation upon opening the stripped viewer.
This is a little convoluted but it allow the stripped viewer to be as simple and possible, especially since my file chunks reading code id dirty as hell (builds the tree view on the fly, beeeeh)
[piecemonteeSF4explorerV0.35dump.zip](https://xentaxbackup.github.io/file/2357_piecemonteeSF4explorerV0.35dump.zip)
## Post #25
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2009-09-17T15:48:30+00:00
- Post Title: Re: Street Fighter 4 model animation info

Ok,
i am in the process of modifying the code to test things still, but it appears that i may have messed up the explanation of the absolute/relative flag location.  It is on the same flag as the 0x20 and 0x40 size indicator flags on the Animation Tracks, not on the flags in the skeleton nodes.  This means you have to check it for every set of animation data components (commands in your case), thus modifying how each of the animation components are combined during animation playback.  i just happened to see you were checking for it in the skeleton processing insteadof during animation load and processing.

Hope that helps.
## Post #26
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-09-20T14:16:34+00:00
- Post Title: Re: Street Fighter 4 model animation info

I (hopefully) fixed this misunderstanding, I know look for the flag in the animation components and when I dump the values it makes way more sense... sorry for the error  

I also tried to simplify the code, all this component patching of mine looks horribly out of place when I look back at my code.
So I apply transforms consistently this way now:

```
transformMatrix = initBoneMatrix * LocalAnimMatrix * parentMatrix * GlobalAnimMatrix
```

parentMatrix being computed the same way "recursively"

it still does not work better but at least it is readable....

I removed MathHelper (Man, shame on me for that side effect on deg2rad rotation component in MathHelper::composeMatrix  )

I thought about uploading this code on sourceforge, googlecode or  ShareSource but it would be an overkill for 4 files....

Edit: Sources updated:  I included the wrong source and there was a typo in the renderer...
[EMAviewerV3.zip](https://xentaxbackup.github.io/file/2362_EMAviewerV3.zip)
## Post #27
- Username: chrrox
- Rank: Moderator
- Number of posts: 2602
- Joined date: Sun May 18, 2008 10:01 pm
- Post datetime: 2009-09-20T14:20:51+00:00
- Post Title: Re: Street Fighter 4 model animation info

you should put it on one of those sites like google code otherwise the code may get lost.
Your program is great and can be good for people to learn from.
Thanks for all your work.
## Post #28
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-09-20T14:47:40+00:00
- Post Title: Re: Street Fighter 4 model animation info

> Reply from chrrox
>
> you should put it on one of those sites like google code otherwise the code may get lost.
Your program is great and can be good for people to learn from.
Thanks for all your work.
Thank for the support but this is only the animation sources (for now) and some part of it are mostly what a good programmer should not write    (unless in a hurry...)
Still, I am always glad to hear kind thing like this
## Post #29
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2009-09-20T17:27:31+00:00
- Post Title: Re: Street Fighter 4 model animation info

i'll take a look at the new source and compare the results to my hacked in changes.

i added 2 quaternions to the skeleton node structure
there was a typo in setupFrame where the call to getTransform was passed the wrong components for the id given
added a recursive hierarchy update in place of the loop, with an added flag to keep from processing a parent matrix more than once
modified things so that setupFrame could be called more then once to allow for the values to be animated over time.

Rotations do appear to be in xyz order.  i was going to modify things so that all the animations from the initial EMA file could be cycled through as although the hierarchy seems to stay intact now with some visible movement, most of the major parts of the body don't appear to rotate as i would think they would.  So i want to be able to check and see if there are any animations that possibly change more of the bones more explicitly.  What i mean by that is that i am not sure if possibly IK has more influence over how bones are animated than i thought.  i will need to compare the ids listed in what i believe to be the ik info to the bones i think should be moving but aren't.  if a good deal of the bones i am seeing not move are in this list then it is possible ik has much more influence on the skeletal animation than just fixing foot placement or enforcing look-at constraints.  i will see if i have overlooked any of the changes/fixes you made to see if they may help in what i am seeing so far.
## Post #30
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-09-20T20:25:17+00:00
- Post Title: Re: Street Fighter 4 model animation info

> Reply from revelation
>
> 
most of the major parts of the body don't appear to rotate as i would think they would.

I also noticed major part like elbow where not rotated,  I hopped the right rotation component usage or local/absolute flag would compensate this but no...
## Post #31
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-09-25T21:30:54+00:00
- Post Title: Re: Street Fighter 4 model animation info

Hello there,

> Reply from revelation
>
> The bone layout between the mesh and the animation skeletons may not match up, therefore the application creates a mapping between bones with the same name.  i am not sure if you have tried matching the model skeleton to the mesh skeleton, and i have not looked into the model format yet so i don't know if that will even be relevant.

I could verify why Skeleton node names must be matched to map from EMO id to EMA id.
I told you mesh (EMO) and animation (EMA) skeleton were a perfect match but I was wrong once more!
Actually the count matches exactly but not the numbers.

So now, given the bad animation pose, I am able to skin the model pretty, well. I'll watch those bone weight more carefully as some joint looks weird (but if may be a side effect of the bad pose)
[meshAnim.PNG](https://xentaxbackup.github.io/file/2370_meshAnim.PNG)
## Post #32
- Username: Username
- Rank: ultra-n00b
- Number of posts: 1
- Joined date: Wed Sep 30, 2009 5:58 am
- Post datetime: 2009-09-30T21:39:35+00:00
- Post Title: Re: Street Fighter 4 model animation info

Can you guys figure out how to get hit box data for us?

[http://www.eventhubs.com/guides/2009/se ... t-fighter/](http://www.eventhubs.com/guides/2009/sep/18/guide-understanding-hit-boxes-street-fighter/)
## Post #33
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2009-10-08T13:53:53+00:00
- Post Title: Re: Street Fighter 4 model animation info

Just a small update.  Nothing really new to report.

I am still trudging through assembly code.  i am about halfway through deciphering 1 of the 3 different code paths that handle the extra update of the skeleton hierarchy.  i have had to switch to OllyDbg for now to try and interpret the inline sse assembly used in the algorithm.  The cross and dot product code seems to be produced inline this time unlike the matrix and quaternion operations used earlier that were split into separate functions.  So, since the code has been reordered by the compiler with intermixed x86 assembly the methods aren't as easily recognizable, at least initially.  Being able to see the mmx and sse registers in OllyDbg is helpful and it shows a lot of other useful information as i step through the code, i am just not as used to it as i am with ida pro (have no clue why the ida disassembler does not support the view of these registers, oh well).

The path i am working on seems to be the more complicated of the 3, so hopefully once i have this one done the others won't be as much trouble, but i guess i will have to see if i am correct in this assumption.

Bouncing back and forth between a number of games and formats.  Just wanted to let you know i hadn't given up on things, heh.
## Post #34
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-10-08T18:06:43+00:00
- Post Title: Re: Street Fighter 4 model animation info

> Reply from revelation
>
> Just wanted to let you know i hadn't given up on things, heh.

Thanks for the update, I thought you gave up   

Lastly I was only turning in circles, trying random things with little success...
I implemented hermite interpolation but it has little use (except for the root node translation witch give an idea of the whole movement)
## Post #35
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2009-10-11T23:45:13+00:00
- Post Title: Re: Street Fighter 4 model animation info

Hmm, i was attempting to convert everything to nice readable c++ code in hopes of determining the actual algorithm used, but for the moment that is taking too long.  So hopefully it won't take me as long to just do a direct conversion from sse to 3d vector calculations instead.  That way we should be able to tell if these are even the end of the things that need to be looked into to get this all working correctly.  Will have to see how it goes, but this should be at least a bit quicker going for the most part.  i guess i could always just rip it directly to inline assembly and include that in the code.  Well either way at least once i have them in code it can be used as is until it can be cleaned up.  i'll see how much of it i can finish and apply it to the code.  Will need to add loading for the data it uses as well as probably a bit of other extra information from other data structures, but i'll see how it all turns out.
## Post #36
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2009-10-13T20:50:54+00:00
- Post Title: Re: Street Fighter 4 model animation info

Just another quick update.

i believe i have successfully "converted" the first of the 3 methods into working code and i am about half-way through the second.  Hopefully i will be able to test how successful my conversion was a bit later to day and give you a better picture of where things are.  There may still be some assumptions that will not hold in all cases, but i will not know for sure until i get things integrated into the version of the code i have.  The second at least seems to be a bit simpler than the first; not sure about the last yet, though hopefully they are somewhat similar.

Will have to see how it goes, heh.
## Post #37
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-10-13T21:10:16+00:00
- Post Title: Re: Street Fighter 4 model animation info

> Reply from revelation
>
>  Hopefully i will be able to test how successful my conversion was a bit later to day and give you a better picture of where things are.

Great,  I am eager to see what holds our algorithm to display proper bone positions !
## Post #38
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2009-10-15T03:09:37+00:00
- Post Title: Re: Street Fighter 4 model animation info

Unfortunately it seems there is one other section that has data that can  be used to modify animations on the fly.  i was going to wait until i implemented this information as well, but i thought at least you could play around with what i have done so far to see if there is anything i may have missed or implemented wrong.

The section i am talking about is the one that is usually filled with 0x00000000FFFF0000   and    0x20040100####0000 values.  The FFFF and #### values are a 16-bit index of some sort and the other values are flags that determine how to modify the translation and or rotation values of a particular joint in the skeleton.

i will post again once i have implemented the method that uses this data.  Hopefully it will finally bridge the gap of things that are missing, or perhaps i may have accidentally inverted my math somewhere.

i also removed the need to load a separate ema animation chunk and it now loads all the animation from the dumped ema file.  '+' and '-' on the numpad cycle through the animations and now 'L' will allow you to load another file without having to close the application.  Other than that i have not really done any clean up of anything.

The animation timing is just hacked in for my testing as is the use of the directx sdk hermite functions.  i really just wanted to see how things looked attached to the actual mesh data as i have not coded up a version of a viewer that supports that data yet.  Need to look into that in order to complete my format write up of this information.

And the data used by these methods seems to come from the which ever skeleton is the destination, in this case that would be the mesh skeleton.  The other data i will be looking at next still seems to reference the source (animation) skeleton data.  This may still need to be reconfirmed just to be sure all the data is being pulled from the correct locations.
[EMAviewer.rar](https://xentaxbackup.github.io/file/2445_EMAviewer.rar)
## Post #39
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-10-15T19:44:34+00:00
- Post Title: Re: Street Fighter 4 model animation info

Thanks, 
This is very good!!!   

I'll try to integrate this ASAP in the viewer  to test the result with the skinning. 

Edit:Doh! if only I knew about D3DXVec2Hermite, I would not have re-implemented it like I did....

Edit2: OK I integrated the changes in the application, 
we diverged a little but I am grateful you kept most structure as is, it would have been a pain otherwise 
(but it may have also been a pain for you to keep them...I imagined you where like this while reading the my bizarre nested structure names like CommandsPerComponentPerTypePerBone:   , I am pretty sure they mean nothing for  people who really know 3D animation but I could not figure out better ones    )
I saw you fixed some of my code weirdness there and there, good thing!
I still screwed somewhere so i cannot post any result but I will continue tomorrow.

Edit3:

> Reply from revelation
>
> see if there is anything i may have missed or implemented wrong. Actually I did not see anything wrong on your side but in mine!! your code is still based on the first source set I sent you and I made some mistakes (like a side effect in composeMatrix's rotation array parameter) I think it did not harm your functions but since I made some (unreleased) cleaning since, i propose to give you back the code after integration. You can continue on your current sources if you wish but I'll post them when ready just in case.

Edit4:
I wonder why we need to call updateNode once more after the ik pass ?

```
			it!=skelettonNodes.end();it++)
		{
			EMAData::EMASkelettonNode & node = it->second;

			updateNode(node.number);
		}

		for (unsigned long i = 0; i < emaData.m_ikData.size(); ++i)
		{
			updateIKData(i);
		}

		if(m_skelettonLinesVertexBuffer)
		{
			EMAVertex* lineListBuffer = new EMAVertex[2*m_primitiveCount];
			unsigned int i = 0;
			for(EMAData::SkelettonNodePerNumberMap::iterator it=skelettonNodes.begin();
				it!=skelettonNodes.end();it++, i++)
			{
				EMAData::EMASkelettonNode & node = it->second;

				updateNode(node.number);

```


Last Edit:
OK, integration is done it looks pretty nice, new sources will follow shortly

chunli multiple legs and ruy's bag , reminds me there must be some flags in the animation data that dictates sub meshes visibility



[chun-kiko.PNG](https://xentaxbackup.github.io/file/2452_chun-kiko.PNG)
## Post #40
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-10-16T20:51:05+00:00
- Post Title: Re: Street Fighter 4 model animation info

Here are the updated source.
I started from my current sources, added yours and stripped my obsolete code but also few parts of your code that were not compatible with the full application.
Most animation update methods are left untouched except :
- EMAData::getTransform (I kept my hermiteInterpolation implementation instead of D3DXVec2Hermite )
- EMARenderer::updateDeviceObjects was split to allow code reuse for full mesh skinning.
[EMAviewerV4.rar](https://xentaxbackup.github.io/file/2454_EMAviewerV4.rar)
## Post #41
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-10-16T20:57:31+00:00
- Post Title: Re: Street Fighter 4 model animation info

Sorry for the multiple posts, attachments are pretty limited on this board.

Here is a test version that include revelation inverse kinetics management.
Load XXX.cmn.emz, XXX_YY.cos.emz, XXX_YY_ZZ.col.emz and select the EMO model to see animation.
The animation loop does not run itself, you have to move the mouse   

 It is buggy it should not replace previous version.
- There is a D3D resource management error that crashed the app on window resizing when displaying EMO models
- Animation selection combo is fuzzy
[piecemonteeSF4explorerV0.36ik.zip](https://xentaxbackup.github.io/file/2455_piecemonteeSF4explorerV0.36ik.zip)
## Post #42
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2009-10-16T21:20:14+00:00
- Post Title: Re: Street Fighter 4 model animation info

Thanks for the code update, i will take a look when i get back home this afternoon.

The multiple update node calls was just a side effect of having added the ik update code after i had done the initial addition of the recursive update function.  The calls after the ik update should no longer be needed as the loop i pulled above the update ik loop was done to replace it.

The picture you posted is very helpful and is exactly what i needed to see as i could barely tell at times how much was actually changing given the way lines look in a 3d space with no lighting, heh.  i'll have to work on getting that up and running when i can, as seeing the mesh would be very helpful.  In my own code i have written a hermite interpolation implementation as well, as i do not rely on the d3dx functionality being present, but in this case i just used it for simplicity.

The image also leads me to believe that this last bit of data may hopefully be the last things needed to fix the remaining errors as this sections sole purpose seems to be flipping the translations/rotations of certain bones after they have been updated by the animation blending.   At least i hope that is it, barring the one missing ik data processing i have not reversed.  So far none of the animations have accessed it, though i haven't messed with the face animations yet.  Once i see what the newest code has changed i will go through things and modify/add as necessary.  i already changed the euler to quaternion function after checking the math and comparing against the code based on the reversed version from the game.

i will probably just go ahead and implement the required code for the new data as so far it is a fairly simple method.  Still stepping through the code to determine when/why it does this step and what the index value is actually used for.  Other than that the flag values are just checked, and the different x, y, or z values of the translation and/or rotation components are modify accordingly based on whether the animation specifies absolute or relative information.  i am going to assume for now that this modification would go between the setup frame and initial hierarchy update as it modifies the translation and euler angles directly, and so far does not appear to do any direct updating of what would be the resultant matrix and quaternion components.  i will have to see how things go while the code is running.

Hopefully i can have something soon.
## Post #43
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-10-16T21:36:11+00:00
- Post Title: Re: Street Fighter 4 model animation info

> Reply from revelation
>
> The image also leads me to believe that this last bit of data may hopefully be the last things needed to fix the remaining errors as this sections sole purpose seems to be flipping the translations/rotations of certain bones after they have been updated by the animation blending.

I am excited to see the result!
I did not really took the time to look at the ik pass to try the understand how it works but it leads me to think collada will be the only import/export format option for animations. Since this is what capcom used internally it makes sense and, looking at the specification openness, export will be feasible. At least I guess.
However I am pretty sure importing edited collada data into SF4 would be a pain..    .
Even for a mesh format as simple as Wavefront OBJ it is a pain since maya/3DS completely rebuild the mesh structure and people using my app are stuck with misfit3D as it is pretty conservative.
Do you have any experience/feedback with animation file exchanges formats? It would be glad to hear there is an animation tool out there that uses an open file format and handles natively SF4's way of animating characters, but I guess it won't be the case ...

> Reply from revelation
>
> So far none of the animations have accessed it, though i haven't messed with the face animations yet.

It may also be used by camera as their path seems to be held in the EMA container
## Post #44
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2009-10-17T04:26:54+00:00
- Post Title: Re: Street Fighter 4 model animation info

Just another quick update.

This is a weird way to manage animation data.  i am still going through things, and right now the code is actually being run on a face animation.  But this extra data that is used to modify the bone transforms appears to actually be swapping transform data between bones, and then either negating a transform x,y, and/or z component and/or negating, subtracting from 180, or subtracting from -180 the euler rotation x,y, and/or z component.  Have to add some temporary storage for the transform components (like the game does) as it does not do this swap in place; not sure if a bone can be indexed by more than one other one yet, though if the bone's index are always index back by the same bone the temporary space may be able to be avoided.

i am still looking through thins to verify this is actually what is happening, but if so the only real way to export these animations is going to be to re sample them.  Though it seems that the ik data does not get modified in real time from what i can see so for importing them back in it may be enough to resample, or if supported directly export hermite keyframes, and set the ik and extra data values to the cleared/invalid values thus causing the processing to be ignored.

```
	0 != header.unknownPtrs0x10[2])
{
	FSeek(fileHeader.skeletonDataOffset + header.unknownPtrs0x10[2]);
	struct
	{
		uint16 rotationFlags <format = hex>;
		uint16 translationFlags <format = hex>;
		uint16 boneIndex;
		uint16 unknown0x06;
	} unknownData0x18[header.boneCount];
}

```


the offset to this data is in the skeleton header for either the EMA or EMO data 0x18 (24) bytes from the beginning of the header.  The data in the EMO skeleton data seems to always be cleared/invalid values if you want to compare against an EMA and see the difference.  Might also help to compare the index value to the bone names and see if this is some kind of mirroring information or the like.

Oh well, i will update again once i have more information.
## Post #45
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2009-10-17T09:08:58+00:00
- Post Title: Re: Street Fighter 4 model animation info

> Reply from revelation
>
> 
i am still looking through thins to verify this is actually what is happening, but if so the only real way to export these animations is going to be to re sample them.  Though it seems that the ik data does not get modified in real time from what i can see so for importing them back in it may be enough to resample, or if supported directly export hermite keyframes, and set the ik and extra data values to the cleared/invalid values thus causing the processing to be ignored.

I hope all these complicated trick were not introduced just to avoid gimbal lock

Thanks again for this,this amazing, with each new post you bring a valuable amount of info!
I feel like an knowledge leecher
## Post #46
- Username: joeyq
- Rank: n00b
- Number of posts: 18
- Joined date: Tue Jan 19, 2010 6:14 pm
- Post datetime: 2010-01-25T12:47:03+00:00
- Post Title: Re: Street Fighter 4 model animation info

any progress on animation extraction?
## Post #47
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2010-01-25T14:02:13+00:00
- Post Title: Re: Street Fighter 4 model animation info

i hope to have some more things to post soon.  will have to see how things go.  have been a bit busy and have gotten a bit backlogged on side project work.  but hopefully i can find/finalize the last bits of this at some point if possible.
## Post #48
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2010-02-19T22:33:57+00:00
- Post Title: Re: Street Fighter 4 model animation info

Hi, 

glad to hear SF4 animation is still in the pipe!

(I'll be happy to resume developments for Super SF4 also...)
## Post #49
- Username: piecemontee
- Rank: advanced
- Number of posts: 50
- Joined date: Tue Aug 04, 2009 4:34 am
- Post datetime: 2010-04-27T22:37:00+00:00
- Post Title: Re: Street Fighter 4 model animation info

Hi, 

here is an updated AltViewer with mesh display capabilities. browse the EMA block then the EMO obj one exported from the piecemontee's xplorer.
I did not have time to clean the whole application yet.
Sorry for the EMORenderer template and the EMGRendererAllocator thingy, I had to keep sources compatible with the other piecemontee's xplorer.
(All the methods are shared with other sources hence some non-intuitive layout.)
But on the whole these sources suffer from a lot less code bloat than the rest of the sources...
I tried to leave the EMA Renderer untouched to allow soft transition from the old versions.

I Hope it will help!
[EMAviewerV6.rar](https://xentaxbackup.github.io/file/2984_EMAviewerV6.rar)
## Post #50
- Username: Darko
- Rank: double-veteran
- Number of posts: 723
- Joined date: Tue Jul 14, 2009 1:16 am
- Post datetime: 2010-04-29T00:39:23+00:00
- Post Title: Re: Street Fighter 4 model animation info

I was just wondering if you're going to add support for SSFIV models.
## Post #51
- Username: AddiFalcon
- Rank: ultra-n00b
- Number of posts: 2
- Joined date: Sat Jul 30, 2011 7:20 pm
- Post datetime: 2011-07-30T13:55:14+00:00
- Post Title: Re: Street Fighter 4 model animation info

Can any of you post a full structure of obj.ema file.
I have read a full topic, but this info seems to advanced for me.
I am stuck at hexeditor, dunno where in file are located coords of offset of animation parts, animation lengths and etc.


Sensibeat made cool tutorials covering some files, but only info about ema files are covered by you guys.
[http://shoryuken.com/forum/index.php?th ... als.78044/](http://shoryuken.com/forum/index.php?threads/sf4-modding-sensibeats-tutorials.78044/)
Above link show perfect reference of what kind of tutorial I mean.

I plan to make animation editor for SSF4AE.
cam.ema Structure file would be highly appreciated as well.
## Post #52
- Username: logansan25
- Rank: veteran
- Number of posts: 138
- Joined date: Mon Oct 04, 2010 8:15 am
- Post datetime: 2011-07-30T14:36:21+00:00
- Post Title: Re: Street Fighter 4 model animation info

> Reply from piecemontee
>
> Hi, 

here is an updated AltViewer with mesh display capabilities. browse the EMA block then the EMO obj one exported from the piecemontee's xplorer.
I did not have time to clean the whole application yet.
Sorry for the EMORenderer template and the EMGRendererAllocator thingy, I had to keep sources compatible with the other piecemontee's xplorer.
(All the methods are shared with other sources hence some non-intuitive layout.)
But on the whole these sources suffer from a lot less code bloat than the rest of the sources...
I tried to leave the EMA Renderer untouched to allow soft transition from the old versions.

I Hope it will help!

How use this EMAviewerV6? 
View animation only this program or can export animations for 3dmax for example?
## Post #53
- Username: Slozhny
- Rank: beginner
- Number of posts: 26
- Joined date: Mon Aug 31, 2009 6:03 am
- Post datetime: 2014-09-09T10:21:49+00:00
- Post Title: Re: Street Fighter 4 model animation info

Someone known somthing about SF4 animation editor progress?
## Post #54
- Username: revelation
- Rank: mega-veteran
- Number of posts: 183
- Joined date: Tue May 13, 2008 12:15 am
- Post datetime: 2014-09-09T22:50:46+00:00
- Post Title: Re: Street Fighter 4 model animation info

No updates on editing animation.  But the code has been updated at the project site for sf4viewer that allows for better playback of animations and a few minor fixes.
