## Post #1
- Username: IGBT001
- Rank: n00b
- Number of posts: 19
- Joined date: Thu Mar 24, 2022 5:27 pm
- Post datetime: 2022-03-24T09:49:07+00:00
- Post Title: Godot engine repackages PCK

Hi, as the title shows.

I have successfully localized a game developed by Godot engine

However, I have encountered a problem at present, that is, I don't know how to package my modified files separately into PCK files.

If you just replace the original PCK file to release the game, I think it is completely pirated games, which is immoral.

I just want to make a localized patch instead of making pirated games.
## Post #2
- Username: Rabatini
- Rank: veteran
- Number of posts: 97
- Joined date: Tue Nov 22, 2016 8:13 pm
- Post datetime: 2022-03-24T13:37:56+00:00
- Post Title: Godot engine repackages PCK

If do you want create a patch instead upload all game translated.
you can use this tool.

[https://www.romhacking.net/utilities/704/](https://www.romhacking.net/utilities/704/)

it will generate a .xdelta patch, and people would apply this .xdelta in the orginal game.
## Post #3
- Username: IGBT001
- Rank: n00b
- Number of posts: 19
- Joined date: Thu Mar 24, 2022 5:27 pm
- Post datetime: 2022-03-24T15:54:11+00:00
- Post Title: Godot engine repackages PCK

Sorry, I tried to use this program, but I found that I don't know how to use this program. Can you tell me how to use this program?

thank you!
## Post #4
- Username: IGBT001
- Rank: n00b
- Number of posts: 19
- Joined date: Thu Mar 24, 2022 5:27 pm
- Post datetime: 2022-03-24T16:05:17+00:00
- Post Title: Godot engine repackages PCK

Again, suppose the PCK file name of the original game is 001 PCK, I just want to generate a PCK file similar to mod. This PCK file only contains localization files, named 002 PCK。

This 002 PCK document and 001 PCK exists in the game directory, only 002 The loading order of PCK file is higher than 001 PCK files should be given priority to achieve localization effect.
## Post #5
- Username: Rabatini
- Rank: veteran
- Number of posts: 97
- Joined date: Tue Nov 22, 2016 8:13 pm
- Post datetime: 2022-03-24T16:38:00+00:00
- Post Title: Godot engine repackages PCK

its very simple



Capturar.PNG (36.5 KiB) Viewed 208 times



change the mode.
then put the original pck in first then your pck.
put name of the xdelta

like
peganomeujuvenal.xdelta or however you like.

or if your game is .ISO or .bin you can put that too.
## Post #6
- Username: IGBT001
- Rank: n00b
- Number of posts: 19
- Joined date: Thu Mar 24, 2022 5:27 pm
- Post datetime: 2022-03-24T18:04:54+00:00
- Post Title: Godot engine repackages PCK

The key problem now is that I don't know how to create my PCK package. I have the original PCK package and localized files. Now I don't know how to package the localized files into a separate PCK package
## Post #7
- Username: mono24
- Rank: Moderator
- Number of posts: 1671
- Joined date: Fri Jul 27, 2012 12:06 am
- Post datetime: 2022-03-24T21:44:13+00:00
- Post Title: Godot engine repackages PCK

I'm afraid that it may be not possible without changing game's logic for reading data.
Workaround for this is creating x-delta patch as it was mentioned earlier.

Other method would be to create custom installer/patcher.
## Post #8
- Username: Rabatini
- Rank: veteran
- Number of posts: 97
- Joined date: Tue Nov 22, 2016 8:13 pm
- Post datetime: 2022-03-25T00:22:26+00:00
- Post Title: Godot engine repackages PCK

i am little lost here.
Did you localized your game and works fine right?

Xdelta, just take the original file compare with yours and make a patch with the differences.

So you can send your patch  generated by xdelta to the public, and the users should just apply your xdelta patch in the original pck.
## Post #9
- Username: IGBT001
- Rank: n00b
- Number of posts: 19
- Joined date: Thu Mar 24, 2022 5:27 pm
- Post datetime: 2022-03-25T01:26:46+00:00
- Post Title: Godot engine repackages PCK

Sorry, what I described is not very clear. The game developed by Godot engine runs like this.

The PCK file is actually a compressed package packaged according to the specified format. The EXE program is just a launcher. It can read the packaged PCK package or the folder in the specified directory (the PCK file is packaged according to this path) to run the game.

At present, what I localize is the unpacked folder of PCK file, not the original PCK file. What I want to do is to package the localized folder into PCK file according to the original path, and then Godot engine gives priority to reading the localization PCK file.

Godot operation mode 1: exe launcher - PCK file - game operation

Godot operation mode 2: exe launcher - game folder (specified program package is PCK file) - game operation
## Post #10
- Username: IGBT001
- Rank: n00b
- Number of posts: 19
- Joined date: Thu Mar 24, 2022 5:27 pm
- Post datetime: 2022-03-25T01:31:24+00:00
- Post Title: Godot engine repackages PCK

As shown in the figure, the above two methods can run the game normally

What I want to do now is to package this pile of files into a PCK file. It would be great if I could package localization files separately.
## Post #11
- Username: Rabatini
- Rank: veteran
- Number of posts: 97
- Joined date: Tue Nov 22, 2016 8:13 pm
- Post datetime: 2022-03-25T02:06:05+00:00
- Post Title: Godot engine repackages PCK

So, you unpack the pck file did the translation and now do you need to pack back?

an alternative option is make a .msi file to install your translation to the game folder.
## Post #12
- Username: IGBT001
- Rank: n00b
- Number of posts: 19
- Joined date: Thu Mar 24, 2022 5:27 pm
- Post datetime: 2022-03-25T02:29:34+00:00
- Post Title: Godot engine repackages PCK

Yes, that's right. Now I just want to package it into a PCK file, because there is only one EXE file and PCK file in the game downloaded by players from steam. At present, I just want to package it into a PCK file (EXE gives priority to reading the PCK file by default).

If you directly publish the game folder with localized patches, it is equivalent to publishing pirated games, which is not allowed by laws and regulations. If the folder and PCK file exist at the same time, the game will only read the PCK file.
## Post #13
- Username: Rabatini
- Rank: veteran
- Number of posts: 97
- Joined date: Tue Nov 22, 2016 8:13 pm
- Post datetime: 2022-03-25T03:05:46+00:00
- Post Title: Godot engine repackages PCK

here use this tool.
it allow you extract an put files inside the pck

[https://github.com/hhyyrylainen/GodotPc ... cktool.exe](https://github.com/hhyyrylainen/GodotPckTool/releases/download/v1.7/godotpcktool.exe)
## Post #14
- Username: IGBT001
- Rank: n00b
- Number of posts: 19
- Joined date: Thu Mar 24, 2022 5:27 pm
- Post datetime: 2022-03-25T03:30:36+00:00
- Post Title: Godot engine repackages PCK

I don't know why, the win10 64 bit system seems to be unable to run the program normally. When the program is opened, it flashes, and an error is reported when loading the program through CMD instruction. The prompt is: error: no PCK file or list of files given

Through CMD instruction, use godotpcktool Exe program loads PCK file, and the error prompt is: error: specified PCK file doesn't exist: \ banana_ hell. pck

Did I do something wrong?
## Post #15
- Username: Rabatini
- Rank: veteran
- Number of posts: 97
- Joined date: Tue Nov 22, 2016 8:13 pm
- Post datetime: 2022-03-25T04:07:09+00:00
- Post Title: Godot engine repackages PCK

to extrach the pack
use the extract.bat
to insert
use inssert.bat
after extract, just replace your modify files then uses insert to creat a new pck.
you need pu the pck file in same folder of the .exe and bat files.


 commands.zip
(407 Bytes) Downloaded 53 times
## Post #16
- Username: IGBT001
- Rank: n00b
- Number of posts: 19
- Joined date: Thu Mar 24, 2022 5:27 pm
- Post datetime: 2022-03-25T04:35:58+00:00
- Post Title: Re: Godot engine repackages PCK

Thank you for your help. I have successfully created the PCK file in your way. Now my only concern is whether it means piracy if I distribute it according to the localized PCK file (the localized PCK package can run independently)

Or is there any way to let Gordo read the specified PCK file first.
## Post #17
- Username: Rabatini
- Rank: veteran
- Number of posts: 97
- Joined date: Tue Nov 22, 2016 8:13 pm
- Post datetime: 2022-03-25T05:08:20+00:00
- Post Title: Re: Godot engine repackages PCK

now you can use xdelta, taking the original pck and yours pck and generate a .xdelta patch.
i dont think is piracy, if you distribuied the patch. but who knows.
## Post #18
- Username: IGBT001
- Rank: n00b
- Number of posts: 19
- Joined date: Thu Mar 24, 2022 5:27 pm
- Post datetime: 2022-03-25T06:07:47+00:00
- Post Title: Re: Godot engine repackages PCK

Thank you for your help. I don't know if my use of xdelta is wrong or something,

1, I first used the original PCK and the modified PCK file to create the xdelta patch, and the direct running of the game is still the original version.

2. I use the original PCK + xdelta patch to generate new PCK files. Running the game is indeed localized, but how can I create an MSI installation package?
## Post #19
- Username: Rabatini
- Rank: veteran
- Number of posts: 97
- Joined date: Tue Nov 22, 2016 8:13 pm
- Post datetime: 2022-03-25T13:40:31+00:00
- Post Title: Re: Godot engine repackages PCK

> Reply from IGBT001 ↑Fri Mar 25, 2022 2:07 pm at Fri Mar 25, 2022 2:07 pm
>
> 
Thank you for your help. I don't know if my use of xdelta is wrong or something,

1, I first used the original PCK and the modified PCK file to create the xdelta patch, and the direct running of the game is still the original version.

2. I use the original PCK + xdelta patch to generate new PCK files. Running the game is indeed localized, but how can I create an MSI installation package?

So, whats is wrong?
The users will take your patch and apply into the original pck, that is it. more easy than that, its "stole childs candy"
Mostly translation in romhacking scene is made patch by xdelta, ips and derivated instead the full game.

About msi, you can use [https://www.advancedinstaller.com/download.html](https://www.advancedinstaller.com/download.html)

and see some tuto in internet.
its pretty easy.
## Post #20
- Username: IGBT001
- Rank: n00b
- Number of posts: 19
- Joined date: Thu Mar 24, 2022 5:27 pm
- Post datetime: 2022-03-25T14:51:09+00:00
- Post Title: Re: Godot engine repackages PCK

> Reply from Rabatini ↑Fri Mar 25, 2022 9:40 pm at Fri Mar 25, 2022 9:40 pm
>
> 

Thank you for your help. I have found a way to generate localized installation packages.

1. Use the deltapatcher recommended by rabatini Exe program to generate Xdelta differentiated patch.
2. Then write a batch file using xdelta Exe program to generate a new 001 PCK file.
3. Delete the original PCK file of the game (no way, I haven't learned to use the overwrite instruction)
4. Rename 001 PCK file, modified to take precedence over the original file name

Then, you start the game happily!

Sorry, my English is not very good!




 output BAT文件.zip
(162.87 KiB) Downloaded 20 times
## Post #21
- Username: Rabatini
- Rank: veteran
- Number of posts: 97
- Joined date: Tue Nov 22, 2016 8:13 pm
- Post datetime: 2022-03-25T23:48:46+00:00
- Post Title: Re: Godot engine repackages PCK

lol.
Its just apply you .xdelta file into the pck, it will automatically patch.
## Post #22
- Username: IGBT001
- Rank: n00b
- Number of posts: 19
- Joined date: Thu Mar 24, 2022 5:27 pm
- Post datetime: 2022-03-26T08:36:02+00:00
- Post Title: Re: Godot engine repackages PCK

> Reply from Rabatini ↑Sat Mar 26, 2022 7:48 am at Sat Mar 26, 2022 7:48 am
>
> 
lol.
Its just apply you .xdelta file into the pck, it will automatically patch.

But for novices, isn't it good to get a fool installation package that keeps clicking on the next step?
## Post #23
- Username: sharase
- Rank: ultra-n00b
- Number of posts: 2
- Joined date: Thu Feb 02, 2023 5:47 pm
- Post datetime: 2023-08-09T03:59:24+00:00
- Post Title: Re: Godot engine repackages PCK

> Reply from Rabatini ↑Fri Mar 25, 2022 9:40 pm at Fri Mar 25, 2022 9:40 pm
>
> 
Your method involves generating an xdelta patch, using a batch file to create a new PCK file, and making sure the modified PCK file takes priority over the original.
