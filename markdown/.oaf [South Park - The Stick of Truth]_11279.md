## Post #1
- Username: Haoose
- Rank: mega-veteran
- Number of posts: 280
- Joined date: Wed Mar 02, 2011 4:34 am
- Post datetime: 2014-03-04T12:39:11+00:00
- Post Title: *.oaf [South Park - The Stick of Truth]

Request
No compress
Easy format =)
## Post #2
- Username: kamuline
- Rank: n00b
- Number of posts: 17
- Joined date: Wed Sep 02, 2009 2:11 am
- Post datetime: 2014-03-04T17:53:53+00:00
- Post Title: *.oaf [South Park - The Stick of Truth]

Did you tried Raptor's tool?
[http://raptor.cestiny.cz/download/dunge ... actor.html](http://raptor.cestiny.cz/download/dungeon-siege-3-oaf-files-extractor.html)
## Post #3
- Username: Haoose
- Rank: mega-veteran
- Number of posts: 280
- Joined date: Wed Mar 02, 2011 4:34 am
- Post datetime: 2014-03-04T18:01:27+00:00
- Post Title: *.oaf [South Park - The Stick of Truth]

kamuline
Work for PC-file. Thx

No work for XBOX-file
## Post #4
- Username: XRaptor
- Rank: mega-veteran
- Number of posts: 226
- Joined date: Sat Jul 12, 2008 11:42 pm
- Post datetime: 2014-03-04T22:00:51+00:00
- Post Title: *.oaf [South Park - The Stick of Truth]

Working extractor/repacker and string editor - all is ready, but I need to check one strange behavior in game. Some translated texts seems break game UI and I need to find out what exactly is the problem. Maybe it is just font/used characters problme, maybe it is something different.
## Post #5
- Username: kalleoskar
- Rank: beginner
- Number of posts: 35
- Joined date: Thu Dec 25, 2008 10:17 pm
- Post datetime: 2014-03-05T00:05:02+00:00
- Post Title: *.oaf [South Park - The Stick of Truth]

Cool , raptor it works!  Do you know how i can decode the script file ogd and amx?
## Post #6
- Username: XRaptor
- Rank: mega-veteran
- Number of posts: 226
- Joined date: Sat Jul 12, 2008 11:42 pm
- Post datetime: 2014-03-05T19:12:32+00:00
- Post Title: *.oaf [South Park - The Stick of Truth]

South Park - The Stick of Truth OAF Files Extractor
[http://raptor.cestiny.cz/download/south ... actor.html](http://raptor.cestiny.cz/download/south-park-the-stick-of-truth-oaf-files-extractor.html)

South Park - The Stick of Truth Translator
[http://raptor.cestiny.cz/download/south ... lator.html](http://raptor.cestiny.cz/download/south-park-the-stick-of-truth-translator.html)
## Post #7
- Username: kalleoskar
- Rank: beginner
- Number of posts: 35
- Joined date: Thu Dec 25, 2008 10:17 pm
- Post datetime: 2014-03-06T16:58:31+00:00
- Post Title: *.oaf [South Park - The Stick of Truth]

Thanks! Script support? Or do that need another program, hexedit perhaps , ogd and amx
## Post #8
- Username: wordhg
- Rank: advanced
- Number of posts: 49
- Joined date: Tue Oct 15, 2013 8:21 am
- Post datetime: 2014-03-09T11:19:58+00:00
- Post Title: *.oaf [South Park - The Stick of Truth]

> Reply from XRaptor
>
> South Park - The Stick of Truth OAF Files Extractor
http://raptor.cestiny.cz/download/south ... actor.html

South Park - The Stick of Truth Translator
http://raptor.cestiny.cz/download/south ... lator.html

No work for ps3?
## Post #9
- Username: XRaptor
- Rank: mega-veteran
- Number of posts: 226
- Joined date: Sat Jul 12, 2008 11:42 pm
- Post datetime: 2014-03-09T14:55:18+00:00
- Post Title: *.oaf [South Park - The Stick of Truth]

There are working tools for PC and XBox360. I will create PS3 version today (I hope). Only problem is I have only PC. So if someone want to create other version tools I need source files. I can't make PS3 version, if I have no PS3 data  And sometimes in PS3 version some files are still encrypted and I have no idea, how to decrypt them.
## Post #10
- Username: wordhg
- Rank: advanced
- Number of posts: 49
- Joined date: Tue Oct 15, 2013 8:21 am
- Post datetime: 2014-03-09T15:41:10+00:00
- Post Title: *.oaf [South Park - The Stick of Truth]

> Reply from XRaptor
>
> There are working tools for PC and XBox360. I will create PS3 version today (I hope). Only problem is I have only PC. So if someone want to create other version tools I need source files. I can't make PS3 version, if I have no PS3 data  And sometimes in PS3 version some files are still encrypted and I have no idea, how to decrypt them.
[https://www.mediafire.com/?ruorijadd51dopt](https://www.mediafire.com/?ruorijadd51dopt)

[http://www.mediafire.com/download/kl2rb ... nsored.oaf](http://www.mediafire.com/download/kl2rbbu6u05y5c1/data_archive_uncensored.oaf)
thank!!
## Post #11
- Username: XRaptor
- Rank: mega-veteran
- Number of posts: 226
- Joined date: Sat Jul 12, 2008 11:42 pm
- Post datetime: 2014-03-09T16:53:33+00:00
- Post Title: *.oaf [South Park - The Stick of Truth]

Hmm, there is little problem, I have no idea, what compression algorithm is used for PS3 files. Anyone can help?


 ps3.zip
PS3 (5.73 KiB) Downloaded 41 times
## Post #12
- Username: ihatecompvir
- Rank: ultra-n00b
- Number of posts: 2
- Joined date: Thu Dec 30, 2010 9:11 pm
- Post datetime: 2014-03-13T06:57:00+00:00
- Post Title: *.oaf [South Park - The Stick of Truth]

I started working on an extractor specifically for the 360 version, as the tool Raptor posted didn't seem to work for the 360 files (I'd assume this is because of endian order).

[http://ihatecompvir.com/1/post/2014/03/ ... art-1.html](http://ihatecompvir.com/1/post/2014/03/south-park-stick-of-truth-360-oaf-stuff-part-1.html)
There's the post about it on my blog! I'm not sure whether or not posting a link to my blog is allowed (doubt it is because I didn't see a rule against it and also my blog does not host any copyrighted files) but there's the research I've gotten so far.

The .OAF format is extremely simple, but I'm stuck on parsing the file names. If someone is good with parsing null terminated strings in C# using a Binary/StreamReader, and wants to help, then send me a message and I'll definitely credit you when the tool comes out
## Post #13
- Username: XRaptor
- Rank: mega-veteran
- Number of posts: 226
- Joined date: Sat Jul 12, 2008 11:42 pm
- Post datetime: 2014-03-13T07:03:29+00:00
- Post Title: *.oaf [South Park - The Stick of Truth]

I have fully working XBox360 tool, just forgot to add links to download page after tests 

```
http://raptor.cestiny.cz/download/files/utils/SouthParkXBox360Translator100.rar

```


OK and about PS3 version. It is the same problem as Dungeon Siege 3. I really have no idea, what compression is used in PS files. LZA? LZW? LZwhatever? I don't know. If someone familiar with PS3 could help with algorithm identification, it will be great.
## Post #14
- Username: ihatecompvir
- Rank: ultra-n00b
- Number of posts: 2
- Joined date: Thu Dec 30, 2010 9:11 pm
- Post datetime: 2014-03-13T07:07:02+00:00
- Post Title: *.oaf [South Park - The Stick of Truth]

> Reply from XRaptor
>
> I have fully working XBox360 tool, just forgot to add links to download page after tests 
Code: Select allhttp://raptor.cestiny.cz/download/files/utils/SouthParkXBox360Extractor100.rar
http://raptor.cestiny.cz/download/files/utils/SouthParkXBox360Translator100.rar
Well then, ignore my research as you seem to have already figured it all out 

Congrats! I guess I can put this tool into my retired projects folder as you've already beaten me completely.
## Post #15
- Username: Thief1987
- Rank: advanced
- Number of posts: 72
- Joined date: Wed Jan 18, 2012 12:11 pm
- Post datetime: 2014-03-13T13:04:36+00:00
- Post Title: *.oaf [South Park - The Stick of Truth]

> Reply from XRaptor
>
> I have fully working XBox360 tool, just forgot to add links to download page after tests 
Code: Select allhttp://raptor.cestiny.cz/download/files/utils/SouthParkXBox360Extractor100.rar
http://raptor.cestiny.cz/download/files/utils/SouthParkXBox360Translator100.rar


OK and about PS3 version. It is the same problem as Dungeon Siege 3. I really have no idea, what compression is used in PS files. LZA? LZW? LZwhatever? I don't know. If someone familiar with PS3 could help with algorithm identification, it will be great.

PS3 version use deflate compression
## Post #16
- Username: XRaptor
- Rank: mega-veteran
- Number of posts: 226
- Joined date: Sat Jul 12, 2008 11:42 pm
- Post datetime: 2014-03-15T18:05:02+00:00
- Post Title: Re: *.oaf [South Park - The Stick of Truth]

> Reply from Thief1987
>
> PS3 version use deflate compression
Are you able to unpack file attached above? I'm not sure about deflate.
## Post #17
- Username: Thief1987
- Rank: advanced
- Number of posts: 72
- Joined date: Wed Jan 18, 2012 12:11 pm
- Post datetime: 2014-03-15T19:04:44+00:00
- Post Title: Re: *.oaf [South Park - The Stick of Truth]

Yes. Compressed data starts from offset 0x4
0x00-0x02 - zsize
0x02-0x04 - size
[http://rghost.ru/53085653](http://rghost.ru/53085653)
## Post #18
- Username: XRaptor
- Rank: mega-veteran
- Number of posts: 226
- Joined date: Sat Jul 12, 2008 11:42 pm
- Post datetime: 2014-03-15T19:18:18+00:00
- Post Title: Re: *.oaf [South Park - The Stick of Truth]

Hmm, zlib library doesn't work for this. I thought zlib IS deflate.
## Post #19
- Username: wordhg
- Rank: advanced
- Number of posts: 49
- Joined date: Tue Oct 15, 2013 8:21 am
- Post datetime: 2014-03-18T15:44:33+00:00
- Post Title: Re: *.oaf [South Park - The Stick of Truth]

> Reply from Thief1987
>
> XRaptor wrote:I have fully working XBox360 tool, just forgot to add links to download page after tests 
Code: Select allhttp://raptor.cestiny.cz/download/files/utils/SouthParkXBox360Extractor100.rar
http://raptor.cestiny.cz/download/files/utils/SouthParkXBox360Translator100.rar


OK and about PS3 version. It is the same problem as Dungeon Siege 3. I really have no idea, what compression is used in PS files. LZA? LZW? LZwhatever? I don't know. If someone familiar with PS3 could help with algorithm identification, it will be great.

PS3 version use deflate compression

ok~ thank you
## Post #20
- Username: XRaptor
- Rank: mega-veteran
- Number of posts: 226
- Joined date: Sat Jul 12, 2008 11:42 pm
- Post datetime: 2014-03-21T22:31:39+00:00
- Post Title: Re: *.oaf [South Park - The Stick of Truth]

Well, I'm lost. Deflate using quickbms works fine on PS3 files. My tools are made in Delphi and for unpacking PC and XBox data is used standard Zlib library. I have no idea, what other "deflate" library I can use for PS3 files  I thought zlib is based on deflate/inflate algorithm, but it doesn't work. Anyone can tell me what is different? So zlib is not deflate?
## Post #21
- Username: chrrox
- Rank: Moderator
- Number of posts: 2602
- Joined date: Sun May 18, 2008 10:01 pm
- Post datetime: 2014-03-22T02:18:20+00:00
- Post Title: Re: *.oaf [South Park - The Stick of Truth]

the difference is the window size i think 15 and -15
## Post #22
- Username: XRaptor
- Rank: mega-veteran
- Number of posts: 226
- Joined date: Sat Jul 12, 2008 11:42 pm
- Post datetime: 2014-03-22T08:24:15+00:00
- Post Title: Re: *.oaf [South Park - The Stick of Truth]

> Reply from chrrox
>
> the difference is the window size i think 15 and -15
Yes, you are right. I found it on zlib web site. Tried windowBits -15 and it starts working. So it seems it is just deflate stream without any crc and headers or something. I just need to test repack and it will be done
## Post #23
- Username: XRaptor
- Rank: mega-veteran
- Number of posts: 226
- Joined date: Sat Jul 12, 2008 11:42 pm
- Post datetime: 2014-03-23T10:09:53+00:00
- Post Title: Re: *.oaf [South Park - The Stick of Truth]

Ok, PS3 tools uploaded. 

South Park - The Stick of Truth OAF Files Extractor
[http://raptor.cestiny.cz/download/south ... actor.html](http://raptor.cestiny.cz/download/south-park-the-stick-of-truth-oaf-files-extractor.html)

South Park - The Stick of Truth Translator
[http://raptor.cestiny.cz/download/south ... lator.html](http://raptor.cestiny.cz/download/south-park-the-stick-of-truth-translator.html)
## Post #24
- Username: wordhg
- Rank: advanced
- Number of posts: 49
- Joined date: Tue Oct 15, 2013 8:21 am
- Post datetime: 2014-03-23T14:47:15+00:00
- Post Title: Re: *.oaf [South Park - The Stick of Truth]

> Reply from XRaptor
>
> Ok, PS3 tools uploaded. 

South Park - The Stick of Truth OAF Files Extractor
http://raptor.cestiny.cz/download/south ... actor.html

South Park - The Stick of Truth Translator
http://raptor.cestiny.cz/download/south ... lator.html

very thank!
## Post #25
- Username: Thief1987
- Rank: advanced
- Number of posts: 72
- Joined date: Wed Jan 18, 2012 12:11 pm
- Post datetime: 2014-03-23T15:35:25+00:00
- Post Title: Re: *.oaf [South Park - The Stick of Truth]

XRaptor
Maybe you update you tool for Dungeon Siege too? I'm lazy write it by myself
## Post #26
- Username: XRaptor
- Rank: mega-veteran
- Number of posts: 226
- Joined date: Sat Jul 12, 2008 11:42 pm
- Post datetime: 2014-03-23T21:44:55+00:00
- Post Title: Re: *.oaf [South Park - The Stick of Truth]

> Reply from Thief1987
>
> XRaptor
Maybe you update you tool for Dungeon Siege too? I'm lazy write it by myself

Hmm, I'll try, but not today, this PS3 format is pain. Different compression, chunked compressed data, no simple offsets etc.
## Post #27
- Username: Thief1987
- Rank: advanced
- Number of posts: 72
- Joined date: Wed Jan 18, 2012 12:11 pm
- Post datetime: 2014-03-23T22:16:11+00:00
- Post Title: Re: *.oaf [South Park - The Stick of Truth]

Oh, i thought it's just different compression method
