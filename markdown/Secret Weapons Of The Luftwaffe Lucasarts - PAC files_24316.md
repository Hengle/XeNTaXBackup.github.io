## Post #1
- Username: eddywinch82
- Rank: ultra-n00b
- Number of posts: 9
- Joined date: Wed Aug 04, 2021 10:22 pm
- Post datetime: 2021-08-04T15:05:26+00:00
- Post Title: Secret Weapons Of The Luftwaffe Lucasarts - PAC files

Hi There,

I have some .PAC Files which are external Graphics of Aircraft, in the game Secret Weapons Of The Luftwaffe, by Lucasarts or Lucasfilm Games. Which is a DOS based game, which needs to be run in the Program DosBox.

the file extension, for the Files is .PAC , but they don't appear to be Atari Game Stad .PAC Files, as an Atari Game Graphics viewer can't open them.

I believe them to be compressed, and when I open them in a Hex Editor, the files don't have an Format indicator in the Decoded text.

How can I decipher what compression format they are using, and how do I get them to be viewable Files ?

I tried to attach, two relevant .PAC Files from the game, but when I tried, it said invalid File Extension.

The two Files are called, B17G.PAC and B17GS.PAC

Here is a link to where the game can be downloaded from :-

<link deleted by moderator, game download links are not allowed here>

Any help would be much appreciated.

Best Regards

Eddie Winch
## Post #2
- Username: mono24
- Rank: Moderator
- Number of posts: 1671
- Joined date: Fri Jul 27, 2012 12:06 am
- Post datetime: 2021-08-05T09:54:36+00:00
- Post Title: Secret Weapons Of The Luftwaffe Lucasarts - PAC files

Hi, you have to reverse engineer file format and compression method to be able to parse these PAC files.
You can start learning here [viewtopic.php?f=29&t=22266](https://forum.xentax.com/viewtopic.php?f=29&t=22266)
Check "DOS" section there. Maybe you're lucky and this compression is already known.


Check also these posts:
[https://zenhax.com/viewtopic.php?t=27](https://zenhax.com/viewtopic.php?t=27)
[https://zenhax.com/viewtopic.php?t=23](https://zenhax.com/viewtopic.php?t=23)
## Post #3
- Username: eddywinch82
- Rank: ultra-n00b
- Number of posts: 9
- Joined date: Wed Aug 04, 2021 10:22 pm
- Post datetime: 2021-08-05T17:55:37+00:00
- Post Title: Secret Weapons Of The Luftwaffe Lucasarts - PAC files

Hi ikskoks,

Many thanks, for your very helpful reply to my Thread, it's much appreciated.

I followed the instructions in the Tutorial :- QuickBMS - Scan all the supported compressions

And I ran the method on the B17G.PAC File, to find out what compression is being used for it.

And I now have .dmp Files in a particular Folder on my Computer.

The .dmp Files are not named numerically however, like in the Tutorial. I found that when I open the B17G.PAC and BPE_ALT1.dmp Files, in a Hex Editor, the Output Hex Data is the same.

So does that mean, that the data compression type is BPE ? The Tutorial says, to open the File,  defs.h text file inside the QuickBMS source code (src folder in quickbms.zip),  and check what algorithm is that number 8:  however in the quickbms.zip File I downloaded, that File and Folder is missing, could you tell me, where I can get that Folder and File etc.

Any help would be much appreciated.

Best Regards

Eddie Winch
## Post #4
- Username: mono24
- Rank: Moderator
- Number of posts: 1671
- Joined date: Fri Jul 27, 2012 12:06 am
- Post datetime: 2021-08-05T21:44:32+00:00
- Post Title: Secret Weapons Of The Luftwaffe Lucasarts - PAC files

> could you tell me, where I can get that Folder and File etc.
You need to download archive with the source code, not the executable.
Then you just go to "src" directory [https://i.imgur.com/FQUWWqd.png](https://i.imgur.com/FQUWWqd.png)

> So does that mean, that the data compression type is BPE ?

No. Those dump files are results generated by many different compression functions that quickbms can handle.
So your B17G.PAC is original compressed file and DMP file should contain uncompressed data.
In most cases compression makes file smaller, sou you should look for DMP files that are larger in size and analyze them in hex editor.
If you expect to see any image data, then you should probably look on the data in the TextureFinder or any similar tool [viewtopic.php?t=15540](https://forum.xentax.com/viewtopic.php?t=15540)

If you fail with this method, then you should probably reverse engineer file format by some debugging. It's too much to explain in one post, but we have tutorials covering that topic in the "tutorials collection" I have linked above.
## Post #5
- Username: eddywinch82
- Rank: ultra-n00b
- Number of posts: 9
- Joined date: Wed Aug 04, 2021 10:22 pm
- Post datetime: 2021-08-06T14:58:01+00:00
- Post Title: Secret Weapons Of The Luftwaffe Lucasarts - PAC files

Hi ikskoks,

In the QuickBMS - Scan all the supported compressions Tutorial,

It says to check, which algorithm is for a particular scan number, i.e COMP_LZ01 in the defs.h File in the quickbms/src Folder is from scan 3.

However that Data is not present in my defs.h File after I ran a scan, do I need another defs.h file, which contains that info ? and if so where will I get that ?

Or is that Data, supposed to be written, to the defs.h File when you run a scan of a File ? And if so how do you get quickbms to write to that File,

I.e. what isn't working, or what have I done wrong ?

Any help and info would be much appreciated.

Best Regards

Eddie Winch
## Post #6
- Username: mono24
- Rank: Moderator
- Number of posts: 1671
- Joined date: Fri Jul 27, 2012 12:06 am
- Post datetime: 2021-08-06T21:23:36+00:00
- Post Title: Secret Weapons Of The Luftwaffe Lucasarts - PAC files

Ok, so first of all this tutorial has been created in 2014, so some details may be a little outdated.
Another thing is that defs.h file is least of your problems while following this steps, because your focus should be on checking those DMP files.
You don't really need defs.h becasue it was only used to determine algoritm name in the past. Now you have this name as your filename, so why bother?

Also, if you feel confused with all of this, you should read more basic tutorials first.
## Post #7
- Username: eddywinch82
- Rank: ultra-n00b
- Number of posts: 9
- Joined date: Wed Aug 04, 2021 10:22 pm
- Post datetime: 2021-08-07T00:21:04+00:00
- Post Title: Secret Weapons Of The Luftwaffe Lucasarts - PAC files

Hi ikskoks,

I believe, the File to be using deflate compression, because in the 'How to recognize the compression algorithms with your eyes' tutorial, the Hex Code starts with ed in the example shown, and in the file in question it does too. In fact the Data shown, from the B17G.PAC and  DEFLATE_NOERROR.dmp Files, in the Hex Editor I am using, is the same in both Files. 

Also the DEFLATE_NOERROR .dmp File, is the same size as the file in question, i.e. 30 bytes.

And according to a post I read on this forum, DEFLATE_NOERROR.dmp is the deflate comtype.

Am I coming to a valid conclusion here, based on the tutorials I have read ?

So now will I have to write, a quickbms script to extract the graphics from the File ?

There are no ones for the game, I have taken the File from ? Or is there a standard one, for files using deflate compression, I can base one on?

Best Regards

Eddie Winch
## Post #8
- Username: mono24
- Rank: Moderator
- Number of posts: 1671
- Joined date: Fri Jul 27, 2012 12:06 am
- Post datetime: 2021-08-07T10:31:52+00:00
- Post Title: Secret Weapons Of The Luftwaffe Lucasarts - PAC files

> Also the DEFLATE_NOERROR .dmp File, is the same size as the file in question, i.e. 30 bytes.
Why do you assume that files should be identical? It's  wrong. DMP file should contain only uncompressed data. So if you are testing for example on a compressed text data, you should get human readable text file in the output. In most cases DMP file should be larger than original one.

> So now will I have to write, a quickbms script to extract the graphics from the File ?
You should do that only when you know the file format and you are sure what compression method was used.
## Post #9
- Username: eddywinch82
- Rank: ultra-n00b
- Number of posts: 9
- Joined date: Wed Aug 04, 2021 10:22 pm
- Post datetime: 2021-08-07T11:34:20+00:00
- Post Title: Secret Weapons Of The Luftwaffe Lucasarts - PAC files

Hi ikskoks,

I really appreciate your help, The B17G.PAC File is a game graphics file, so what should I be looking for, in the Output ?

I get what you mean now, about looking for larger size .dmp Files, than the source File, i.e. uncompressed data, I really should have
worked that out straightaway.

Also do all the .dmp Files, have to be opened one at a time in a Hex Editor ? I have got rid of the .dmp Files less than 30 KB in Size, i.e. the size of the B17G.PAC File.

But I still have around 160 .dmp Files to take a look at, I have looked at a few already, but I have had no success so far.

Is there a comtype type utility, that can scan through all .dmp File at once, to find candidate .dmp Files ?

Best Regards

Eddie Winch
## Post #10
- Username: mono24
- Rank: Moderator
- Number of posts: 1671
- Joined date: Fri Jul 27, 2012 12:06 am
- Post datetime: 2021-08-07T15:40:29+00:00
- Post Title: Secret Weapons Of The Luftwaffe Lucasarts - PAC files

> The B17G.PAC File is a game graphics file, so what should I be looking for, in the Output ?
If you are 100% sure that those files contain graphics, then you should look for some familiar shapes in any texture preview tool like TextureFinder etc.

> Is there a comtype type utility, that can scan through all .dmp File at once, to find candidate .dmp Files ?
No. That could work only if you're sure that DMP file has some familiar signatures.

For example in the tutorial PNG file was compressed, so you could automatically search for "PNG" signatures. [http://wiki.xentax.com/index.php/PNG_Image](http://wiki.xentax.com/index.php/PNG_Image)
You could use for example total commander to achieve this [https://ikskoks.pl/searching-text-strin ... commander/](https://ikskoks.pl/searching-text-strings-using-total-commander/)
## Post #11
- Username: eddywinch82
- Rank: ultra-n00b
- Number of posts: 9
- Joined date: Wed Aug 04, 2021 10:22 pm
- Post datetime: 2021-08-07T17:47:35+00:00
- Post Title: Secret Weapons Of The Luftwaffe Lucasarts - PAC files

Hi ikskoks,

I did a search for pac text i.e. 'signatures' in the .dmp files, using the program Total Commander, as you showed me how to do, and it found 5 .dmp files with pac in the decoded text :-

WP16.dmp    Konamiac.dmp   Fin.dmp  CTW.dmp and ANCO0.dmp

the CTW.dmp is the largest .dmp File at 600 KB, could that be the format for the compression ? What do I do
now, to narrow things down, to identify the correct compression format ?

Regards

Eddie Winch
## Post #12
- Username: eddywinch82
- Rank: ultra-n00b
- Number of posts: 9
- Joined date: Wed Aug 04, 2021 10:22 pm
- Post datetime: 2021-08-08T11:51:22+00:00
- Post Title: Secret Weapons Of The Luftwaffe Lucasarts - PAC files

Hi There,

I have some .PAC Files which are external Game Graphics of Aircraft, in the game Secret Weapons Of The Luftwaffe, by Lucasarts or Lucasfilm Games. Which is a DOS based game, which needs to be run in the Program DosBox.

The file extension, for the Files is .PAC , I thought therefore, that they might be Hi Resolution Bitmap Stad .PAC Files, but I can't find a utility, that can open and view them. Although that might be due to them being decompressed. I have viewed the File B17G.PAC in a Hex Editor, and the output starts with ED.

I ran a comtype scan on the File B17G.PAC, and got around 160 .dmp Files.

I did a search for pac text i.e. 'signatures' in the .dmp files, using the program Total Commander, and it found 5 .dmp files with pac in the decoded text. I have viewed some of the 160 or so .dmp Files in a Hex Editor.

WP16.dmp Konamiac.dmp Fin.dmp CTW.dmp and ANCO0.dmp

the CTW.dmp is the largest .dmp File at 600 KB, could that be the format for the compression ? What do I do
now, to narrow things down, to identify the correct compression format ?

I would like to attach the two Files, I need looking at, so someone could look at the files, to help me establish the compression format.

B17G.PAC and B17GS.PAC

But I can't attach them unfortunately.

Also if someone can tell me, the quickbms script I need to extract the Game Graphics, if someone is able to establish, the compression format for me ?

Any help would much appreciated.

Regards

Eddie Winch
## Post #13
- Username: eddywinch82
- Rank: ultra-n00b
- Number of posts: 9
- Joined date: Wed Aug 04, 2021 10:22 pm
- Post datetime: 2021-08-08T17:47:51+00:00
- Post Title: Secret Weapons Of The Luftwaffe Lucasarts - PAC files

Is anyone able to help me ?

If so, I would be very grateful.

Regards

Eddie Winch
## Post #14
- Username: eddywinch82
- Rank: ultra-n00b
- Number of posts: 9
- Joined date: Wed Aug 04, 2021 10:22 pm
- Post datetime: 2021-08-08T18:47:18+00:00
- Post Title: Secret Weapons Of The Luftwaffe Lucasarts - PAC files

Hi there,

I have uploaded the two Files, B17G.PAC and B17GS.PAC to the Mediafire Website.

Here are the two Website Links, to those Files :-

[https://www.mediafire.com/file/hzksh71p ... G.PAC/file](https://www.mediafire.com/file/hzksh71pqzhcw0d/B17G.PAC/file)

[https://www.mediafire.com/file/b5lozv3b ... S.PAC/file](https://www.mediafire.com/file/b5lozv3bgqsc6lx/B17GS.PAC/file)

Regards

Eddie Winch
